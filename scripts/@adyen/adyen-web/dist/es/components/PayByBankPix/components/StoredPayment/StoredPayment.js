import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as a,useRef as n,useCallback as o,useEffect as r}from"../../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as i}from"../../../../core/Context/CoreProvider.js";import l from"../../../internal/Voucher/Voucher.js";import s from"../../../../core/Context/useImage.js";import p from"../../../internal/PayButton/PayButton.js";import m from"./getAuthorizationStatus.js";import u from"../Enrollment/components/PayByBankPixAwait.js";function c({onPay:c,type:y,countdownTime:b,receiver:d,amount:f,txVariant:x,issuer:g,setComponentRef:h,enrollmentId:k,initiationId:w,clientKey:j,onAuthorize:v,onError:C}){const{i18n:P,loadingContext:I}=i(),B=s(),[E,F]=a("ready"),[S,z]=a(null),A=[{name:"open-finance",alt:P.get("paybybankpix.await.logoAlt.openFinance"),src:`${B({parentFolder:`${x}/`})("open-finance")}`}],D=[{label:P.get("paybybankpix.payment.receiver.label"),value:d},{label:P.get("paybybankpix.payment.paymentDate.label"),value:P.date((new Date).toString())},{label:P.get("paybybankpix.payment.paymentMethod.label"),value:"Pix Open Finance"}],T=n({setStatus:F}),K=o((async()=>{if(S)return;const e=await m({enrollmentId:k,initiationId:w,clientKey:j,loadingContext:I});return e.authorizationOptions&&z(e.authorizationOptions),e}),[S,k,w,j,I]);return r((()=>{h(T.current)}),[h]),r((()=>{S&&v(S)}),[S]),"await"===y?e(u,{logos:A,type:x,countdownTime:b,clientKey:j,onError:C,awaitText:P.get("paybybankpix.await.fetchDetails"),pollStatus:K}):e(t,null,e(l,{issuerImageUrl:B({imageFolder:`${x}/`})(g),paymentMethodType:x,amount:P.amount(f.value,f.currency),voucherDetails:D}),e(p,{classNameModifiers:["standalone"],label:P.get("paybybankpix.storedPayment.payButton.label"),status:E,amount:f,onClick:c}))}export{c as default};
//# sourceMappingURL=StoredPayment.js.map
