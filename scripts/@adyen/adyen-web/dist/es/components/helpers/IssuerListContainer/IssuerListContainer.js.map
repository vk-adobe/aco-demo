{"version":3,"file":"IssuerListContainer.js","sources":["../../../../../src/components/helpers/IssuerListContainer/IssuerListContainer.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../../internal/UIElement/UIElement';\nimport IssuerList from '../../internal/IssuerList';\nimport getIssuerImageUrl from '../../../utils/get-issuer-image';\nimport { FALLBACK_CONTEXT } from '../../../core/config';\nimport { CoreProvider } from '../../../core/Context/CoreProvider';\nimport RedirectButton from '../../internal/RedirectButton';\nimport SRPanelProvider from '../../../core/Errors/SRPanelProvider';\nimport { IssuerListConfiguration, IssuerListData } from './types';\nimport type { ICore } from '../../../core/types';\n\nclass IssuerListContainer extends UIElement<IssuerListConfiguration> {\n    protected static defaultProps = {\n        showImage: true,\n        issuers: [],\n        highlightedIssuers: [],\n        loadingContext: FALLBACK_CONTEXT,\n        showPaymentMethodItemImages: false\n    };\n\n    constructor(checkout: ICore, props?: IssuerListConfiguration) {\n        super(checkout, props);\n\n        const getImage = props => this.resources.getImage(props);\n\n        if (this.props.showImage) {\n            const getIssuerIcon = getIssuerImageUrl({ loadingContext: this.props.loadingContext }, this.constructor['type'], getImage);\n\n            this.props.issuers = this.props.issuers.map(item => ({\n                ...item,\n                icon: getIssuerIcon(item.id)\n            }));\n        }\n    }\n\n    formatProps(props) {\n        const issuers = (props.details && props.details.length && (props.details.find(d => d.key === 'issuer') || {}).items) || props.issuers || [];\n        return { ...props, issuers };\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData(): IssuerListData {\n        return {\n            paymentMethod: {\n                type: this.type,\n                issuer: this.state?.data?.issuer\n            }\n        };\n    }\n\n    /**\n     * Returns whether the component state is valid or not\n     */\n    get isValid() {\n        if (this.props.issuers.length === 0) {\n            return true;\n        }\n        return !!this.state?.isValid;\n    }\n\n    /**\n     * Returns brands array (similar to card) depending on showPaymentMethodItemImages\n     * This is used to show the brands in the PaymentMethodItem\n     * Requires brands icons to be loaded in the payment method\n     */\n    get brands(): { icon: any; name: string }[] {\n        if (this.props.showPaymentMethodItemImages) {\n            return this.props.issuers.map(brand => {\n                const brandIcon = brand.icon;\n                return { icon: brandIcon, name: brand.id };\n            });\n        }\n\n        return [];\n    }\n\n    render() {\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                {this.props.issuers.length > 0 ? (\n                    <SRPanelProvider srPanel={this.props.modules.srPanel}>\n                        <IssuerList\n                            ref={ref => {\n                                this.componentRef = ref;\n                            }}\n                            items={this.props.issuers}\n                            highlightedIds={this.props.highlightedIssuers}\n                            {...this.props}\n                            {...this.state}\n                            showImage={this.props.showImage}\n                            type={this.constructor['type']}\n                            onChange={this.setState}\n                            onSubmit={this.submit}\n                            payButton={this.payButton}\n                            contextualText={this.props.i18n.get('issuerList.selectField.contextualText')}\n                            onSubmitAnalytics={this.submitAnalytics}\n                        />\n                    </SRPanelProvider>\n                ) : (\n                    <RedirectButton\n                        showPayButton={this.props.showPayButton}\n                        name={this.props.name}\n                        {...this.props}\n                        onSubmit={this.submit}\n                        payButton={this.payButton}\n                        ref={ref => {\n                            this.componentRef = ref;\n                        }}\n                    />\n                )}\n            </CoreProvider>\n        );\n    }\n}\n\nexport default IssuerListContainer;\n"],"names":["IssuerListContainer","UIElement","formatProps","props","issuers","details","length","find","d","key","items","formatData","paymentMethod","type","this","issuer","state","data","isValid","brands","showPaymentMethodItemImages","map","brand","icon","name","id","render","h","CoreProvider","i18n","loadingContext","resources","SRPanelProvider","srPanel","modules","IssuerList","ref","componentRef","highlightedIds","highlightedIssuers","showImage","constructor","onChange","setState","onSubmit","submit","payButton","contextualText","get","onSubmitAnalytics","submitAnalytics","RedirectButton","showPayButton","checkout","super","getImage","getIssuerIcon","getIssuerImageUrl","item","FALLBACK_CONTEXT","defaultProps"],"mappings":"yeAWA,MAAMA,UAA4BC,EAwB9BC,WAAAA,CAAYC,GACR,MAAMC,EAAWD,EAAME,SAAWF,EAAME,QAAQC,SAAWH,EAAME,QAAQE,MAAKC,GAAe,WAAVA,EAAEC,OAAqB,CAAA,GAAIC,OAAUP,EAAMC,SAAW,GACzI,MAAO,IAAKD,EAAOC,UACvB,CAKAO,UAAAA,GACI,MAAO,CACHC,cAAe,CACXC,KAAMC,KAAKD,KACXE,OAAQD,KAAKE,OAAOC,MAAMF,QAGtC,CAKA,WAAIG,GACA,OAAkC,IAA9BJ,KAAKX,MAAMC,QAAQE,UAGdQ,KAAKE,OAAOE,OACzB,CAOA,UAAIC,GACA,OAAIL,KAAKX,MAAMiB,4BACJN,KAAKX,MAAMC,QAAQiB,KAAIC,IAEnB,CAAEC,KADSD,EAAMC,KACEC,KAAMF,EAAMG,OAIvC,EACX,CAEAC,MAAAA,GACI,OACIC,EAACC,EAAAA,CAAaC,KAAMf,KAAKX,MAAM0B,KAAMC,eAAgBhB,KAAKX,MAAM2B,eAAgBC,UAAWjB,KAAKiB,WAC3FjB,KAAKX,MAAMC,QAAQE,OAAS,EACzBqB,EAACK,EAAAA,CAAgBC,QAASnB,KAAKX,MAAM+B,QAAQD,SACzCN,EAACQ,EAAAA,CACGC,IAAKA,IACDtB,KAAKuB,aAAeD,CAAAA,EAExB1B,MAAOI,KAAKX,MAAMC,QAClBkC,eAAgBxB,KAAKX,MAAMoC,sBACvBzB,KAAKX,SACLW,KAAKE,MACTwB,UAAW1B,KAAKX,MAAMqC,UACtB3B,KAAMC,KAAK2B,YAAmB,KAC9BC,SAAU5B,KAAK6B,SACfC,SAAU9B,KAAK+B,OACfC,UAAWhC,KAAKgC,UAChBC,eAAgBjC,KAAKX,MAAM0B,KAAKmB,IAAI,yCACpCC,kBAAmBnC,KAAKoC,mBAIhCvB,EAACwB,EAAAA,CACGC,cAAetC,KAAKX,MAAMiD,cAC1B5B,KAAMV,KAAKX,MAAMqB,QACbV,KAAKX,MACTyC,SAAU9B,KAAK+B,OACfC,UAAWhC,KAAKgC,UAChBV,IAAKA,IACDtB,KAAKuB,aAAeD,CAAAA,IAM5C,CA9FAK,WAAAA,CAAYY,EAAiBlD,GACzBmD,MAAMD,EAAUlD,GAEhB,MAAMoD,EAAWpD,GAASW,KAAKiB,UAAUwB,SAASpD,GAElD,GAAIW,KAAKX,MAAMqC,UAAW,CACtB,MAAMgB,EAAgBC,EAAkB,CAAE3B,eAAgBhB,KAAKX,MAAM2B,gBAAkBhB,KAAK2B,iBAAqBc,GAEjHzC,KAAKX,MAAMC,QAAUU,KAAKX,MAAMC,QAAQiB,KAAIqC,IAAS,IAC9CA,EACHnC,KAAMiC,EAAcE,EAAKjC,OAEjC,CACJ,cArBgC,CAC5Be,WAAW,EACXpC,QAAS,GACTmC,mBAAoB,GACpBT,eAAgB6B,EAChBvC,6BAA6B,MALhBwC,oBADf5D"}