{"version":3,"file":"Pix.js","sources":["../../../../src/components/Pix/Pix.tsx"],"sourcesContent":["import { h } from 'preact';\nimport QRLoaderContainer from '../helpers/QRLoaderContainer/QRLoaderContainer';\nimport { CoreProvider } from '../../core/Context/CoreProvider';\nimport PixInput from './PixInput';\nimport { cleanCPFCNPJ } from '../internal/SocialSecurityNumberBrazil/utils';\nimport { PixElementData, PixConfiguration } from './types';\nimport { TxVariants } from '../tx-variants';\n\nclass PixElement extends QRLoaderContainer<PixConfiguration> {\n    public static type = TxVariants.pix;\n\n    public static defaultProps = {\n        personalDetailsRequired: false,\n        countdownTime: 15,\n        delay: 2000,\n        ...QRLoaderContainer.defaultProps\n    };\n\n    get isValid(): boolean {\n        return !!this.state.isValid;\n    }\n\n    formatProps(props): PixConfiguration {\n        return {\n            copyBtn: true,\n            introduction: 'pix.instructions',\n            ...super.formatProps(props)\n        };\n    }\n\n    formatData(): PixElementData {\n        const { data = {} } = this.state;\n        const { firstName, lastName, socialSecurityNumber = '' } = data;\n\n        return {\n            paymentMethod: {\n                type: this.props.type || this.constructor['type']\n            },\n            ...(firstName && lastName && { shopperName: { firstName, lastName } }),\n            ...(socialSecurityNumber && { socialSecurityNumber: cleanCPFCNPJ(socialSecurityNumber) })\n        };\n    }\n\n    render() {\n        if (this.props.paymentData) {\n            return this.renderQRCode();\n        }\n\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                <PixInput\n                    ref={ref => {\n                        this.componentRef = ref;\n                    }}\n                    {...this.props}\n                    showPayButton={this.props.showPayButton}\n                    personalDetailsRequired={this.props.personalDetailsRequired}\n                    name={this.displayName}\n                    onChange={this.setState}\n                    payButton={this.payButton}\n                />\n            </CoreProvider>\n        );\n    }\n}\n\nexport default PixElement;\n"],"names":["PixElement","QRLoaderContainer","isValid","this","state","formatProps","props","copyBtn","introduction","super","formatData","data","firstName","lastName","socialSecurityNumber","paymentMethod","type","constructor","shopperName","cleanCPFCNPJ","render","paymentData","renderQRCode","h","CoreProvider","i18n","loadingContext","resources","PixInput","ref","componentRef","showPayButton","personalDetailsRequired","name","displayName","onChange","setState","payButton","_define_property","TxVariants","pix","defaultProps","countdownTime","delay"],"mappings":"oeAQA,MAAMA,UAAmBC,EAUrB,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAEAG,WAAAA,CAAYC,GACR,MAAO,CACHC,SAAS,EACTC,aAAc,sBACXC,MAAMJ,YAAYC,GAE7B,CAEAI,UAAAA,GACI,MAAMC,KAAEA,EAAO,IAAOR,KAAKC,OACrBQ,UAAEA,EAASC,SAAEA,EAAQC,qBAAEA,EAAuB,IAAOH,EAE3D,MAAO,CACHI,cAAe,CACXC,KAAMb,KAAKG,MAAMU,MAAQb,KAAKc,YAAmB,SAEjDL,GAAaC,GAAY,CAAEK,YAAa,CAAEN,YAAWC,gBACrDC,GAAwB,CAAEA,qBAAsBK,EAAaL,IAEzE,CAEAM,MAAAA,GACI,OAAIjB,KAAKG,MAAMe,YACJlB,KAAKmB,eAIZC,EAACC,EAAAA,CAAaC,KAAMtB,KAAKG,MAAMmB,KAAMC,eAAgBvB,KAAKG,MAAMoB,eAAgBC,UAAWxB,KAAKwB,WAC5FJ,EAACK,EAAAA,CACGC,IAAKA,IACD1B,KAAK2B,aAAeD,CAAAA,KAEpB1B,KAAKG,MACTyB,cAAe5B,KAAKG,MAAMyB,cAC1BC,wBAAyB7B,KAAKG,MAAM0B,wBACpCC,KAAM9B,KAAK+B,YACXC,SAAUhC,KAAKiC,SACfC,UAAWlC,KAAKkC,YAIhC,EAtDAC,EADEtC,EACYgB,OAAOuB,EAAWC,KAEhCF,EAHEtC,EAGYyC,eAAe,CACzBT,yBAAyB,EACzBU,cAAe,GACfC,MAAO,OACJ1C,EAAkBwC"}