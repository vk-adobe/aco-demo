{"version":3,"file":"OrderButton.js","sources":["../../../../../src/components/AmazonPay/components/OrderButton.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { useCoreContext } from '../../../core/Context/CoreProvider';\nimport Button from '../../internal/Button';\nimport { updateAmazonCheckoutSession } from '../services';\nimport { OrderButtonProps, UpdateAmazonCheckoutSessionRequest } from '../types';\n\nexport default function OrderButton(props: OrderButtonProps) {\n    const { i18n, loadingContext } = useCoreContext();\n\n    this.createOrder = () => {\n        const { amazonCheckoutSessionId, amount, clientKey, chargePermissionType, publicKeyId, region, recurringMetadata, returnUrl } = props;\n        const request: UpdateAmazonCheckoutSessionRequest = {\n            amount,\n            chargePermissionType,\n            checkoutResultReturnUrl: returnUrl,\n            checkoutSessionId: amazonCheckoutSessionId,\n            publicKeyId,\n            recurringMetadata,\n            region\n        };\n\n        updateAmazonCheckoutSession(loadingContext, clientKey, request)\n            .then(response => {\n                if (!response?.action?.type) return console.error(response.errorMessage || 'Could not get the AmazonPay URL');\n                if (response.action.type === 'redirect') window.location.assign(response.action.url);\n            })\n            .catch(error => {\n                if (props.onError) props.onError(error, this.componentRef);\n            });\n    };\n\n    return <Button classNameModifiers={['standalone', 'pay']} label={i18n.get('confirmPurchase')} onClick={this.createOrder} />;\n}\n"],"names":["OrderButton","props","i18n","loadingContext","useCoreContext","this","createOrder","amazonCheckoutSessionId","amount","clientKey","chargePermissionType","publicKeyId","region","recurringMetadata","returnUrl","updateAmazonCheckoutSession","checkoutResultReturnUrl","checkoutSessionId","then","response","action","type","console","error","errorMessage","window","location","assign","url","catch","onError","componentRef","h","Button","classNameModifiers","label","get","onClick"],"mappings":"2PAMe,SAASA,EAAYC,GAChC,MAAMC,KAAEA,EAAIC,eAAEA,GAAmBC,IAwBjC,OAtBAC,KAAKC,YAAc,KACf,MAAMC,wBAAEA,EAAuBC,OAAEA,EAAMC,UAAEA,EAASC,qBAAEA,EAAoBC,YAAEA,EAAWC,OAAEA,EAAMC,kBAAEA,EAAiBC,UAAEA,GAAcb,EAWhIc,EAA4BZ,EAAgBM,EAVQ,CAChDD,SACAE,uBACAM,wBAAyBF,EACzBG,kBAAmBV,EACnBI,cACAE,oBACAD,WAICM,MAAKC,IACF,IAAKA,GAAUC,QAAQC,KAAM,OAAOC,QAAQC,MAAMJ,EAASK,cAAgB,mCAC9C,aAAzBL,EAASC,OAAOC,MAAqBI,OAAOC,SAASC,OAAOR,EAASC,OAAOQ,IAAG,IAEtFC,OAAMN,IACCtB,EAAM6B,SAAS7B,EAAM6B,QAAQP,EAAOlB,KAAK0B,aAAY,GAC7D,EAGDC,EAACC,EAAAA,CAAOC,mBAAoB,CAAC,aAAc,OAAQC,MAAOjC,EAAKkC,IAAI,mBAAoBC,QAAShC,KAAKC,aAChH"}