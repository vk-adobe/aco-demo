import{createElement as n}from"../../../external/preact/dist/preact.js";import{useState as e,useRef as o,useEffect as t}from"../../../external/preact/hooks/dist/hooks.js";import a from"../../internal/Spinner/Spinner.js";import{getAmazonPayUrl as r}from"../utils.js";import i from"./AmazonPayButton.js";import s from"./ChangePaymentDetailsButton.js";import u from"./OrderButton.js";import c from"./SignOutButton.js";import m from"../../../utils/Script.js";function d(d){const[p,h]=e("pending"),l=o(null),y=o(null),f=()=>{h("ready")};return this.getSubmitFunction=()=>l.current&&l.current.initCheckout?()=>l.current.initCheckout():y.current&&y.current.createOrder?()=>y.current.createOrder():void 0,t((()=>{const n=r(d.configuration.region),e=new m(n);return window.amazon?f():e.load().then(f),()=>{e.remove()}}),[]),"pending"===p?n("div",{className:"adyen-checkout__amazonpay"},n("div",{className:"adyen-checkout__amazonpay__status adyen-checkout__amazonpay__status--pending"},n(a,null))):d.showSignOutButton?n("div",{className:"adyen-checkout__amazonpay"},n(c,{amazonRef:window.amazon,onSignOut:d.onSignOut})):d.amazonCheckoutSessionId?n("div",{className:"adyen-checkout__amazonpay"},d.showOrderButton&&n(u,{amazonCheckoutSessionId:d.amazonCheckoutSessionId,amount:d.amount,chargePermissionType:d.chargePermissionType,recurringMetadata:d.recurringMetadata,clientKey:d.clientKey,onError:d.onError,publicKeyId:d.configuration?.publicKeyId,region:d.configuration?.region,returnUrl:d.returnUrl,ref:y}),d.showChangePaymentDetailsButton&&n(s,{amazonCheckoutSessionId:d.amazonCheckoutSessionId,amazonRef:window.amazon})):n("div",{className:"adyen-checkout__amazonpay"},n(i,{...d,showPayButton:this.props.showPayButton,amazonRef:window.amazon,ref:l}))}export{d as default};
//# sourceMappingURL=AmazonPayComponent.js.map
