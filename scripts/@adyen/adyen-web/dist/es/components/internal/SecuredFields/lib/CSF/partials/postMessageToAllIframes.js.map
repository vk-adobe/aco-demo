{"version":3,"file":"postMessageToAllIframes.js","sources":["../../../../../../../../src/components/internal/SecuredFields/lib/CSF/partials/postMessageToAllIframes.ts"],"sourcesContent":["import postMessageToIframe from '../utils/iframes/postMessageToIframe';\nimport getIframeContentWin from '../utils/iframes/getIframeContentWin';\nimport { CSFThisObject } from '../types';\nimport { SFFieldType } from '../../types';\n\n/**\n * UTIL TO BROADCAST TO ALL IFRAMES AT ONCE\n * Adds correct txVariant, fieldType and numKey for each iframe\n *\n * @param csfState - comes from initial, partial, implementation\n * @param csfConfig  - comes from initial, partial, implementation\n *\n * @param pDataObj -\n */\nexport function postMessageToAllIframes({ csfState, csfConfig }: CSFThisObject, pDataObj: object): boolean {\n    const objKeys: string[] = Object.keys(pDataObj || {});\n    if (!objKeys.length) {\n        // pDataObj is an object with the 'special' key(s) that represent the reason for making this postMessage\n        // without it/them there is no reason to postMessage\n        return false;\n    }\n\n    const securedFieldKeys: string[] = Object.keys(csfState.securedFields);\n    securedFieldKeys.forEach((pFieldType: SFFieldType) => {\n        const dataObj: object = {\n            txVariant: csfState.type,\n            fieldType: pFieldType,\n            numKey: csfState.securedFields[pFieldType].numKey\n        };\n\n        // Copy across 'special' properties from passed data object\n        objKeys.forEach(pKey => {\n            dataObj[pKey] = pDataObj[pKey];\n        });\n\n        postMessageToIframe(dataObj, getIframeContentWin(csfState, pFieldType), csfConfig.loadingContext);\n    });\n    return true;\n}\n"],"names":["postMessageToAllIframes","csfState","csfConfig","pDataObj","objKeys","Object","keys","length","securedFields","forEach","pFieldType","dataObj","txVariant","type","fieldType","numKey","pKey","postMessageToIframe","getIframeContentWin","loadingContext"],"mappings":"8GAcO,SAASA,GAAwBC,SAAEA,EAAQC,UAAEA,GAA4BC,GAC5E,MAAMC,EAAoBC,OAAOC,KAAKH,GAAY,CAAA,GAClD,IAAKC,EAAQG,OAGT,OAAO,EAkBX,OAfmCF,OAAOC,KAAKL,EAASO,eACvCC,SAASC,IACtB,MAAMC,EAAkB,CACpBC,UAAWX,EAASY,KACpBC,UAAWJ,EACXK,OAAQd,EAASO,cAAcE,GAAYK,QAI/CX,EAAQK,SAAQO,IACZL,EAAQK,GAAQb,EAASa,EAAK,IAGlCC,EAAoBN,EAASO,EAAoBjB,EAAUS,GAAaR,EAAUiB,eAAc,KAE7F,CACX"}