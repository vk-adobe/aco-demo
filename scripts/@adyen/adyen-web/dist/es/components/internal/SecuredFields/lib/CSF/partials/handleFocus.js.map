{"version":3,"file":"handleFocus.js","sources":["../../../../../../../../src/components/internal/SecuredFields/lib/CSF/partials/handleFocus.ts"],"sourcesContent":["import { SFFeedbackObj, CardFocusData } from '../../types';\nimport ua from '../utils/userAgent';\nimport { CSFThisObject } from '../types';\n\n/**\n * Call focus callback and store which field currently has focus\n *\n * @param csfState - comes from initial, partial, implementation\n * @param csfProps - comes from initial, partial, implementation\n * @param csfCallbacks - comes from initial, partial, implementation\n *\n * @param pFeedbackObj -\n */\nexport function handleFocus({ csfState, csfProps, csfCallbacks }: CSFThisObject, handleIOSTouchEvents, pFeedbackObj: SFFeedbackObj): void {\n    const feedbackObj: SFFeedbackObj = { ...pFeedbackObj };\n\n    delete feedbackObj.numKey;\n\n    feedbackObj.rootNode = csfProps.rootNode as HTMLElement;\n    feedbackObj.type = csfState.type;\n\n    // Store which field has focus\n    const focusString: string = feedbackObj.fieldType;\n\n    // FOCUS EVENT - store who has focus, if it differs to the current value\n    if (feedbackObj.focus) {\n        if (csfState.currentFocusObject !== focusString) {\n            csfState.currentFocusObject = focusString;\n\n            // If iOS detected AND we don't have a (touchend) listener\n            if (ua.__IS_IOS && !csfState.registerFieldForIos) {\n                handleIOSTouchEvents();\n            }\n        }\n    } else {\n        // BLUR EVENT - remove stored focus\n        const focusObjectMatches: boolean = csfState.currentFocusObject === focusString;\n        if (focusObjectMatches) {\n            csfState.currentFocusObject = null;\n        }\n    }\n\n    // Call callback (SecuredFieldsProviderHandlers > onFocus)\n    const callbackObj: CardFocusData = feedbackObj as CardFocusData;\n    callbackObj.currentFocusObject = csfState.currentFocusObject;\n    csfCallbacks.onFocus(callbackObj);\n}\n"],"names":["handleFocus","csfState","csfProps","csfCallbacks","handleIOSTouchEvents","pFeedbackObj","feedbackObj","numKey","rootNode","type","focusString","fieldType","focus","currentFocusObject","ua","__IS_IOS","registerFieldForIos","callbackObj","onFocus"],"mappings":"qCAaO,SAASA,GAAYC,SAAEA,EAAQC,SAAEA,EAAQC,aAAEA,GAA+BC,EAAsBC,GACnG,MAAMC,EAA6B,IAAKD,UAEjCC,EAAYC,OAEnBD,EAAYE,SAAWN,EAASM,SAChCF,EAAYG,KAAOR,EAASQ,KAG5B,MAAMC,EAAsBJ,EAAYK,UAGxC,GAAIL,EAAYM,MACRX,EAASY,qBAAuBH,IAChCT,EAASY,mBAAqBH,EAG1BI,EAAGC,WAAad,EAASe,qBACzBZ,SAGL,CAEiCH,EAASY,qBAAuBH,IAEhET,EAASY,mBAAqB,KAEtC,CAGA,MAAMI,EAA6BX,EACnCW,EAAYJ,mBAAqBZ,EAASY,mBAC1CV,EAAae,QAAQD,EACzB"}