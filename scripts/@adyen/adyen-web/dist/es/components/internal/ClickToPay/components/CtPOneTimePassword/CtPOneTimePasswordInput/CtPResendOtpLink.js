import{createElement as e}from"../../../../../../external/preact/dist/preact.js";import{useState as t,useEffect as o,useCallback as r}from"../../../../../../external/preact/hooks/dist/hooks.js";import s from"../../../context/useClickToPayContext.js";import n from"../../../../../../_virtual/index.js";import{useCoreContext as c}from"../../../../../../core/Context/CoreProvider.js";import a from"../../../../Icon/Icon.js";import{isSrciError as i}from"../../../services/utils.js";import{PREFIX as d}from"../../../../Icon/constants.js";import l from"../../../../Button/Button.js";const p=({onError:p,onResendCode:m,disabled:u})=>{const[f,k]=t(null),[h,j]=t(!1),{i18n:C}=c(),{startIdentityValidation:v}=s();o((()=>{let e=null;return f>0&&(e=setTimeout((()=>k(f-1)),1e3)),()=>clearTimeout(e)}),[f]),o((()=>{let e=null;return h&&(e=setTimeout((()=>{j(!1),k(60)}),2e3)),()=>clearTimeout(e)}),[h]);const y=r((async e=>{e.preventDefault();try{m(),j(!0),await v()}catch(e){if(k(0),j(!1),!i(e))return void console.error(e);p(e.reason)}}),[v,p,m]);return h?e("div",{className:"adyen-checkout-ctp__otp-resend-code--confirmation"},C.get("ctp.otp.codeResent"),e(a,{type:`${d}checkmark`,height:14,width:14})):f>0?e("div",{className:"adyen-checkout-ctp__otp-resend-code--disabled"},C.get("ctp.otp.resendCode")," -"," ",e("span",{className:"adyen-checkout-ctp__otp-resend-code-counter"}," ",f>0&&`${f}s`," ")):e(l,{classNameModifiers:[n("otp-resend-code",{"otp-resend-code--disabled":u})],onClick:y,variant:"link",inline:!0,disabled:u},C.get("ctp.otp.resendCode"))};export{p as default};
//# sourceMappingURL=CtPResendOtpLink.js.map
