import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as a,useCallback as o,useEffect as n}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../VpaInput/VpaInput.js";import i from"../../../../core/Context/useImage.js";import s from"./useUpiSegmentedControlOptions.js";import{A11Y as l}from"./constants.js";import d from"../../../internal/SegmentedControl/SegmentedControl.js";import p from"../../../internal/ContentSeparator/ContentSeparator.js";import u from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as m}from"../../../../core/Context/CoreProvider.js";function c({defaultMode:c,onChange:g,onUpdateMode:I,payButton:C,showPayButton:b,apps:f=[]}){const{i18n:h}=m(),y=i(),[v,A]=a("ready"),[S,j]=a("qrCode"===c),[V,N]=a(c),[P,k]=a(""),[x,q]=a(null),[B,E]=a(null),[T,U]=a(null),[M,Q]=a(null),R=s(f,V);this.setStatus=e=>{A(e)},this.showValidation=()=>{x?.validateInput()};const w=o((e=>{q(e)}),[]),F=o((e=>{N(e),I(e)}),[I]),H=o((e=>{e?.id!==B?.id&&(E(e),j(!0))}),[B]),L=o((({data:{virtualPaymentAddress:e},errors:t,valid:a,isValid:o})=>{k(e),Q(t),U(a),j(o)}),[]);return n((()=>{g("qrCode"!==V?{data:{...P&&{virtualPaymentAddress:P},...B&&{app:B}},errors:M,valid:T,isValid:S}:{data:{},valid:{},errors:{},isValid:!0})}),[P,B,M,T,S,V]),e(t,null,e("p",{className:"adyen-checkout_upi-mode-selection-text"},h.get("upi.modeSelection")),e(d,{onChange:F,selectedValue:V,disabled:"loading"===v,classNameModifiers:["upi-margin-bottom"],options:R}),e(p,{label:h.get("upi.completePayment")}),"intent"===V&&e("div",{id:l.AreaId.INTENT,"aria-labelledby":l.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent",role:"region"},e(u,{disabled:"loading"===v,apps:f,selectedAppId:B?.id,onAppSelect:H,onVpaInputChange:L,onSetInputHandlers:w}),b&&C({label:h.get("continue"),status:v,disabled:null==B})),"vpa"===V&&e("div",{id:l.AreaId.VPA,"aria-labelledby":l.ButtonId.VPA,className:"adyen-checkout-upi-area-vpa",role:"region"},e(r,{disabled:"loading"===v,onChange:g,onSetInputHandlers:w}),b&&C({label:h.get("continue"),status:v})),"qrCode"===V&&e("div",{id:l.AreaId.QR,"aria-labelledby":l.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code",role:"region"},b&&C({label:h.get("generateQRCode"),icon:y({imageFolder:"components/"})("qr"),status:v})))}export{c as default};
//# sourceMappingURL=UPIComponent.js.map
