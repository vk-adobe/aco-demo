import{createElement as e}from"../../../../external/preact/dist/preact.js";import{useRef as r,useState as s,useEffect as i}from"../../../../external/preact/hooks/dist/hooks.js";import a from"../../../internal/Address/Address.js";import{boletoValidationRules as t}from"./validate.js";import{boletoFormatters as l}from"./utils.js";import o from"../../../internal/SendCopyToEmail/SendCopyToEmail.js";import{useCoreContext as d}from"../../../../core/Context/CoreProvider.js";import n from"../../../../utils/useForm/useForm.js";import{BrazilPersonalDetail as u}from"../../../internal/SocialSecurityNumberBrazil/BrazilPersonalDetail.js";import m from"../../../internal/FormInstruction/FormInstruction.js";function p(p){const{i18n:c}=d(),b=r(null),{handleChangeFor:g,triggerValidation:h,setSchema:f,setData:A,setValid:R,setErrors:q,data:E,valid:y,errors:C,isValid:j}=n({schema:["firstName","lastName","socialSecurityNumber","billingAddress","shopperEmail"],defaultData:p.data,rules:t,formatters:l}),[N,D]=s(!1);i((()=>{const e=[...p.personalDetailsRequired?["firstName","lastName","socialSecurityNumber"]:[],...p.billingAddressRequired?["billingAddress"]:[],...N?["shopperEmail"]:[]];f(e)}),[N,p.personalDetailsRequired,p.billingAddressRequired]);const[S,v]=s("ready"),B=r({});Object.keys(B.current).length||p.setComponentRef?.(B.current),B.current.showValidation=()=>{h(),p.billingAddressRequired&&b.current.showValidation()},B.current.setStatus=v,i((()=>{const e=!p.billingAddressRequired||Boolean(y.billingAddress);p.onChange({data:E,valid:y,errors:C,isValid:j&&e})}),[E,y,C]);const w=[...p.personalDetailsRequired||p.billingAddressRequired||p.showEmailAddress?[]:["standalone"]],F=p.personalDetailsRequired||p.billingAddressRequired;return e("div",{className:"adyen-checkout__boleto-input__field"},F&&e(m,null),p.personalDetailsRequired&&e(u,{i18n:c,data:E,handleChangeFor:g,errors:C,valid:y}),p.billingAddressRequired&&e(a,{allowedCountries:["BR"],label:"billingAddress",data:{...p.data.billingAddress,country:"BR"},onChange:e=>{A("billingAddress",e.data),R("billingAddress",e.isValid),q("billingAddress",e.errors)},requiredFields:["country","street","houseNumberOrName","postalCode","city","stateOrProvince"],setComponentRef:e=>{b.current=e}}),p.showEmailAddress&&e(o,{value:E.shopperEmail,errors:C.shopperEmail,onToggle:()=>D(!N),onInput:g("shopperEmail","input"),onBlur:g("shopperEmail","blur")}),p.showPayButton&&p.payButton({status:S,label:c.get("boletobancario.btnLabel"),classNameModifiers:w}))}p.defaultProps={data:{},showEmailAddress:!0,personalDetailsRequired:!0,billingAddressRequired:!0};export{p as default};
//# sourceMappingURL=BoletoInput.js.map
