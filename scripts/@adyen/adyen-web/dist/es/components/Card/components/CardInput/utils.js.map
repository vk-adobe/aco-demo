{"version":3,"file":"utils.js","sources":["../../../../../../src/components/Card/components/CardInput/utils.ts"],"sourcesContent":["import Language from '../../../../language/Language';\nimport { AddressModeOptions, CardInputProps, LayoutObj } from './types';\nimport {\n    CREDIT_CARD,\n    CREDIT_CARD_NAME_BOTTOM,\n    CREDIT_CARD_NAME_TOP,\n    KCP_CARD,\n    KCP_CARD_NAME_BOTTOM,\n    KCP_CARD_NAME_TOP,\n    SSN_CARD,\n    SSN_CARD_NAME_BOTTOM,\n    SSN_CARD_NAME_TOP\n} from './layouts';\nimport { AddressSpecifications, StringObject } from '../../../internal/Address/types';\nimport { PARTIAL_ADDRESS_SCHEMA } from '../../../internal/Address/constants';\nimport { InstallmentsObj } from './components/Installments/Installments';\nimport { SFPProps } from '../../../internal/SecuredFields/SFP/types';\nimport { BRAND_READABLE_NAME_MAP, DEFAULT_CARD_GROUP_TYPES } from '../../../internal/SecuredFields/lib/constants';\nimport useImage, { UseImageHookType } from '../../../../core/Context/useImage';\nimport { SF_ErrorCodes } from '../../../../core/Errors/constants';\nimport { CardBrandsConfiguration, CardConfiguration, DualBrandSelectElement } from '../../types';\nimport { CardConfigData } from '../../../../core/Analytics/types';\nimport { DEFAULT_CHALLENGE_WINDOW_SIZE } from '../../../ThreeDS2/constants';\nimport CardInputDefaultProps from './defaultProps';\nimport { isConfigurationValid as isFastlaneComponentConfigValid } from '../Fastlane/utils/validate-configuration';\nimport { notFalsy } from '../../../../utils/commonUtils';\n\nexport const getCardImageUrl = (brand: string, getImage: UseImageHookType): string => {\n    const imageOptions = {\n        type: brand === 'card' ? 'nocard' : brand || 'nocard',\n        extension: 'svg'\n    };\n\n    return getImage(imageOptions)(brand);\n};\n\n/**\n * Verifies that installment object is valid to send to the Backend.\n * Valid means that it has 'revolving' plan set, or the number of installments is bigger than one\n */\nexport const hasValidInstallmentsObject = (installments?: InstallmentsObj) => {\n    return installments?.plan === 'revolving' || installments?.value > 1;\n};\n\nexport const getLayout = ({\n    props,\n    showKCP,\n    showBrazilianSSN,\n    countrySpecificSchemas = null,\n    billingAddressRequiredFields = null\n}: LayoutObj): string[] => {\n    let layout = CREDIT_CARD;\n    const hasRequiredHolderName = props.hasHolderName && props.holderNameRequired;\n\n    if (hasRequiredHolderName) {\n        layout = props.positionHolderNameOnTop ? CREDIT_CARD_NAME_TOP : CREDIT_CARD_NAME_BOTTOM;\n    }\n\n    if (showKCP) {\n        layout = KCP_CARD;\n        if (hasRequiredHolderName) {\n            layout = props.positionHolderNameOnTop ? KCP_CARD_NAME_TOP : KCP_CARD_NAME_BOTTOM;\n        }\n    }\n\n    if (showBrazilianSSN) {\n        layout = SSN_CARD;\n        if (hasRequiredHolderName) {\n            layout = props.positionHolderNameOnTop ? SSN_CARD_NAME_TOP : SSN_CARD_NAME_BOTTOM;\n        }\n    }\n\n    // w. Billing address\n    if (countrySpecificSchemas) {\n        // Flatten array and remove any numbers that describe how fields should be aligned\n        const countrySpecificSchemasFlat: string[] = countrySpecificSchemas['flat'](2).filter(item => typeof item !== 'number') as string[];\n\n        let countryBasedAddressLayout = countrySpecificSchemasFlat;\n\n        if (billingAddressRequiredFields) {\n            // Get intersection of the 2 arrays\n            countryBasedAddressLayout = countrySpecificSchemasFlat.filter(x => billingAddressRequiredFields.includes(x));\n        }\n\n        layout = CREDIT_CARD.concat(countryBasedAddressLayout);\n        if (hasRequiredHolderName) {\n            layout = props.positionHolderNameOnTop\n                ? CREDIT_CARD_NAME_TOP.concat(countryBasedAddressLayout)\n                : CREDIT_CARD_NAME_BOTTOM.concat(countryBasedAddressLayout);\n        }\n        // TODO we are not yet creating a layout for AVS + SSN field (w. or w/o holderName) - is AVS + SSN a real world scenario?\n    }\n    return layout;\n};\n\n/**\n * Lookup service to map local (CardInput) field refs to a key, possibly region specific, by which to retrieve the translation\n */\nexport const mapFieldKey = (key: string, i18n: Language, countrySpecificLabels: StringObject): string => {\n    // console.log('### utils::mapFieldKey:: key', key);\n    switch (key) {\n        case 'socialSecurityNumber':\n            return i18n.get(`boleto.${key}`);\n        // Address related - if we have a country specific key for the field - use that to get the translation\n        case 'street':\n        case 'houseNumberOrName':\n        case 'postalCode':\n        case 'stateOrProvince':\n        case 'city':\n        case 'country':\n            return countrySpecificLabels?.[key] ? i18n.get(countrySpecificLabels?.[key]) : i18n.get(key);\n        // We know that the translated error messages do contain a reference to the field they refer to, so we won't need to map them (currently applies mostly to SecuredFields related errors)\n        default:\n            return null;\n    }\n};\n\nexport const extractPropsForCardFields = (props: CardInputProps) => {\n    return {\n        // Extract props for CardFieldsWrapper & StoredCardFieldsWrapper(just needs amount, hasCVC, installmentOptions)\n        amount: props.amount,\n        billingAddressRequired: props.billingAddressRequired,\n        billingAddressRequiredFields: props.billingAddressRequiredFields,\n        billingAddressAllowedCountries: props.billingAddressAllowedCountries,\n        brandsConfiguration: props.brandsConfiguration,\n        showStoreDetailsCheckbox: props.showStoreDetailsCheckbox,\n        hasCVC: props.hasCVC,\n        hasHolderName: props.hasHolderName,\n        holderNameRequired: props.holderNameRequired,\n        installmentOptions: props.installmentOptions,\n        placeholders: props.placeholders,\n        positionHolderNameOnTop: props.positionHolderNameOnTop,\n        // Extract props for CardFields > CardNumber\n        showBrandIcon: props.showBrandIcon,\n        showContextualElement: props.showContextualElement,\n        // Extract props for StoredCardFields\n        lastFour: props.lastFour,\n        expiryMonth: props.expiryMonth,\n        expiryYear: props.expiryYear,\n        disclaimerMessage: props.disclaimerMessage\n    };\n};\n\nexport const extractPropsForSFP = (props: CardInputProps) => {\n    return {\n        autoFocus: props.autoFocus,\n        brands: props.brands,\n        brandsConfiguration: props.brandsConfiguration,\n        clientKey: props.clientKey,\n        countryCode: props.countryCode,\n        forceCompat: props.forceCompat,\n        i18n: props.i18n,\n        implementationType: props.implementationType,\n        keypadFix: props.keypadFix,\n        legacyInputMode: props.legacyInputMode,\n        loadingContext: props.loadingContext,\n        maskSecurityCode: props.maskSecurityCode,\n        exposeExpiryDate: props.exposeExpiryDate,\n        minimumExpiryDate: props.minimumExpiryDate,\n        onAdditionalSFConfig: props.onAdditionalSFConfig,\n        onAdditionalSFRemoved: props.onAdditionalSFRemoved,\n        onAllValid: props.onAllValid,\n        onAutoComplete: props.onAutoComplete,\n        onBinValue: props.onBinValue,\n        onConfigSuccess: props.onConfigSuccess,\n        handleKeyPress: props.handleKeyPress,\n        onError: props.onError,\n        onFieldValid: props.onFieldValid,\n        onLoad: props.onLoad,\n        placeholders: props.placeholders,\n        resources: props.resources,\n        showContextualElement: props.showContextualElement,\n        showWarnings: props.showWarnings,\n        trimTrailingSeparator: props.trimTrailingSeparator\n    } as SFPProps; // Can't set as return type on fn or it will complain about missing, mandatory, props\n};\n\nexport const handlePartialAddressMode = (addressMode: AddressModeOptions): AddressSpecifications | null => {\n    return addressMode == AddressModeOptions.partial ? PARTIAL_ADDRESS_SCHEMA : null;\n};\n\n// Almost all errors are blur based, but some SF ones are not i.e. when an unsupported card is entered or the expiry date is out of range\nexport function lookupBlurBasedErrors(errorCode) {\n    // If it's NOT one of these, then it's a blur based error\n    return ![\n        SF_ErrorCodes.ERROR_MSG_UNSUPPORTED_CARD_ENTERED,\n        SF_ErrorCodes.ERROR_MSG_CARD_TOO_OLD,\n        SF_ErrorCodes.ERROR_MSG_CARD_TOO_FAR_IN_FUTURE,\n        SF_ErrorCodes.ERROR_MSG_CARD_EXPIRES_TOO_SOON\n    ].includes(errorCode);\n}\n\nexport function getFullBrandName(brand) {\n    return BRAND_READABLE_NAME_MAP[brand] ?? brand;\n}\n\nexport const getCardConfigData = (cardProps: CardConfiguration): CardConfigData => {\n    const MAX_LENGTH = 128;\n\n    // Extract props from cardProps - mostly setting a default value, if prop not found\n    const {\n        autoFocus,\n        billingAddressAllowedCountries,\n        billingAddressMode,\n        billingAddressRequired,\n        billingAddressRequiredFields,\n        brands = DEFAULT_CARD_GROUP_TYPES,\n        brandsConfiguration,\n        challengeWindowSize = DEFAULT_CHALLENGE_WINDOW_SIZE,\n        configuration,\n        countryCode,\n        data,\n        disclaimerMessage,\n        disableIOSArrowKeys,\n        doBinLookup,\n        enableStoreDetails,\n        exposeExpiryDate,\n        fastlaneConfiguration,\n        forceCompat,\n        hasHolderName,\n        hideCVC,\n        holderNameRequired,\n        installmentOptions,\n        keypadFix,\n        legacyInputMode,\n        maskSecurityCode,\n        minimumExpiryDate,\n        name, // = 'none',\n        placeholders,\n        positionHolderNameOnTop,\n        showBrandIcon,\n        showInstallmentAmounts,\n        showPayButton = false, // hard coded default\n        styles,\n        onAllValid,\n        onBinLookup,\n        onBinValue,\n        onBlur,\n        onBrand,\n        onConfigSuccess,\n        onEnterKeyPressed,\n        onFieldValid,\n        onFocus,\n        onLoad\n    } = cardProps;\n\n    const dataString = JSON.stringify(CardInputDefaultProps.data);\n\n    const srPanelEnabled = cardProps.modules?.srPanel?.enabled;\n    const srPanelMoveFocus = cardProps.modules?.srPanel?.moveFocus;\n\n    const riskEnabled = cardProps.modules?.risk?.enabled;\n\n    const isFastlaneConfigValid = isFastlaneComponentConfigValid(fastlaneConfiguration);\n\n    const billingAddressModeValue = cardProps.onAddressLookup ? 'lookup' : billingAddressMode;\n\n    let showKCPType: 'none' | 'auto' | 'atStart' = 'none';\n    if (configuration?.koreanAuthenticationRequired === true) {\n        showKCPType = countryCode?.toLowerCase() === 'kr' ? 'atStart' : 'auto';\n    }\n\n    const configData: CardConfigData = {\n        autoFocus,\n        ...(billingAddressAllowedCountries?.length > 0 && {\n            billingAddressAllowedCountries: billingAddressAllowedCountries.toString().substring(0, MAX_LENGTH)\n        }),\n        billingAddressMode: billingAddressModeValue,\n        billingAddressRequired,\n        billingAddressRequiredFields: billingAddressRequiredFields?.toString()?.substring(0, MAX_LENGTH),\n        // Probably just for development - in real life we wouldn't expect the number of supported brands to push the endpoint limit on 128 chars\n        brands: brands?.toString()?.substring(0, MAX_LENGTH),\n        challengeWindowSize,\n        disableIOSArrowKeys,\n        doBinLookup,\n        enableStoreDetails,\n        exposeExpiryDate,\n        forceCompat,\n        hasBrandsConfiguration: notFalsy(brandsConfiguration),\n        hasData: data && JSON.stringify(cardProps.data) !== dataString,\n        hasDisclaimerMessage: !!disclaimerMessage,\n        hasHolderName,\n        hasInstallmentOptions: notFalsy(installmentOptions),\n        hasPlaceholders: notFalsy(placeholders), // has merchant defined placeholders\n        hasStylesConfigured: notFalsy(styles),\n        hideCVC,\n        holderNameRequired,\n        keypadFix,\n        legacyInputMode,\n        maskSecurityCode,\n        minimumExpiryDate: !!minimumExpiryDate, // Potentially, in the future, we can send the actual string value\n        name,\n        positionHolderNameOnTop,\n        riskEnabled,\n        showBrandIcon,\n        showInstallmentAmounts: !!showInstallmentAmounts,\n        showKCPType,\n        showPayButton,\n        socialSecurityNumberMode: configuration?.socialSecurityNumberMode,\n        srPanelEnabled,\n        srPanelMoveFocus,\n        /** callbacks */\n        // We need to detect if the merchant themselves has defined these, not if we've set them as a default\n        hasOnAllValid: onAllValid !== CardInputDefaultProps.onAllValid,\n        hasOnBinValue: onBinValue !== CardInputDefaultProps.onBinValue,\n        hasOnBlur: onBlur !== CardInputDefaultProps.onBlur,\n        hasOnBrand: onBrand !== CardInputDefaultProps.onBrand,\n        hasOnConfigSuccess: onConfigSuccess !== CardInputDefaultProps.onConfigSuccess,\n        hasOnFieldValid: onFieldValid !== CardInputDefaultProps.onFieldValid,\n        hasOnFocus: onFocus !== CardInputDefaultProps.onFocus,\n        hasOnLoad: onLoad !== CardInputDefaultProps.onLoad,\n        // Card level props\n        hasOnBinLookup: !!onBinLookup,\n        hasOnEnterKeyPressed: !!onEnterKeyPressed,\n        /**\n         * Fastlane\n         */\n        ...(isFastlaneConfigValid && {\n            hasFastlaneConfigured: true,\n            isFastlaneConsentDefaultOn: fastlaneConfiguration.defaultToggleState\n        })\n    };\n\n    return configData;\n};\n\nexport const mapDualBrandButtons = (dualBrandSelectElements: DualBrandSelectElement[], brandsConfiguration: CardBrandsConfiguration): any => {\n    return dualBrandSelectElements.map(item => {\n        const brand = item.id;\n        const getImage = useImage();\n        const imageName = brand === 'card' ? 'nocard' : brand;\n        const imageURL = brandsConfiguration[brand]?.icon ?? getCardImageUrl(imageName, getImage);\n\n        // TODO - check below if we have to still generate altName through the mapping function or whether it just\n        //  corresponds to item.brandObject.localeBrand\n        return {\n            id: item.id,\n            name: item.brandObject.localeBrand || item.brandObject.brand,\n            imageURL,\n            altName: getFullBrandName(brand)\n        };\n    });\n};\n"],"names":["getCardImageUrl","brand","getImage","type","extension","hasValidInstallmentsObject","installments","plan","value","getLayout","props","showKCP","showBrazilianSSN","countrySpecificSchemas","billingAddressRequiredFields","layout","CREDIT_CARD","hasRequiredHolderName","hasHolderName","holderNameRequired","positionHolderNameOnTop","CREDIT_CARD_NAME_TOP","CREDIT_CARD_NAME_BOTTOM","KCP_CARD","KCP_CARD_NAME_TOP","KCP_CARD_NAME_BOTTOM","SSN_CARD","SSN_CARD_NAME_TOP","SSN_CARD_NAME_BOTTOM","countrySpecificSchemasFlat","filter","item","countryBasedAddressLayout","x","includes","concat","mapFieldKey","key","i18n","countrySpecificLabels","get","extractPropsForCardFields","amount","billingAddressRequired","billingAddressAllowedCountries","brandsConfiguration","showStoreDetailsCheckbox","hasCVC","installmentOptions","placeholders","showBrandIcon","showContextualElement","lastFour","expiryMonth","expiryYear","disclaimerMessage","extractPropsForSFP","autoFocus","brands","clientKey","countryCode","forceCompat","implementationType","keypadFix","legacyInputMode","loadingContext","maskSecurityCode","exposeExpiryDate","minimumExpiryDate","onAdditionalSFConfig","onAdditionalSFRemoved","onAllValid","onAutoComplete","onBinValue","onConfigSuccess","handleKeyPress","onError","onFieldValid","onLoad","resources","showWarnings","trimTrailingSeparator","handlePartialAddressMode","addressMode","AddressModeOptions","partial","PARTIAL_ADDRESS_SCHEMA","lookupBlurBasedErrors","errorCode","SF_ErrorCodes","ERROR_MSG_UNSUPPORTED_CARD_ENTERED","ERROR_MSG_CARD_TOO_OLD","ERROR_MSG_CARD_TOO_FAR_IN_FUTURE","ERROR_MSG_CARD_EXPIRES_TOO_SOON","getFullBrandName","BRAND_READABLE_NAME_MAP","getCardConfigData","cardProps","billingAddressMode","DEFAULT_CARD_GROUP_TYPES","challengeWindowSize","DEFAULT_CHALLENGE_WINDOW_SIZE","configuration","data","disableIOSArrowKeys","doBinLookup","enableStoreDetails","fastlaneConfiguration","hideCVC","name","showInstallmentAmounts","showPayButton","styles","onBinLookup","onBlur","onBrand","onEnterKeyPressed","onFocus","dataString","JSON","stringify","CardInputDefaultProps","srPanelEnabled","modules","srPanel","enabled","srPanelMoveFocus","moveFocus","riskEnabled","risk","isFastlaneConfigValid","isFastlaneComponentConfigValid","billingAddressModeValue","onAddressLookup","showKCPType","koreanAuthenticationRequired","toLowerCase","length","toString","substring","hasBrandsConfiguration","notFalsy","hasData","hasDisclaimerMessage","hasInstallmentOptions","hasPlaceholders","hasStylesConfigured","socialSecurityNumberMode","hasOnAllValid","hasOnBinValue","hasOnBlur","hasOnBrand","hasOnConfigSuccess","hasOnFieldValid","hasOnFocus","hasOnLoad","hasOnBinLookup","hasOnEnterKeyPressed","hasFastlaneConfigured","isFastlaneConsentDefaultOn","defaultToggleState","configData","mapDualBrandButtons","dualBrandSelectElements","map","id","useImage","imageName","imageURL","icon","brandObject","localeBrand","altName"],"mappings":"i1BA2BO,MAAMA,EAAkB,CAACC,EAAeC,IAMpCA,EALc,CACjBC,KAAgB,SAAVF,EAAmB,SAAWA,GAAS,SAC7CG,UAAW,OAGRF,CAAuBD,GAOrBI,EAA8BC,GACT,cAAvBA,GAAcC,MAAwBD,GAAcE,MAAQ,EAG1DC,EAAY,EACrBC,QACAC,UACAC,mBACAC,yBAAyB,KACzBC,+BAA+B,SAE/B,IAAIC,EAASC,EACb,MAAMC,EAAwBP,EAAMQ,eAAiBR,EAAMS,mBAqB3D,GAnBIF,IACAF,EAASL,EAAMU,wBAA0BC,EAAuBC,GAGhEX,IACAI,EAASQ,EACLN,IACAF,EAASL,EAAMU,wBAA0BI,EAAoBC,IAIjEb,IACAG,EAASW,EACLT,IACAF,EAASL,EAAMU,wBAA0BO,EAAoBC,IAKjEf,EAAwB,CAExB,MAAMgB,EAAuChB,EAA8B,KAAC,GAAGiB,QAAOC,GAAwB,iBAATA,IAErG,IAAIC,EAA4BH,EAE5Bf,IAEAkB,EAA4BH,EAA2BC,QAAOG,GAAKnB,EAA6BoB,SAASD,MAG7GlB,EAASC,EAAYmB,OAAOH,GACxBf,IACAF,EAASL,EAAMU,wBACTC,EAAqBc,OAAOH,GAC5BV,EAAwBa,OAAOH,GAG7C,CACA,OAAOjB,CAAAA,EAMEqB,EAAc,CAACC,EAAaC,EAAgBC,KAErD,OAAQF,GACJ,IAAK,uBACD,OAAOC,EAAKE,IAAI,UAAUH,KAE9B,IAAK,SACL,IAAK,oBACL,IAAK,aACL,IAAK,kBACL,IAAK,OACL,IAAK,UACD,OAAOE,IAAwBF,GAAOC,EAAKE,IAAID,IAAwBF,IAAQC,EAAKE,IAAIH,GAE5F,QACI,OAAO,KACf,EAGSI,EAA6B/B,IAC/B,CAEHgC,OAAQhC,EAAMgC,OACdC,uBAAwBjC,EAAMiC,uBAC9B7B,6BAA8BJ,EAAMI,6BACpC8B,+BAAgClC,EAAMkC,+BACtCC,oBAAqBnC,EAAMmC,oBAC3BC,yBAA0BpC,EAAMoC,yBAChCC,OAAQrC,EAAMqC,OACd7B,cAAeR,EAAMQ,cACrBC,mBAAoBT,EAAMS,mBAC1B6B,mBAAoBtC,EAAMsC,mBAC1BC,aAAcvC,EAAMuC,aACpB7B,wBAAyBV,EAAMU,wBAE/B8B,cAAexC,EAAMwC,cACrBC,sBAAuBzC,EAAMyC,sBAE7BC,SAAU1C,EAAM0C,SAChBC,YAAa3C,EAAM2C,YACnBC,WAAY5C,EAAM4C,WAClBC,kBAAmB7C,EAAM6C,oBAIpBC,EAAsB9C,IACxB,CACH+C,UAAW/C,EAAM+C,UACjBC,OAAQhD,EAAMgD,OACdb,oBAAqBnC,EAAMmC,oBAC3Bc,UAAWjD,EAAMiD,UACjBC,YAAalD,EAAMkD,YACnBC,YAAanD,EAAMmD,YACnBvB,KAAM5B,EAAM4B,KACZwB,mBAAoBpD,EAAMoD,mBAC1BC,UAAWrD,EAAMqD,UACjBC,gBAAiBtD,EAAMsD,gBACvBC,eAAgBvD,EAAMuD,eACtBC,iBAAkBxD,EAAMwD,iBACxBC,iBAAkBzD,EAAMyD,iBACxBC,kBAAmB1D,EAAM0D,kBACzBC,qBAAsB3D,EAAM2D,qBAC5BC,sBAAuB5D,EAAM4D,sBAC7BC,WAAY7D,EAAM6D,WAClBC,eAAgB9D,EAAM8D,eACtBC,WAAY/D,EAAM+D,WAClBC,gBAAiBhE,EAAMgE,gBACvBC,eAAgBjE,EAAMiE,eACtBC,QAASlE,EAAMkE,QACfC,aAAcnE,EAAMmE,aACpBC,OAAQpE,EAAMoE,OACd7B,aAAcvC,EAAMuC,aACpB8B,UAAWrE,EAAMqE,UACjB5B,sBAAuBzC,EAAMyC,sBAC7B6B,aAActE,EAAMsE,aACpBC,sBAAuBvE,EAAMuE,wBAIxBC,EAA4BC,GAC9BA,GAAeC,EAAmBC,QAAUC,EAAyB,KAIzE,SAASC,EAAsBC,GAElC,OAAQ,CACJC,EAAcC,mCACdD,EAAcE,uBACdF,EAAcG,iCACdH,EAAcI,iCAChB3D,SAASsD,EACf,CAEO,SAASM,EAAiB7F,GAC7B,OAAO8F,EAAwB9F,IAAUA,CAC7C,CAEO,MAAM+F,EAAqBC,IAC9B,MAGMxC,UACFA,EAASb,+BACTA,EAA8BsD,mBAC9BA,EAAkBvD,uBAClBA,EAAsB7B,6BACtBA,EAA4B4C,OAC5BA,EAASyC,EAAwBtD,oBACjCA,EAAmBuD,oBACnBA,EAAsBC,EAA6BC,cACnDA,EAAa1C,YACbA,EAAW2C,KACXA,EAAIhD,kBACJA,EAAiBiD,oBACjBA,EAAmBC,YACnBA,EAAWC,mBACXA,EAAkBvC,iBAClBA,EAAgBwC,sBAChBA,EAAqB9C,YACrBA,EAAW3C,cACXA,EAAa0F,QACbA,EAAOzF,mBACPA,EAAkB6B,mBAClBA,EAAkBe,UAClBA,EAASC,gBACTA,EAAeE,iBACfA,EAAgBE,kBAChBA,EAAiByC,KACjBA,EAAI5D,aACJA,EAAY7B,wBACZA,EAAuB8B,cACvBA,EAAa4D,uBACbA,EAAsBC,cACtBA,GAAgB,EAAKC,OACrBA,EAAMzC,WACNA,EAAU0C,YACVA,EAAWxC,WACXA,EAAUyC,OACVA,EAAMC,QACNA,EAAOzC,gBACPA,EAAe0C,kBACfA,EAAiBvC,aACjBA,EAAYwC,QACZA,EAAOvC,OACPA,GACAmB,EAEEqB,EAAaC,KAAKC,UAAUC,EAAsBlB,MAElDmB,EAAiBzB,EAAU0B,SAASC,SAASC,QAC7CC,EAAmB7B,EAAU0B,SAASC,SAASG,UAE/CC,EAAc/B,EAAU0B,SAASM,MAAMJ,QAEvCK,EAAwBC,EAA+BxB,GAEvDyB,GAA0BnC,EAAUoC,gBAAkB,SAAWnC,EAEvE,IAAIoC,GAA2C,QACK,IAAhDhC,GAAeiC,+BACfD,GAA6C,OAA/B1E,GAAa4E,cAAyB,UAAY,QAgEpE,MA7DmC,CAC/B/E,eACIb,GAAgC6F,OAAS,GAAK,CAC9C7F,+BAAgCA,EAA+B8F,WAAWC,UAAU,EApEzE,MAsEfzC,mBAAoBkC,GACpBzF,yBACA7B,6BAA8BA,GAA8B4H,YAAYC,UAAU,EAxEnE,KA0EfjF,OAAQA,GAAQgF,YAAYC,UAAU,EA1EvB,KA2EfvC,sBACAI,sBACAC,cACAC,qBACAvC,mBACAN,cACA+E,uBAAwBC,EAAShG,GACjCiG,QAASvC,GAAQgB,KAAKC,UAAUvB,EAAUM,QAAUe,EACpDyB,uBAAwBxF,EACxBrC,gBACA8H,sBAAuBH,EAAS7F,GAChCiG,gBAAiBJ,EAAS5F,GAC1BiG,oBAAqBL,EAAS7B,GAC9BJ,UACAzF,qBACA4C,YACAC,kBACAE,mBACAE,oBAAqBA,EACrByC,OACAzF,0BACA4G,cACA9E,gBACA4D,yBAA0BA,EAC1BwB,eACAvB,gBACAoC,yBAA0B7C,GAAe6C,yBACzCzB,iBACAI,mBAGAsB,cAAe7E,IAAekD,EAAsBlD,WACpD8E,cAAe5E,IAAegD,EAAsBhD,WACpD6E,UAAWpC,IAAWO,EAAsBP,OAC5CqC,WAAYpC,IAAYM,EAAsBN,QAC9CqC,mBAAoB9E,IAAoB+C,EAAsB/C,gBAC9D+E,gBAAiB5E,IAAiB4C,EAAsB5C,aACxD6E,WAAYrC,IAAYI,EAAsBJ,QAC9CsC,UAAW7E,IAAW2C,EAAsB3C,OAE5C8E,iBAAkB3C,EAClB4C,uBAAwBzC,KAIpBc,GAAyB,CACzB4B,uBAAuB,EACvBC,2BAA4BpD,EAAsBqD,oBAInDC,EAGEC,EAAsB,CAACC,EAAmDtH,IAC5EsH,EAAwBC,KAAIrI,IAC/B,MAAM9B,EAAQ8B,EAAKsI,GACbnK,EAAWoK,IACXC,EAAsB,SAAVtK,EAAmB,SAAWA,EAC1CuK,EAAW3H,EAAoB5C,IAAQwK,MAAQzK,EAAgBuK,EAAWrK,GAIhF,MAAO,CACHmK,GAAItI,EAAKsI,GACTxD,KAAM9E,EAAK2I,YAAYC,aAAe5I,EAAK2I,YAAYzK,MACvDuK,WACAI,QAAS9E,EAAiB7F,GAC9B"}