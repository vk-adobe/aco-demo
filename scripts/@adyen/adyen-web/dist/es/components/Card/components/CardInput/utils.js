import{AddressModeOptions as e}from"./types.js";import{CREDIT_CARD_NAME_TOP as o,CREDIT_CARD_NAME_BOTTOM as n,KCP_CARD_NAME_TOP as s,KCP_CARD_NAME_BOTTOM as i,SSN_CARD_NAME_TOP as a,SSN_CARD_NAME_BOTTOM as r,CREDIT_CARD as t,KCP_CARD as l,SSN_CARD as d}from"./layouts.js";import{PARTIAL_ADDRESS_SCHEMA as u}from"../../../internal/Address/constants.js";import{DEFAULT_CARD_GROUP_TYPES as c,BRAND_READABLE_NAME_MAP as m}from"../../../internal/SecuredFields/lib/constants.js";import p from"../../../../core/Context/useImage.js";import{SF_ErrorCodes as h}from"../../../../core/Errors/constants.js";import{DEFAULT_CHALLENGE_WINDOW_SIZE as g}from"../../../ThreeDS2/constants.js";import C from"./defaultProps.js";import{isConfigurationValid as y}from"../Fastlane/utils/validate-configuration.js";import{notFalsy as b}from"../../../../utils/commonUtils.js";const f=(e,o)=>o({type:"card"===e?"nocard":e||"nocard",extension:"svg"})(e),S=e=>"revolving"===e?.plan||e?.value>1,O=({props:e,showKCP:u,showBrazilianSSN:c,countrySpecificSchemas:m=null,billingAddressRequiredFields:p=null})=>{let h=t;const g=e.hasHolderName&&e.holderNameRequired;if(g&&(h=e.positionHolderNameOnTop?o:n),u&&(h=l,g&&(h=e.positionHolderNameOnTop?s:i)),c&&(h=d,g&&(h=e.positionHolderNameOnTop?a:r)),m){const s=m.flat(2).filter((e=>"number"!=typeof e));let i=s;p&&(i=s.filter((e=>p.includes(e)))),h=t.concat(i),g&&(h=e.positionHolderNameOnTop?o.concat(i):n.concat(i))}return h},A=(e,o,n)=>{switch(e){case"socialSecurityNumber":return o.get(`boleto.${e}`);case"street":case"houseNumberOrName":case"postalCode":case"stateOrProvince":case"city":case"country":return n?.[e]?o.get(n?.[e]):o.get(e);default:return null}},R=e=>({amount:e.amount,billingAddressRequired:e.billingAddressRequired,billingAddressRequiredFields:e.billingAddressRequiredFields,billingAddressAllowedCountries:e.billingAddressAllowedCountries,brandsConfiguration:e.brandsConfiguration,showStoreDetailsCheckbox:e.showStoreDetailsCheckbox,hasCVC:e.hasCVC,hasHolderName:e.hasHolderName,holderNameRequired:e.holderNameRequired,installmentOptions:e.installmentOptions,placeholders:e.placeholders,positionHolderNameOnTop:e.positionHolderNameOnTop,showBrandIcon:e.showBrandIcon,showContextualElement:e.showContextualElement,lastFour:e.lastFour,expiryMonth:e.expiryMonth,expiryYear:e.expiryYear,disclaimerMessage:e.disclaimerMessage}),F=e=>({autoFocus:e.autoFocus,brands:e.brands,brandsConfiguration:e.brandsConfiguration,clientKey:e.clientKey,countryCode:e.countryCode,forceCompat:e.forceCompat,i18n:e.i18n,implementationType:e.implementationType,keypadFix:e.keypadFix,legacyInputMode:e.legacyInputMode,loadingContext:e.loadingContext,maskSecurityCode:e.maskSecurityCode,exposeExpiryDate:e.exposeExpiryDate,minimumExpiryDate:e.minimumExpiryDate,onAdditionalSFConfig:e.onAdditionalSFConfig,onAdditionalSFRemoved:e.onAdditionalSFRemoved,onAllValid:e.onAllValid,onAutoComplete:e.onAutoComplete,onBinValue:e.onBinValue,onConfigSuccess:e.onConfigSuccess,handleKeyPress:e.handleKeyPress,onError:e.onError,onFieldValid:e.onFieldValid,onLoad:e.onLoad,placeholders:e.placeholders,resources:e.resources,showContextualElement:e.showContextualElement,showWarnings:e.showWarnings,trimTrailingSeparator:e.trimTrailingSeparator}),x=o=>o==e.partial?u:null;function N(e){return![h.ERROR_MSG_UNSUPPORTED_CARD_ENTERED,h.ERROR_MSG_CARD_TOO_OLD,h.ERROR_MSG_CARD_TOO_FAR_IN_FUTURE,h.ERROR_MSG_CARD_EXPIRES_TOO_SOON].includes(e)}function E(e){return m[e]??e}const w=e=>{const{autoFocus:o,billingAddressAllowedCountries:n,billingAddressMode:s,billingAddressRequired:i,billingAddressRequiredFields:a,brands:r=c,brandsConfiguration:t,challengeWindowSize:l=g,configuration:d,countryCode:u,data:m,disclaimerMessage:p,disableIOSArrowKeys:h,doBinLookup:f,enableStoreDetails:S,exposeExpiryDate:O,fastlaneConfiguration:A,forceCompat:R,hasHolderName:F,hideCVC:x,holderNameRequired:N,installmentOptions:E,keypadFix:w,legacyInputMode:B,maskSecurityCode:D,minimumExpiryDate:T,name:k,placeholders:M,positionHolderNameOnTop:V,showBrandIcon:_,showInstallmentAmounts:P,showPayButton:I=!1,styles:q,onAllValid:H,onBinLookup:L,onBinValue:j,onBlur:v,onBrand:K,onConfigSuccess:U,onEnterKeyPressed:G,onFieldValid:W,onFocus:z,onLoad:J}=e,Y=JSON.stringify(C.data),X=e.modules?.srPanel?.enabled,$=e.modules?.srPanel?.moveFocus,Q=e.modules?.risk?.enabled,Z=y(A),ee=e.onAddressLookup?"lookup":s;let oe="none";!0===d?.koreanAuthenticationRequired&&(oe="kr"===u?.toLowerCase()?"atStart":"auto");return{autoFocus:o,...n?.length>0&&{billingAddressAllowedCountries:n.toString().substring(0,128)},billingAddressMode:ee,billingAddressRequired:i,billingAddressRequiredFields:a?.toString()?.substring(0,128),brands:r?.toString()?.substring(0,128),challengeWindowSize:l,disableIOSArrowKeys:h,doBinLookup:f,enableStoreDetails:S,exposeExpiryDate:O,forceCompat:R,hasBrandsConfiguration:b(t),hasData:m&&JSON.stringify(e.data)!==Y,hasDisclaimerMessage:!!p,hasHolderName:F,hasInstallmentOptions:b(E),hasPlaceholders:b(M),hasStylesConfigured:b(q),hideCVC:x,holderNameRequired:N,keypadFix:w,legacyInputMode:B,maskSecurityCode:D,minimumExpiryDate:!!T,name:k,positionHolderNameOnTop:V,riskEnabled:Q,showBrandIcon:_,showInstallmentAmounts:!!P,showKCPType:oe,showPayButton:I,socialSecurityNumberMode:d?.socialSecurityNumberMode,srPanelEnabled:X,srPanelMoveFocus:$,hasOnAllValid:H!==C.onAllValid,hasOnBinValue:j!==C.onBinValue,hasOnBlur:v!==C.onBlur,hasOnBrand:K!==C.onBrand,hasOnConfigSuccess:U!==C.onConfigSuccess,hasOnFieldValid:W!==C.onFieldValid,hasOnFocus:z!==C.onFocus,hasOnLoad:J!==C.onLoad,hasOnBinLookup:!!L,hasOnEnterKeyPressed:!!G,...Z&&{hasFastlaneConfigured:!0,isFastlaneConsentDefaultOn:A.defaultToggleState}}},B=(e,o)=>e.map((e=>{const n=e.id,s=p(),i="card"===n?"nocard":n,a=o[n]?.icon??f(i,s);return{id:e.id,name:e.brandObject.localeBrand||e.brandObject.brand,imageURL:a,altName:E(n)}}));export{R as extractPropsForCardFields,F as extractPropsForSFP,w as getCardConfigData,f as getCardImageUrl,E as getFullBrandName,O as getLayout,x as handlePartialAddressMode,S as hasValidInstallmentsObject,N as lookupBlurBasedErrors,B as mapDualBrandButtons,A as mapFieldKey};
//# sourceMappingURL=utils.js.map
