import{createElement as e,Fragment as n}from"../../../../external/preact/dist/preact.js";import{useMemo as t,useState as a,useCallback as s,useEffect as o}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../../../../_virtual/index.js";import i from"../../../internal/Toggle/Toggle.js";import l from"../../../internal/Img/Img.js";import c from"../../../../core/Context/useImage.js";import m from"./USOnlyPhoneInput.js";import{InfoButton as d}from"./InfoButton.js";import{useCoreContext as g}from"../../../../core/Context/CoreProvider.js";import{LabelOnlyDisclaimerMessage as f}from"../../../internal/DisclaimerMessage/DisclaimerMessage.js";import{isConfigurationValid as u}from"./utils/validate-configuration.js";import p from"./utils/mobile-number-formatter.js";import{InfoEventTypes as y}from"../../../../core/Analytics/constants.js";import{AnalyticsInfoEvent as h}from"../../../../core/Analytics/AnalyticsInfoEvent.js";const _=["mc","visa"],k=({showConsent:k,defaultToggleState:j,termsAndConditionsLink:C,privacyPolicyLink:v,termsAndConditionsVersion:b,fastlaneSessionId:S,currentDetectedBrand:I,telephoneNumber:x,onChange:A,onSubmitAnalytics:T})=>{const D=t((()=>k&&_.includes(I)),[k,I]),[N,w]=a(D),[L,P]=a(j),V=c(),[E,F]=a(""),{i18n:M}=g(),B=t((()=>u({showConsent:k,defaultToggleState:j,termsAndConditionsLink:C,privacyPolicyLink:v,termsAndConditionsVersion:b,fastlaneSessionId:S})),[k,j,C,v,b,S]),O=s((()=>{const e=!L;P(e);const n=new h({type:y.clicked,target:"fastlane_signup_consent_toggle",configData:{isToggleOn:e}});T(n)}),[L,T]);return o((()=>{B&&A({fastlaneData:{consentShown:N,fastlaneSessionId:S,consentGiven:!!D&&L,...b&&{consentVersion:b},...E&&{telephoneNumber:E}}})}),[D,N,b,L,S,E,A,B]),o((()=>{D&&w(!0)}),[D]),o((()=>{if(!B)return;const e=new h({type:y.rendered,configData:{isFastlaneSignupRendered:D}});T(e)}),[D,B,T]),D&&B?e("div",{className:"adyen-checkout-card__fastlane","data-testid":"fastlane-signup-component"},e("div",{className:r("adyen-checkout-card__fastlane-consent-toggle",{"adyen-checkout-card__fastlane-consent-toggle--active":L})},e(i,{checked:L,onChange:O,ariaLabel:M.get("card.fastlane.consentToggle"),label:e("span",null,M.get("card.fastlane.consentToggle"))}),e(d,null)),L&&e(n,null,e(m,{initialValue:p(x),onChange:F}),e("div",{className:"adyen-checkout-card__fastlane-consent-text"},e(f,{message:M.get("card.fastlane.consentText"),urls:[C,v]})),e(l,{className:"adyen-checkout-card__fastlane-brand",src:V({imageFolder:"components/"})("paypal_fastlane_black"),alt:M.get("card.fastlane.a11y.logo")}))):null};export{k as default};
//# sourceMappingURL=FastlaneSignup.js.map
