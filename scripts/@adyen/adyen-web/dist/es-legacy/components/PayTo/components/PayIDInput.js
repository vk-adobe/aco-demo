import{createElement as e}from"../../../external/preact/dist/preact.js";import r from"../../internal/FormFields/Fieldset/Fieldset.js";import i,{PayToIdentifierEnum as t}from"./IdentifierSelector.js";import{useEffect as o,useRef as a}from"../../../external/preact/hooks/dist/hooks.js";import n from"../../../utils/useForm/useForm.js";import l from"./PayToPhone.js";import s from"../../internal/FormFields/InputEmail.js";import{getErrorMessage as d}from"../../../utils/getErrorMessage.js";import m from"../../internal/FormFields/Field/Field.js";import{useCoreContext as p}from"../../../core/Context/CoreProvider.js";import c from"../../internal/FormFields/InputText.js";import{payIdValidationRules as f}from"./validate.js";import{phoneFormatters as u}from"../../internal/PhoneInput/validate.js";import g from"./PayToNameFields.js";function b(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function h(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),t.forEach((function(r){b(e,r,i[r])}))}return e}const I=["selectedIdentifier","firstName","lastName"],j={[t.email]:["email"],[t.phone]:["phoneNumber","phonePrefix"],[t.abn]:["abn"],[t.orgid]:["orgid"]};function y({setComponentRef:b,defaultData:y,placeholders:F,onChange:v,setStatus:N}){const{i18n:P}=p(),M=n({schema:I,defaultData:h({selectedIdentifier:t.phone},y),rules:f,formatters:u}),{handleChangeFor:O,triggerValidation:C,data:E,errors:S,valid:x,isValid:B,setSchema:w}=M;o((()=>{w([...j[E.selectedIdentifier],...I])}),[E.selectedIdentifier]),o((()=>{v({data:E,valid:x,errors:S,isValid:B})}),[E,x,S,B]);const D=a({setStatus:N,showValidation:C});return o((()=>{b(D.current)}),[b]),e(r,{classNameModifiers:["payto__payid_input"],label:"PayID",description:"payto.payid.description"},e(i,{classNameModifiers:["col-40"],onSelectedIdentifier:O("selectedIdentifier"),selectedIdentifier:E.selectedIdentifier}),E.selectedIdentifier===t.phone&&e(l,{onChange:O("phone","blur"),data:E,form:M}),E.selectedIdentifier===t.email&&e(m,{label:P.get("shopperEmail"),classNameModifiers:["col-60","email"],errorMessage:d(P,S.email,P.get("shopperEmail")),dir:"ltr",name:"email",i18n:P},e(s,{name:"email",value:E.email,onInput:O("email","input"),onBlur:O("email","blur"),placeholder:null==F?void 0:F.email,required:!0})),E.selectedIdentifier===t.abn&&e(m,{label:P.get("ABN"),classNameModifiers:["col-60","abn"],errorMessage:d(P,S.abn,P.get("ABN")),name:"ABN",i18n:P},e(c,{name:"abn",value:E.abn,onInput:O("abn","input"),onBlur:O("abn","blur"),placeholder:null==F?void 0:F.abn,required:!0})),E.selectedIdentifier===t.orgid&&e(m,{label:P.get("payto.payid.label.orgid"),classNameModifiers:["col-60","orgid"],errorMessage:d(P,S.orgid,P.get("payto.payid.label.orgid")),name:"orgid",i18n:P},e(c,{name:"orgid",value:E.orgid,onInput:O("orgid","input"),onBlur:O("orgid","blur"),placeholder:null==F?void 0:F.orgid,required:!0})),e(g,{i18n:P,data:E,handleChangeFor:O,errors:S,placeholders:F}))}export{y as default};
//# sourceMappingURL=PayIDInput.js.map
