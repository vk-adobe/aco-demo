{"version":3,"file":"PasskeySdkLoader.js","sources":["../../../../../src/components/PayByBankPix/services/PasskeySdkLoader.ts"],"sourcesContent":["import { IAdyenPasskey } from './types';\nimport { getUrlFromMap } from '../../../core/Environment/Environment';\nimport type { CoreConfiguration } from '../../../core/types';\nimport { CDN_ENVIRONMENTS } from '../../../core/Environment/constants';\nimport AdyenCheckoutError from '../../../core/Errors/AdyenCheckoutError';\nimport Script from '../../../utils/Script';\n\nexport interface IPasskeySdkLoader {\n    load(environment: CoreConfiguration['environment']): Promise<IAdyenPasskey>;\n}\n\nclass PasskeySdkLoader implements IPasskeySdkLoader {\n    private static readonly PASSKEY_SDK_URL = 'js/adyenpasskey/1.1.0/adyen-passkey.js';\n    private AdyenPasskey: IAdyenPasskey;\n\n    private isAvailable(): boolean {\n        return this.AdyenPasskey != null;\n    }\n\n    public async load(environment: string): Promise<IAdyenPasskey> {\n        if (this.isAvailable()) {\n            return this.AdyenPasskey;\n        }\n\n        try {\n            const cdnUrl = getUrlFromMap(environment as CoreConfiguration['environment'], CDN_ENVIRONMENTS);\n            const url = `${cdnUrl}${PasskeySdkLoader.PASSKEY_SDK_URL}`;\n            const scriptElement = new Script(url);\n            await scriptElement.load();\n            this.AdyenPasskey = window.AdyenPasskey?.default;\n            return this.AdyenPasskey;\n        } catch (e: unknown) {\n            throw new AdyenCheckoutError(\n                'SCRIPT_ERROR',\n                `Unable to load script. Message: ${e instanceof Error ? e.message : 'Unknown error loading Passkey sdk'}`\n            );\n        }\n    }\n}\n\nexport { PasskeySdkLoader };\n"],"names":["PasskeySdkLoader","isAvailable","this","AdyenPasskey","load","environment","window","cdnUrl","getUrlFromMap","CDN_ENVIRONMENTS","scriptElement","Script","PASSKEY_SDK_URL","default","e","AdyenCheckoutError","Error","message","_define_property"],"mappings":"6WAWA,MAAMA,EAIMC,WAAAA,GACJ,OAA4B,MAArBC,KAAKC,YAChB,CAEA,UAAaC,CAAKC,GACd,GAAIH,KAAKD,cACL,OAAOC,KAAKC,aAGhB,IAKwBG,IAAAA,EAJpB,MAAMC,EAASC,EAAcH,EAAiDI,GAExEC,EAAgB,IAAIC,EADd,GAAGJ,IAASP,EAAiBY,mBAIzC,aAFMF,EAAcN,OACpBF,KAAKC,aAAkC,QAAnBG,EAAAA,OAAOH,oBAAPG,IAAAA,OAAAA,EAAAA,EAAqBO,QAClCX,KAAKC,YAChB,CAAE,MAAOW,GACL,MAAM,IAAIC,EACN,eACA,mCAAmCD,aAAaE,MAAQF,EAAEG,QAAU,sCAE5E,CACJ,eAxBAC,EAAAhB,KAAQC,oBAAR,IADAe,EADElB,EACsBY,kBAAkB"}