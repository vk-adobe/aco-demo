import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useMemo as n,useState as a,useCallback as o,useEffect as s}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../../../../_virtual/index.js";import i from"../../../internal/Toggle/Toggle.js";import c from"../../../internal/Img/Img.js";import l from"../../../../core/Context/useImage.js";import m from"./USOnlyPhoneInput.js";import{InfoButton as f}from"./InfoButton.js";import{useCoreContext as d}from"../../../../core/Context/CoreProvider.js";import{LabelOnlyDisclaimerMessage as u}from"../../../internal/DisclaimerMessage/DisclaimerMessage.js";import{isConfigurationValid as g}from"./utils/validate-configuration.js";import p from"./utils/mobile-number-formatter.js";import{InfoEventTypes as y}from"../../../../core/Analytics/constants.js";import{AnalyticsInfoEvent as b}from"../../../../core/Analytics/AnalyticsInfoEvent.js";function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){h(e,t,n[t])}))}return e}const k=["mc","visa"],_=({showConsent:h,defaultToggleState:_,termsAndConditionsLink:v,privacyPolicyLink:C,termsAndConditionsVersion:S,fastlaneSessionId:O,currentDetectedBrand:w,telephoneNumber:I,onChange:x,onSubmitAnalytics:A})=>{const P=n((()=>h&&k.includes(w)),[h,w]),[T,D]=a(P),[N,L]=a(_),E=l(),[V,F]=a(""),{i18n:M}=d(),B=n((()=>g({showConsent:h,defaultToggleState:_,termsAndConditionsLink:v,privacyPolicyLink:C,termsAndConditionsVersion:S,fastlaneSessionId:O})),[h,_,v,C,S,O]),G=o((()=>{const e=!N;L(e);const t=new b({type:y.clicked,target:"fastlane_signup_consent_toggle",configData:{isToggleOn:e}});A(t)}),[N,A]);return s((()=>{B&&x({fastlaneData:j({consentShown:T,fastlaneSessionId:O,consentGiven:!!P&&N},S&&{consentVersion:S},V&&{telephoneNumber:V})})}),[P,T,S,N,O,V,x,B]),s((()=>{P&&D(!0)}),[P]),s((()=>{if(!B)return;const e=new b({type:y.rendered,configData:{isFastlaneSignupRendered:P}});A(e)}),[P,B,A]),P&&B?e("div",{className:"adyen-checkout-card__fastlane","data-testid":"fastlane-signup-component"},e("div",{className:r("adyen-checkout-card__fastlane-consent-toggle",{"adyen-checkout-card__fastlane-consent-toggle--active":N})},e(i,{checked:N,onChange:G,ariaLabel:M.get("card.fastlane.consentToggle"),label:e("span",null,M.get("card.fastlane.consentToggle"))}),e(f,null)),N&&e(t,null,e(m,{initialValue:p(I),onChange:F}),e("div",{className:"adyen-checkout-card__fastlane-consent-text"},e(u,{message:M.get("card.fastlane.consentText"),urls:[v,C]})),e(c,{className:"adyen-checkout-card__fastlane-brand",src:E({imageFolder:"components/"})("paypal_fastlane_black"),alt:M.get("card.fastlane.a11y.logo")}))):null};export{_ as default};
//# sourceMappingURL=FastlaneSignup.js.map
