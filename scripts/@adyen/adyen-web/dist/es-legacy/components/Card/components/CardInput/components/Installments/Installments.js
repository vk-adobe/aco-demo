import{createElement as e}from"../../../../../../external/preact/dist/preact.js";import{useState as l,useEffect as n}from"../../../../../../external/preact/hooks/dist/hooks.js";import t from"../../../../../internal/FormFields/Field/Field.js";import{useCoreContext as a}from"../../../../../../core/Context/CoreProvider.js";import s from"../../../../../internal/FormFields/Fieldset/Fieldset.js";import i from"../../../../../internal/FormFields/RadioGroup/RadioGroup.js";import o from"../../../../../internal/FormFields/Select/Select.js";import{alternativeLabelContent as r}from"../FieldLabelAlternative.js";function m(e,l,n){return l in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n,e}function u(u){var d,v;const{i18n:c}=a(),{amount:p,brand:f,onChange:b,type:g}=u,h=u.installmentOptions[f]||u.installmentOptions.card,j=1===(null==h||null===(d=h.values)||void 0===d?void 0:d.length),[F,O]=l((null==h?void 0:h.preselectedValue)||(null==h?void 0:h.values[0])),[y,C]=l("onetime"),w=null==h||null===(v=h.plans)||void 0===v?void 0:v.includes("revolving"),E=e=>{const l=e.target.value;O(Number(l))},x=e=>{const l=e.currentTarget.getAttribute("value");C(l)},N=e=>{let l,n;var t;return"amount"===g?(l="installmentOption",n={count:e,values:{times:e,partialValue:(t=e,c.amount(p.value/t,p.currency))}}):(l="installmentOptionMonths",n={count:e,values:{times:e}}),{id:e,name:p.value?c.get(l,n):`${e}`}};return n((()=>{var e,l;(null==h||null===(e=h.values)||void 0===e?void 0:e.includes(F))||O(null!==(l=null==h?void 0:h.preselectedValue)&&void 0!==l?l:null==h?void 0:h.values[0])}),[f]),n((()=>{const e=function(e){for(var l=1;l<arguments.length;l++){var n=null!=arguments[l]?arguments[l]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(l){m(e,l,n[l])}))}return e}({value:F},w&&"revolving"===y&&{plan:y,value:1},w&&"onetime"===y&&{value:1});b(h?e:{value:null})}),[F,h,y]),h?0===p.value?null:e("div",{className:"adyen-checkout__installments"},w?e(t,{label:c.get("installments"),classNameModifiers:["installments"],name:"installmentsPseudoLabel",useLabelElement:!1,showContextualElement:!1,renderAlternativeToLabel:r},e(s,{classNameModifiers:["revolving-plan"],label:""},e(i,{items:[{id:"onetime",name:"installments.oneTime"},{id:"installments",name:"installments.installments"},{id:"revolving",name:"installments.revolving"}],onChange:x,value:y,ariaLabel:c.get("installments")}),e(t,{className:"installments"!==y?"revolving-plan-installments__disabled":"revolving-plan-installments",classNameModifiers:["revolving-plan-installments"],name:"",useLabelElement:!1,showContextualElement:!1},e(o,{filterable:!1,items:h.values.map(N),selectedValue:F,onChange:E,name:"installments",disabled:"installments"!==y})))):e(t,{label:c.get("installments"),classNameModifiers:["installments"],name:"installments",showContextualElement:!1},e(o,{filterable:!1,items:h.values.map(N),selectedValue:F,onChange:E,name:"installments",readonly:j,allowIdOnButton:!0}))):null}u.defaultProps={brand:"",amount:{},onChange:()=>{}};export{u as default};
//# sourceMappingURL=Installments.js.map
