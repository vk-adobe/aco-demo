import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as a,useCallback as n,useEffect as o}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../VpaInput/VpaInput.js";import l from"../../../../core/Context/useImage.js";import i from"./useUpiSegmentedControlOptions.js";import{A11Y as s}from"./constants.js";import d from"../../../internal/SegmentedControl/SegmentedControl.js";import u from"../../../internal/ContentSeparator/ContentSeparator.js";import p from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as c}from"../../../../core/Context/CoreProvider.js";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){m(e,t,a[t])}))}return e}function b({defaultMode:m,onChange:b,onUpdateMode:f,payButton:y,showPayButton:I,apps:v=[]}){const{i18n:C}=c(),h=l(),[j,P]=a("ready"),[S,A]=a("qrCode"===m),[V,N]=a(m),[O,k]=a(""),[w,x]=a(null),[q,B]=a(null),[E,T]=a(null),[U,M]=a(null),Q=i(v,V);this.setStatus=e=>{P(e)},this.showValidation=()=>{null==w||w.validateInput()};const R=n((e=>{x(e)}),[]),F=n((e=>{N(e),f(e)}),[f]),H=n((e=>{(null==e?void 0:e.id)!==(null==q?void 0:q.id)&&(B(e),A(!0))}),[q]),L=n((({data:{virtualPaymentAddress:e},errors:t,valid:a,isValid:n})=>{k(e),M(t),T(a),A(n)}),[]);return o((()=>{b("qrCode"!==V?{data:g({},O&&{virtualPaymentAddress:O},q&&{app:q}),errors:U,valid:E,isValid:S}:{data:{},valid:{},errors:{},isValid:!0})}),[O,q,U,E,S,V]),e(t,null,e("p",{className:"adyen-checkout_upi-mode-selection-text"},C.get("upi.modeSelection")),e(d,{onChange:F,selectedValue:V,disabled:"loading"===j,classNameModifiers:["upi-margin-bottom"],options:Q}),e(u,{label:C.get("upi.completePayment")}),"intent"===V&&e("div",{id:s.AreaId.INTENT,"aria-labelledby":s.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent",role:"region"},e(p,{disabled:"loading"===j,apps:v,selectedAppId:null==q?void 0:q.id,onAppSelect:H,onVpaInputChange:L,onSetInputHandlers:R}),I&&y({label:C.get("continue"),status:j,disabled:null==q})),"vpa"===V&&e("div",{id:s.AreaId.VPA,"aria-labelledby":s.ButtonId.VPA,className:"adyen-checkout-upi-area-vpa",role:"region"},e(r,{disabled:"loading"===j,onChange:b,onSetInputHandlers:R}),I&&y({label:C.get("continue"),status:j})),"qrCode"===V&&e("div",{id:s.AreaId.QR,"aria-labelledby":s.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code",role:"region"},I&&y({label:C.get("generateQRCode"),icon:h({imageFolder:"components/"})("qr"),status:j})))}export{b as default};
//# sourceMappingURL=UPIComponent.js.map
