{"version":3,"file":"Dragonpay.js","sources":["../../../../src/components/Dragonpay/Dragonpay.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport DragonpayInput from './components/DragonpayInput';\nimport DragonpayVoucherResult from './components/DragonpayVoucherResult';\nimport { CoreProvider } from '../../core/Context/CoreProvider';\nimport { DragonpayConfiguraton } from './types';\nimport { TxVariants } from '../tx-variants';\n\nexport class DragonpayElement extends UIElement<DragonpayConfiguraton> {\n    public static type = TxVariants.dragonpay;\n\n    public static txVariants = [\n        TxVariants.dragonpay,\n        TxVariants.dragonpay_ebanking,\n        TxVariants.dragonpay_otc_banking,\n        TxVariants.dragonpay_otc_non_banking,\n        TxVariants.dragonpay_otc_philippines\n    ];\n\n    get isValid() {\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        const { issuer, shopperEmail } = this.state.data;\n\n        return {\n            ...(shopperEmail && { shopperEmail }),\n            paymentMethod: {\n                ...(issuer && { issuer }),\n                type: this.type\n            }\n        };\n    }\n\n    protected formatProps(props: DragonpayConfiguraton) {\n        return {\n            ...props,\n            issuers: props.details?.find(detail => detail.key === 'issuer')?.items ?? props.issuers\n        };\n    }\n\n    render() {\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                {this.props.reference ? (\n                    <DragonpayVoucherResult\n                        ref={ref => {\n                            this.componentRef = ref;\n                        }}\n                        icon={this.icon}\n                        {...this.props}\n                        onActionHandled={this.onActionHandled}\n                    />\n                ) : (\n                    <DragonpayInput\n                        ref={ref => {\n                            this.componentRef = ref;\n                        }}\n                        items={this.props.issuers}\n                        {...this.props}\n                        showPayButton={this.props.showPayButton}\n                        onChange={this.setState}\n                        onSubmit={this.submit}\n                        payButton={this.payButton}\n                    />\n                )}\n            </CoreProvider>\n        );\n    }\n}\n\nexport default DragonpayElement;\n"],"names":["DragonpayElement","UIElement","isValid","this","state","formatData","issuer","shopperEmail","data","_object_spread_props","paymentMethod","type","formatProps","props","issuers","details","find","detail","key","items","render","h","CoreProvider","i18n","loadingContext","resources","reference","DragonpayVoucherResult","ref","componentRef","icon","onActionHandled","DragonpayInput","showPayButton","onChange","setState","onSubmit","submit","payButton","_define_property","TxVariants","dragonpay","txVariants","dragonpay_ebanking","dragonpay_otc_banking","dragonpay_otc_non_banking","dragonpay_otc_philippines"],"mappings":"8qCAQO,MAAMA,UAAyBC,EAWlC,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAKAG,UAAAA,GACI,MAAMC,OAAEA,EAAMC,aAAEA,GAAiBJ,KAAKC,MAAMI,KAE5C,OAAOC,OACCF,GAAgB,CAAEA,iBAAa,CACnCG,cAAeD,OACPH,GAAU,CAAEA,WAAO,CACvBK,KAAMR,KAAKQ,QAGvB,CAEUC,WAAAA,CAAYC,OAGLA,EAAAA,EAAAA,EAFb,OAAOJ,EACAI,EAAAA,CAAAA,EAAAA,GAAAA,CACHC,QAASD,QAAAA,UAAAA,EAAAA,EAAME,eAANF,IAAAA,GAA6C,QAA7CA,EAAAA,EAAeG,MAAKC,GAAyB,WAAfA,EAAOC,aAArCL,IAAAA,OAAAA,EAAAA,EAAwDM,aAAxDN,IAAAA,EAAAA,EAAiEA,EAAMC,SAExF,CAEAM,MAAAA,GACI,OACIC,EAACC,EAAAA,CAAaC,KAAMpB,KAAKU,MAAMU,KAAMC,eAAgBrB,KAAKU,MAAMW,eAAgBC,UAAWtB,KAAKsB,WAC3FtB,KAAKU,MAAMa,UACRL,EAACM,EAAAA,EAAAA,EAAAA,CACGC,IAAKA,IACDzB,KAAK0B,aAAeD,CAAAA,EAExBE,KAAM3B,KAAK2B,MACP3B,KAAKU,OAAK,CACdkB,gBAAiB5B,KAAK4B,mBAG1BV,EAACW,EAAAA,EAAAA,EAAAA,CACGJ,IAAKA,IACDzB,KAAK0B,aAAeD,CAAAA,EAExBT,MAAOhB,KAAKU,MAAMC,SACdX,KAAKU,OAAK,CACdoB,cAAe9B,KAAKU,MAAMoB,cAC1BC,SAAU/B,KAAKgC,SACfC,SAAUjC,KAAKkC,OACfC,UAAWnC,KAAKmC,aAKpC,EA/DAC,EADSvC,EACKW,OAAO6B,EAAWC,WAEhCF,EAHSvC,EAGK0C,aAAa,CACvBF,EAAWC,UACXD,EAAWG,mBACXH,EAAWI,sBACXJ,EAAWK,0BACXL,EAAWM"}