{"version":3,"file":"processErrors.js","sources":["../../../../../../../../src/components/internal/SecuredFields/lib/CSF/utils/processErrors.ts"],"sourcesContent":["import { CardErrorData, SFFeedbackObj } from '../../types';\nimport SecuredField from '../../securedField/SecuredField';\nimport { hasOwnProperty } from '../../../../../../utils/hasOwnProperty';\n\ntype RtnType_callbackFn = (obj: CardErrorData) => void;\n\nexport const processErrors = (\n    pFeedbackObj: SFFeedbackObj,\n    securedField: SecuredField,\n    type: string,\n    rootNode: HTMLElement,\n    callbackFn: RtnType_callbackFn\n): CardErrorData => {\n    if (!hasOwnProperty(pFeedbackObj, 'error')) return null;\n\n    const fieldType: string = pFeedbackObj.fieldType;\n\n    const field: SecuredField = securedField;\n\n    // Initialise error callback object\n    const dataObj: CardErrorData = { rootNode, fieldType, error: null, type: null };\n\n    const isError: boolean = pFeedbackObj.error !== '';\n\n    // Error is empty string && field is not already in error: do nothing - don't need to propagate this non-error if the field wasn't already in error\n    // This situation arises when we encrypt a field and trigger an \"error clearing\" event i.e. deleting a character\n    // It also arises when an unsupportedCard (re. binLookup) is entered and the shopper continues to interact with the field (adding or deleting digits)\n    if (!isError && !field.hasError) {\n        return null;\n    }\n\n    // Add props to error callback object\n    dataObj.error = isError ? pFeedbackObj.error : '';\n    dataObj.type = type;\n\n    // Set error state & type on securedField instance\n    field.hasError = isError;\n    field.errorType = dataObj.error;\n\n    callbackFn(dataObj);\n\n    return dataObj;\n};\n"],"names":["processErrors","pFeedbackObj","securedField","type","rootNode","callbackFn","hasOwnProperty","field","dataObj","fieldType","error","isError","hasError","errorType"],"mappings":"iFAMaA,EAAgB,CACzBC,EACAC,EACAC,EACAC,EACAC,KAEA,IAAKC,EAAeL,EAAc,SAAU,OAAO,KAEnD,MAEMM,EAAsBL,EAGtBM,EAAyB,CAAEJ,WAAUK,UALjBR,EAAaQ,UAKeC,MAAO,KAAMP,KAAM,MAEnEQ,EAA0C,KAAvBV,EAAaS,MAKtC,OAAKC,GAAYJ,EAAMK,UAKvBJ,EAAQE,MAAQC,EAAUV,EAAaS,MAAQ,GAC/CF,EAAQL,KAAOA,EAGfI,EAAMK,SAAWD,EACjBJ,EAAMM,UAAYL,EAAQE,MAE1BL,EAAWG,GAEJA,GAbI,IAaJA"}