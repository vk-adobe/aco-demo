{"version":3,"file":"destroySecuredFields.js","sources":["../../../../../../../../src/components/internal/SecuredFields/lib/CSF/utils/destroySecuredFields.ts"],"sourcesContent":["import SecuredField from '../../securedField/SecuredField';\n\nexport function destroySecuredFields(): void {\n    // Tell all securedFields iframes: they will remove all event listeners including keyboard events\n    this.postMessageToAllIframes({ destroy: true });\n\n    // Get ref to all the keys under which SecuredField instances are stores\n    const securedFieldKeys: string[] = Object.keys(this.state.securedFields);\n\n    // Tell each SecuredField instance to:\n    // stop listening to message events, remove iframe window refs, remove iframes\n    // Then remove ref to SecuredField instance\n    securedFieldKeys.forEach(pFieldType => {\n        const sf: SecuredField = this.state.securedFields[pFieldType];\n        if (sf) sf.destroy(); // Comment out if you want to test the 'destroy' effects in the actual SF\n        this.state.securedFields[pFieldType] = null;\n    });\n    // --\n\n    // Stop listening to touchend event on body (iOS only)\n    this.destroyTouchendListener();\n    // Stop listening to touchstart event on document (iOS only)\n    this.destroyTouchstartListener();\n\n    // Clear SecuredField storage object\n    this.state.securedFields = {};\n}\n"],"names":["destroySecuredFields","this","postMessageToAllIframes","destroy","Object","keys","state","securedFields","forEach","pFieldType","sf","destroyTouchendListener","destroyTouchstartListener"],"mappings":"AAEO,SAASA,IAEZC,KAAKC,wBAAwB,CAAEC,SAAS,IAGLC,OAAOC,KAAKJ,KAAKK,MAAMC,eAKzCC,SAAQC,IACrB,MAAMC,EAAmBT,KAAKK,MAAMC,cAAcE,GAC9CC,GAAIA,EAAGP,UACXF,KAAKK,MAAMC,cAAcE,GAAc,IAAA,IAK3CR,KAAKU,0BAELV,KAAKW,4BAGLX,KAAKK,MAAMC,cAAgB,CAAC,CAChC"}