import{createElement as e,Fragment as r}from"../../../external/preact/dist/preact.js";import{useRef as t,useMemo as a,useEffect as l}from"../../../external/preact/hooks/dist/hooks.js";import s from"../FormFields/Fieldset/Fieldset.js";import i from"../FormFields/Field/Field.js";import o from"./ReadOnlyPersonalDetails.js";import{personalDetailsValidationRules as n}from"./validate.js";import{useCoreContext as m}from"../../../core/Context/CoreProvider.js";import{checkDateInputSupport as p}from"../FormFields/InputDate/utils.js";import{getFormattedData as u}from"./utils.js";import d from"../../../utils/useForm/useForm.js";import c from"../FormFields/InputText.js";import f from"../FormFields/RadioGroup/RadioGroup.js";import h from"../FormFields/InputDate/InputDate.js";import b from"../FormFields/InputEmail.js";import g from"../FormFields/InputTelephone.js";import{getErrorMessage as N}from"../../../utils/getErrorMessage.js";function O(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(r){O(e,r,t[r])}))}return e}function F(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}const y=["firstName","lastName","gender","dateOfBirth","shopperEmail","telephoneNumber"];function M(O){const{label:y="",namePrefix:M,placeholders:v,requiredFields:E,visibility:B}=O,{i18n:P}=m(),I=t({});var w;Object.keys(I.current).length||(null===(w=O.setComponentRef)||void 0===w||w.call(O,I.current));const D=a(p,[]),{handleChangeFor:C,triggerValidation:q,data:k,valid:R,errors:x,isValid:S}=d({schema:E,rules:j({},n,O.validationRules),defaultData:O.data});I.current.showValidation=()=>{q()};const V=e=>r=>{const{name:t}=r.target,a=t.split(`${M}.`).pop();C(a,e)(r)},$=e=>`${M?`${M}.`:""}${e}`;return l((()=>{const e=u(k);O.onChange({data:e,valid:R,errors:x,isValid:S})}),[k,R,x,S]),"hidden"===B?null:"readOnly"===B?e(o,F(j({},O),{data:k})):e(r,null,e(s,{classNameModifiers:["personalDetails"],label:y},E.includes("firstName")&&e(i,{label:P.get("firstName"),classNameModifiers:["col-50","firstName"],errorMessage:N(P,x.firstName,P.get("firstName")),name:"firstName",i18n:P},e(c,{name:$("firstName"),value:k.firstName,classNameModifiers:["firstName"],onInput:V("input"),onBlur:V("blur"),placeholder:v.firstName,spellCheck:!1,required:!0})),E.includes("lastName")&&e(i,{label:P.get("lastName"),classNameModifiers:["col-50","lastName"],errorMessage:N(P,x.lastName,P.get("lastName")),name:"lastName",i18n:P},e(c,{name:$("lastName"),value:k.lastName,classNameModifiers:["lastName"],onInput:V("input"),onBlur:V("blur"),placeholder:v.lastName,spellCheck:!1,required:!0})),E.includes("gender")&&e(i,{errorMessage:N(P,x.gender),classNameModifiers:["gender"],name:"gender",useLabelElement:!1},e(f,{name:$("gender"),value:k.gender,items:[{id:"MALE",name:"male"},{id:"FEMALE",name:"female"}],classNameModifiers:["gender"],onInput:V("input"),onChange:V("blur"),required:!0})),E.includes("dateOfBirth")&&e(i,{label:P.get("dateOfBirth"),classNameModifiers:["col-50","dateOfBirth"],errorMessage:N(P,x.dateOfBirth,P.get("dateOfBirth")),helper:D?null:P.get("dateOfBirth.format"),name:"dateOfBirth",i18n:P},e(h,{name:$("dateOfBirth"),value:k.dateOfBirth,classNameModifiers:["dateOfBirth"],onInput:V("input"),onBlur:V("blur"),placeholder:v.dateOfBirth,required:!0})),E.includes("shopperEmail")&&e(i,{label:P.get("shopperEmail"),classNameModifiers:["shopperEmail"],errorMessage:N(P,x.shopperEmail,P.get("shopperEmail")),dir:"ltr",name:"emailAddress",i18n:P},e(b,{name:$("shopperEmail"),value:k.shopperEmail,classNameModifiers:["shopperEmail"],onInput:V("input"),onBlur:V("blur"),placeholder:v.shopperEmail,required:!0})),E.includes("telephoneNumber")&&e(i,{label:P.get("telephoneNumber"),classNameModifiers:["telephoneNumber"],errorMessage:N(P,x.telephoneNumber,P.get("telephoneNumber")),dir:"ltr",name:"telephoneNumber",i18n:P},e(g,{name:$("telephoneNumber"),value:k.telephoneNumber,classNameModifiers:["telephoneNumber"],onInput:V("input"),onBlur:V("blur"),placeholder:v.telephoneNumber,required:!0}))))}M.defaultProps={data:{},onChange:()=>{},placeholders:{},requiredFields:y,validationRules:n,visibility:"editable"};export{y as PERSONAL_DETAILS_SCHEMA,M as default};
//# sourceMappingURL=PersonalDetails.js.map
