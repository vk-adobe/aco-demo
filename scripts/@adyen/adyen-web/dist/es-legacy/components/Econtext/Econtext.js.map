{"version":3,"file":"Econtext.js","sources":["../../../../src/components/Econtext/Econtext.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport EcontextInput from './components/EcontextInput';\nimport EcontextVoucherResult from './components/EcontextVoucherResult';\nimport { CoreProvider } from '../../core/Context/CoreProvider';\nimport { TxVariants } from '../tx-variants';\nimport { EcontextConfiguration } from './types';\n\nexport class EcontextElement extends UIElement<EcontextConfiguration> {\n    public static type = TxVariants.econtext;\n    public static txVariants = [\n        TxVariants.econtext,\n        TxVariants.econtext_atm,\n        TxVariants.econtext_online,\n        TxVariants.econtext_seven_eleven,\n        TxVariants.econtext_stores\n    ];\n\n    protected static defaultProps = {\n        personalDetailsRequired: true\n    };\n\n    get isValid() {\n        if (!this.props.personalDetailsRequired) {\n            return true;\n        }\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        return {\n            ...this.state.data,\n            paymentMethod: {\n                type: this.type\n            }\n        };\n    }\n\n    render() {\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources}>\n                {this.props.reference ? (\n                    <EcontextVoucherResult\n                        ref={ref => {\n                            this.componentRef = ref;\n                        }}\n                        {...this.props}\n                        onActionHandled={this.onActionHandled}\n                    />\n                ) : (\n                    <EcontextInput\n                        setComponentRef={this.setComponentRef}\n                        {...this.props}\n                        showPayButton={this.props.showPayButton}\n                        onChange={this.setState}\n                        onSubmit={this.submit}\n                        payButton={this.payButton}\n                    />\n                )}\n            </CoreProvider>\n        );\n    }\n}\n\nexport default EcontextElement;\n"],"names":["EcontextElement","UIElement","isValid","this","props","personalDetailsRequired","state","formatData","_object_spread_props","_object_spread","data","paymentMethod","type","render","h","CoreProvider","i18n","loadingContext","resources","reference","EcontextVoucherResult","ref","componentRef","onActionHandled","EcontextInput","setComponentRef","showPayButton","onChange","setState","onSubmit","submit","payButton","_define_property","TxVariants","econtext","txVariants","econtext_atm","econtext_online","econtext_seven_eleven","econtext_stores","defaultProps"],"mappings":"0qCAQO,MAAMA,UAAwBC,EAcjC,WAAIC,GACA,OAAKC,KAAKC,MAAMC,2BAGPF,KAAKG,MAAMJ,OACxB,CAKAK,UAAAA,GACI,OAAOC,EACAC,EAAA,CAAA,EAAAN,KAAKG,MAAMI,MAAI,CAClBC,cAAe,CACXC,KAAMT,KAAKS,OAGvB,CAEAC,MAAAA,GACI,OACIC,EAACC,EAAAA,CAAaC,KAAMb,KAAKC,MAAMY,KAAMC,eAAgBd,KAAKC,MAAMa,eAAgBC,UAAWf,KAAKe,WAC3Ff,KAAKC,MAAMe,UACRL,EAACM,EAAAA,EAAAA,EAAAA,CACGC,IAAKA,IACDlB,KAAKmB,aAAeD,CAAAA,GAEpBlB,KAAKC,OAAK,CACdmB,gBAAiBpB,KAAKoB,mBAG1BT,EAACU,EAAAA,EAAAA,EAAAA,CACGC,gBAAiBtB,KAAKsB,iBAClBtB,KAAKC,OAAK,CACdsB,cAAevB,KAAKC,MAAMsB,cAC1BC,SAAUxB,KAAKyB,SACfC,SAAU1B,KAAK2B,OACfC,UAAW5B,KAAK4B,aAKpC,EAvDAC,EADShC,EACKY,OAAOqB,EAAWC,UAChCF,EAFShC,EAEKmC,aAAa,CACvBF,EAAWC,SACXD,EAAWG,aACXH,EAAWI,gBACXJ,EAAWK,sBACXL,EAAWM,kBAGfP,EAVShC,EAUQwC,eAAe,CAC5BnC,yBAAyB"}