{"version":3,"file":"EcontextInput.js","sources":["../../../../../../src/components/Econtext/components/EcontextInput/EcontextInput.tsx"],"sourcesContent":["import { Fragment, h, VNode } from 'preact';\nimport { useRef, useState } from 'preact/hooks';\nimport PersonalDetails from '../../../internal/PersonalDetails/PersonalDetails';\nimport { useCoreContext } from '../../../../core/Context/CoreProvider';\nimport { econtextValidationRules } from '../../validate';\nimport { PersonalDetailsSchema } from '../../../../types/global-types';\nimport './EcontextInput.scss';\nimport FormInstruction from '../../../internal/FormInstruction';\nimport { ComponentMethodsRef } from '../../../internal/UIElement/types';\n\ninterface EcontextInputProps {\n    personalDetailsRequired?: boolean;\n    data?: PersonalDetailsSchema;\n    showPayButton: boolean;\n    payButton(config: any): VNode;\n    onChange?(data: any): void;\n    onSubmit?(state: any, component: any): void;\n    [key: string]: any;\n}\n\nexport default function EcontextInput({ personalDetailsRequired = true, data, onChange, showPayButton, payButton, ...props }: EcontextInputProps) {\n    const personalDetailsRef = useRef(null);\n    const setPersonalDetailsRef = ref => {\n        personalDetailsRef.current = ref;\n    };\n    const { i18n } = useCoreContext();\n\n    const [status, setStatus] = useState('ready');\n\n    /** An object by which to expose 'public' members to the parent UIElement */\n    const econtextRef = useRef<ComponentMethodsRef>({});\n    // Just call once\n    if (!Object.keys(econtextRef.current).length) {\n        props.setComponentRef?.(econtextRef.current);\n    }\n\n    econtextRef.current.showValidation = () => {\n        personalDetailsRef.current?.showValidation();\n    };\n\n    econtextRef.current.setStatus = setStatus;\n\n    return (\n        <div className=\"adyen-checkout__econtext-input__field\">\n            {personalDetailsRequired && (\n                <Fragment>\n                    <FormInstruction />\n                    <PersonalDetails\n                        data={data}\n                        requiredFields={['firstName', 'lastName', 'telephoneNumber', 'shopperEmail']}\n                        onChange={onChange}\n                        namePrefix=\"econtext\"\n                        setComponentRef={setPersonalDetailsRef}\n                        validationRules={econtextValidationRules}\n                    />\n                </Fragment>\n            )}\n            {showPayButton && payButton({ status, label: i18n.get('confirmPurchase') })}\n        </div>\n    );\n}\n"],"names":["EcontextInput","_param","personalDetailsRequired","data","onChange","showPayButton","payButton","props","_object_without_properties","personalDetailsRef","useRef","i18n","useCoreContext","status","setStatus","useState","econtextRef","Object","keys","current","length","setComponentRef","showValidation","h","div","className","Fragment","FormInstruction","PersonalDetails","requiredFields","namePrefix","ref","validationRules","econtextValidationRules","label","get"],"mappings":"kzBAoBe,SAASA,EAAcC,GAAA,IAAAC,wBAAEA,GAA0B,EAAIC,KAAEA,EAAIC,SAAEA,EAAQC,cAAEA,EAAaC,UAAEA,GAAjEL,EAA+EM,EAA/EC,EAAAP,EAAA,CAAEC,0BAAgCC,OAAMC,WAAUC,gBAAeC,cACnG,MAAMG,EAAqBC,EAAO,OAI5BC,KAAEA,GAASC,KAEVC,EAAQC,GAAaC,EAAS,SAG/BC,EAAcN,EAA4B,IAG5CH,IAAAA,EADCU,OAAOC,KAAKF,EAAYG,SAASC,SACb,QAArBb,EAAAA,EAAMc,2BAANd,GAAAA,EAAAA,KAAAA,EAAwBS,EAAYG,UASxC,OANAH,EAAYG,QAAQG,eAAiB,KACjCb,IAAAA,EAAAA,QAAAA,EAAAA,EAAmBU,eAAnBV,IAAAA,GAAAA,EAA4Ba,gBAAc,EAG9CN,EAAYG,QAAQL,UAAYA,EAG5BS,EAACC,MAAAA,CAAIC,UAAU,yCACVvB,GACGqB,EAACG,EAAAA,KACGH,EAACI,EAAAA,MACDJ,EAACK,EAAAA,CACGzB,KAAMA,EACN0B,eAAgB,CAAC,YAAa,WAAY,kBAAmB,gBAC7DzB,SAAUA,EACV0B,WAAW,WACXT,gBA9BUU,IAC1BtB,EAAmBU,QAAUY,CAAAA,EA8BbC,gBAAiBC,KAI5B5B,GAAiBC,EAAU,CAAEO,SAAQqB,MAAOvB,EAAKwB,IAAI,qBAGlE"}