{"version":3,"file":"Storage.js","sources":["../../../src/utils/Storage.ts"],"sourcesContent":["class NonPersistentStorage {\n    private storage;\n\n    constructor() {\n        this.storage = {};\n    }\n\n    get length() {\n        return Object.keys(this.storage).length;\n    }\n\n    key(index) {\n        return Object.keys(this.storage)[index];\n    }\n    getItem(keyName) {\n        return this.storage[keyName] || null;\n    }\n    setItem(keyName, keyValue) {\n        return (this.storage[keyName] = keyValue);\n    }\n    removeItem(keyName) {\n        delete this.storage[keyName];\n    }\n    clear() {\n        this.storage = {};\n    }\n}\n\nclass Storage<T> {\n    private readonly prefix = 'adyen-checkout__';\n    private readonly key: string;\n    private storage: globalThis.Storage | NonPersistentStorage;\n\n    constructor(key: string, storageType: 'sessionStorage' | 'localStorage') {\n        try {\n            this.storage = storageType ? window[storageType] : window.localStorage;\n            if (!this.storage) {\n                throw new Error('storage does not exist');\n            }\n        } catch (e) {\n            this.storage = new NonPersistentStorage();\n        }\n        this.key = this.prefix + key;\n    }\n\n    public get(): T {\n        try {\n            return JSON.parse(this.storage.getItem(this.key));\n        } catch (err) {\n            return null;\n        }\n    }\n\n    public set(value: T) {\n        this.storage.setItem(this.key, JSON.stringify(value));\n    }\n\n    public remove() {\n        this.storage.removeItem(this.key);\n    }\n\n    public clear() {\n        this.storage.clear();\n    }\n\n    public keyByIndex(index) {\n        return this.storage.key(index);\n    }\n\n    get length() {\n        return this.storage.length;\n    }\n}\n\nexport default Storage;\n"],"names":["NonPersistentStorage","length","Object","keys","this","storage","key","index","getItem","keyName","setItem","keyValue","removeItem","clear","constructor","_define_property","Storage","get","JSON","parse","err","set","value","stringify","remove","keyByIndex","storageType","prefix","window","localStorage","Error","e"],"mappings":"wHAAA,MAAMA,EAOF,UAAIC,GACA,OAAOC,OAAOC,KAAKC,KAAKC,SAASJ,MACrC,CAEAK,GAAAA,CAAIC,GACA,OAAOL,OAAOC,KAAKC,KAAKC,SAASE,EACrC,CACAC,OAAAA,CAAQC,GACJ,OAAOL,KAAKC,QAAQI,IAAY,IACpC,CACAC,OAAAA,CAAQD,EAASE,GACb,OAAQP,KAAKC,QAAQI,GAAWE,CACpC,CACAC,UAAAA,CAAWH,UACAL,KAAKC,QAAQI,EACxB,CACAI,KAAAA,GACIT,KAAKC,QAAU,CAAC,CACpB,CAtBAS,WAAAA,GAFAC,EAAAX,KAAQC,eAAR,GAGID,KAAKC,QAAU,CAAC,CACpB,EAuBJ,MAAMW,EAiBKC,GAAAA,GACH,IACI,OAAOC,KAAKC,MAAMf,KAAKC,QAAQG,QAAQJ,KAAKE,KAChD,CAAE,MAAOc,GACL,OAAO,IACX,CACJ,CAEOC,GAAAA,CAAIC,GACPlB,KAAKC,QAAQK,QAAQN,KAAKE,IAAKY,KAAKK,UAAUD,GAClD,CAEOE,MAAAA,GACHpB,KAAKC,QAAQO,WAAWR,KAAKE,IACjC,CAEOO,KAAAA,GACHT,KAAKC,QAAQQ,OACjB,CAEOY,UAAAA,CAAWlB,GACd,OAAOH,KAAKC,QAAQC,IAAIC,EAC5B,CAEA,UAAIN,GACA,OAAOG,KAAKC,QAAQJ,MACxB,CAtCAa,WAAAA,CAAYR,EAAaoB,GAJzBX,EAAAX,KAAiBuB,SAAS,oBAC1BZ,EAAAX,KAAiBE,WAAjB,GACAS,EAAAX,KAAQC,eAAR,GAGI,IAEI,GADAD,KAAKC,QAAUqB,EAAcE,OAAOF,GAAeE,OAAOC,cACrDzB,KAAKC,QACN,MAAM,IAAIyB,MAAM,yBAExB,CAAE,MAAOC,GACL3B,KAAKC,QAAU,IAAIL,CACvB,CACAI,KAAKE,IAAMF,KAAKuB,OAASrB,CAC7B"}