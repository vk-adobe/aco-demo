{"version":3,"file":"removeGiftCardFromCart.js","sources":["/@dropins/storefront-cart/src/api/applyGiftCardToCart/graphql/ApplyGiftCardToCartMutation.ts","/@dropins/storefront-cart/src/api/applyGiftCardToCart/applyGiftCardToCart.ts","/@dropins/storefront-cart/src/api/removeGiftCardFromCart/graphql/RemoveGiftCardFromCartMutation.ts","/@dropins/storefront-cart/src/api/removeGiftCardFromCart/removeGiftCardFromCart.ts"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CART_FRAGMENT } from '@/cart/api/graphql/CartFragment';\nimport { CART_ITEMS_PAGINATION_ARGUMENTS } from '@/cart/api/graphql/arguments';\n\nexport const APPLY_GIFT_CARD_ON_CART_MUTATION = `\n  mutation APPLY_GIFT_CARD_ON_CART_MUTATION($cartId: String!, $giftCardCode: String!, ${CART_ITEMS_PAGINATION_ARGUMENTS}) {\n applyGiftCardToCart(\n    input: {\n     cart_id: $cartId\n     gift_card_code: $giftCardCode\n    }\n  ) {\n    cart {\n      ...CART_FRAGMENT\n    }\n  }\n}\n${CART_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { state } from '@/cart/lib/state';\nimport { fetchGraphQl } from '@/cart/api';\nimport { handleFetchError } from '@/cart/lib/fetch-error';\nimport { CartModel } from '@/cart/data/models';\nimport { transformCart } from '@/cart/data/transforms';\nimport { events } from '@adobe-commerce/event-bus';\nimport { APPLY_GIFT_CARD_ON_CART_MUTATION } from './graphql/ApplyGiftCardToCartMutation';\nimport { publishCartUpdateEvents } from '@/cart/lib/acdl';\n\nexport const applyGiftCardToCart = async (\n  giftCardCode: string\n): Promise<CartModel | null> => {\n  const cartId = state.cartId;\n\n  if (!cartId) {\n    throw Error('Cart ID is not set');\n  }\n\n  return fetchGraphQl(APPLY_GIFT_CARD_ON_CART_MUTATION, {\n    variables: {\n      cartId,\n      giftCardCode,\n    },\n  }).then(({ errors, data }) => {\n    // handle errors\n    const _errors = [\n      ...(data?.applyGiftCardToCart?.user_errors ?? []),\n      ...(errors ?? []),\n    ];\n\n    if (_errors.length > 0) return handleFetchError(_errors);\n\n    const payload = transformCart(data.applyGiftCardToCart.cart);\n\n    // emit events\n    events.emit('cart/updated', payload);\n    events.emit('cart/data', payload);\n\n    if (payload) {\n      publishCartUpdateEvents(payload, [], state.locale ?? 'en-US');\n    }\n\n    return payload;\n  });\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { CART_FRAGMENT } from '@/cart/api/graphql/CartFragment';\nimport { CART_ITEMS_PAGINATION_ARGUMENTS } from '@/cart/api/graphql/arguments';\n\nexport const REMOVE_GIFT_CARD_ON_CART_MUTATION = `\n  mutation REMOVE_GIFT_CARD_ON_CART_MUTATION($cartId: String!, $giftCardCode: String!, ${CART_ITEMS_PAGINATION_ARGUMENTS}) {\n removeGiftCardFromCart(\n    input: {\n     cart_id: $cartId\n     gift_card_code: $giftCardCode\n    }\n  ) {\n    cart {\n      ...CART_FRAGMENT\n    }\n  }\n}\n${CART_FRAGMENT}\n`;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { state } from '@/cart/lib/state';\nimport { fetchGraphQl } from '@/cart/api';\nimport { handleFetchError } from '@/cart/lib/fetch-error';\nimport { CartModel } from '@/cart/data/models';\nimport { transformCart } from '@/cart/data/transforms';\nimport { events } from '@adobe-commerce/event-bus';\nimport { REMOVE_GIFT_CARD_ON_CART_MUTATION } from './graphql/RemoveGiftCardFromCartMutation';\nimport { publishCartUpdateEvents } from '@/cart/lib/acdl';\n\nexport const removeGiftCardFromCart = async (\n  giftCardCode: string\n): Promise<CartModel | null> => {\n  const cartId = state.cartId;\n\n  if (!cartId) {\n    throw Error('Cart ID is not set');\n  }\n\n  return fetchGraphQl(REMOVE_GIFT_CARD_ON_CART_MUTATION, {\n    variables: {\n      cartId,\n      giftCardCode,\n    },\n  }).then(({ errors, data }) => {\n    // handle errors\n    const _errors = [\n      ...(data?.addProductsToCart?.user_errors ?? []),\n      ...(errors ?? []),\n    ];\n\n    if (_errors.length > 0) return handleFetchError(_errors);\n\n    const payload = transformCart(data.removeGiftCardFromCart.cart);\n\n    // emit events\n    events.emit('cart/updated', payload);\n    events.emit('cart/data', payload);\n\n    if (payload) {\n      publishCartUpdateEvents(payload, [], state.locale ?? 'en-US');\n    }\n\n    return payload;\n  });\n};\n"],"names":["APPLY_GIFT_CARD_ON_CART_MUTATION","CART_ITEMS_PAGINATION_ARGUMENTS","CART_FRAGMENT","applyGiftCardToCart","giftCardCode","cartId","state","fetchGraphQl","errors","data","_errors","_a","handleFetchError","payload","transformCart","events","publishCartUpdateEvents","REMOVE_GIFT_CARD_ON_CART_MUTATION","removeGiftCardFromCart"],"mappings":"gOAoBO,MAAMA,EAAmC;AAAA,wFACwCC,CAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYrHC,CAAa;AAAA,ECPFC,EAAsB,MACjCC,GAC8B,CAC9B,MAAMC,EAASC,EAAM,OAErB,GAAI,CAACD,EACH,MAAM,MAAM,oBAAoB,EAGlC,OAAOE,EAAaP,EAAkC,CACpD,UAAW,CACT,OAAAK,EACA,aAAAD,CAAA,CAEH,CAAA,EAAE,KAAK,CAAC,CAAE,OAAAI,EAAQ,KAAAC,KAAW,OAE5B,MAAMC,EAAU,CACd,KAAIC,EAAAF,GAAA,YAAAA,EAAM,sBAAN,YAAAE,EAA2B,cAAe,CAAC,EAC/C,GAAIH,GAAU,CAAA,CAChB,EAEA,GAAIE,EAAQ,OAAS,EAAG,OAAOE,EAAiBF,CAAO,EAEvD,MAAMG,EAAUC,EAAcL,EAAK,oBAAoB,IAAI,EAGpD,OAAAM,EAAA,KAAK,eAAgBF,CAAO,EAC5BE,EAAA,KAAK,YAAaF,CAAO,EAE5BA,GACFG,EAAwBH,EAAS,CAAA,EAAIP,EAAM,QAAU,OAAO,EAGvDO,CAAA,CACR,CACH,ECzCaI,EAAoC;AAAA,yFACwChB,CAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYtHC,CAAa;AAAA,ECPFgB,EAAyB,MACpCd,GAC8B,CAC9B,MAAMC,EAASC,EAAM,OAErB,GAAI,CAACD,EACH,MAAM,MAAM,oBAAoB,EAGlC,OAAOE,EAAaU,EAAmC,CACrD,UAAW,CACT,OAAAZ,EACA,aAAAD,CAAA,CAEH,CAAA,EAAE,KAAK,CAAC,CAAE,OAAAI,EAAQ,KAAAC,KAAW,OAE5B,MAAMC,EAAU,CACd,KAAIC,EAAAF,GAAA,YAAAA,EAAM,oBAAN,YAAAE,EAAyB,cAAe,CAAC,EAC7C,GAAIH,GAAU,CAAA,CAChB,EAEA,GAAIE,EAAQ,OAAS,EAAG,OAAOE,EAAiBF,CAAO,EAEvD,MAAMG,EAAUC,EAAcL,EAAK,uBAAuB,IAAI,EAGvD,OAAAM,EAAA,KAAK,eAAgBF,CAAO,EAC5BE,EAAA,KAAK,YAAaF,CAAO,EAE5BA,GACFG,EAAwBH,EAAS,CAAA,EAAIP,EAAM,QAAU,OAAO,EAGvDO,CAAA,CACR,CACH"}