{"version":3,"file":"Coupons.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Add.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Minus.svg","/@dropins/storefront-cart/src/components/Coupons/Coupons.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Add_Base\", \"data-name\": \"Icon \\\\u2013 Add \\\\u2013 Base\", xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { id: \"Large\" }, /* @__PURE__ */ React.createElement(\"rect\", { id: \"Placement_area\", \"data-name\": \"Placement area\", width: 24, height: 24, fill: \"#fff\", opacity: 0 }), /* @__PURE__ */ React.createElement(\"g\", { id: \"Add_icon\", \"data-name\": \"Add icon\", transform: \"translate(9.734 9.737)\" }, /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_579\", \"data-name\": \"Line 579\", y2: 12.7, transform: \"translate(2.216 -4.087)\", fill: \"none\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_580\", \"data-name\": \"Line 580\", x2: 12.7, transform: \"translate(-4.079 2.263)\", fill: \"none\", stroke: \"currentColor\" }))));\nexport default SvgAdd;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgMinus = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.3332 11.75H6.6665\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\", vectorEffect: \"non-scaling-stroke\", fill: \"none\", stroke: \"currentColor\" }));\nexport default SvgMinus;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useRef } from 'preact/compat';\nimport { classes, VComponent, getFormValues } from '@adobe-commerce/elsie/lib';\nimport { Accordion, AccordionSection } from '@adobe-commerce/elsie/components';\nimport { Add, Minus, Coupon } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport '@/cart/components/Coupons/Coupons.css';\n\nexport interface CouponsProps extends HTMLAttributes<HTMLDivElement> {\n  accordionSectionTitle?: string;\n  accordionSectionIcon?: string;\n  couponCodeField?: VNode<HTMLAttributes<HTMLInputElement>>;\n  applyCouponsButton?: VNode<HTMLAttributes<HTMLButtonElement>>;\n  appliedCoupons?: VNode<HTMLAttributes<HTMLDivElement>>;\n  error?: VNode<HTMLAttributes<HTMLDivElement>>;\n  onApplyCoupon?: (formData: any) => void;\n}\n\nexport const Coupons: FunctionComponent<CouponsProps> = ({\n  accordionSectionTitle,\n  accordionSectionIcon,\n  className,\n  children,\n  couponCodeField,\n  applyCouponsButton,\n  appliedCoupons,\n  error,\n  onApplyCoupon,\n  ...props\n}) => {\n  const couponFormRef = useRef<HTMLFormElement>(null);\n\n  const dictionary = useText({\n    couponTitle: 'Cart.PriceSummary.coupon.title',\n  });\n\n  const onSubmitCoupons = (e: Event) => {\n    e.preventDefault();\n\n    const formData = getFormValues(couponFormRef.current!);\n\n    onApplyCoupon?.(formData);\n\n    const input = couponFormRef?.current?.querySelector('input');\n    if (input) {\n      input.value = '';\n    }\n  };\n\n  return (\n    <div\n      {...props}\n      data-testid=\"cart-coupons\"\n      className={classes(['cart-coupons', className])}\n    >\n      <Accordion\n        data-testid=\"coupon-code\"\n        className={classes(['cart-coupons__accordion'])}\n        actionIconPosition=\"right\"\n        iconOpen={Add}\n        iconClose={Minus}\n      >\n        <AccordionSection\n          title={accordionSectionTitle ?? dictionary.couponTitle}\n          iconLeft={accordionSectionIcon ?? Coupon}\n          showIconLeft={true}\n          renderContentWhenClosed={false}\n          data-testid=\"coupon-code-accordion-section\"\n          className={classes(['cart-coupons__accordion-section'])}\n        >\n          <form\n            data-testid=\"coupon-code-form\"\n            className={classes(['coupon-code-form--edit'])}\n            ref={couponFormRef}\n          >\n            <div className={classes(['coupon-code-form__action'])}>\n              {couponCodeField && (\n                <VComponent\n                  node={couponCodeField}\n                  className={classes(['coupon-code-form__codes'])}\n                />\n              )}\n              {applyCouponsButton && (\n                <VComponent\n                  node={applyCouponsButton}\n                  className={classes(['coupon-code-form--button'])}\n                  onClick={onSubmitCoupons}\n                  type=\"submit\"\n                />\n              )}\n            </div>\n          </form>\n\n          {error && (\n            <VComponent\n              node={error}\n              className={classes(['coupon-code-form__error'])}\n            />\n          )}\n\n          {appliedCoupons && (\n            <VComponent\n              node={appliedCoupons}\n              className={classes(['coupon-code-form__applied'])}\n            />\n          )}\n        </AccordionSection>\n      </Accordion>\n    </div>\n  );\n};\n"],"names":["SvgAdd","props","React","SvgClose","SvgMinus","Coupons","accordionSectionTitle","accordionSectionIcon","className","children","couponCodeField","applyCouponsButton","appliedCoupons","error","onApplyCoupon","couponFormRef","useRef","dictionary","useText","onSubmitCoupons","e","formData","getFormValues","input","_a","jsx","classes","Accordion","Add","Minus","jsxs","AccordionSection","Coupon","VComponent"],"mappings":"icACA,MAAMA,EAAUC,GAA0BC,EAAM,cAAc,MAAO,CAAE,GAAI,gBAAiB,YAAa,gCAAiC,MAAO,6BAA8B,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,GAAGD,GAAyBC,EAAM,cAAc,IAAK,CAAE,GAAI,OAAS,EAAkBA,EAAM,cAAc,OAAQ,CAAE,GAAI,iBAAkB,YAAa,iBAAkB,MAAO,GAAI,OAAQ,GAAI,KAAM,OAAQ,QAAS,CAAG,CAAA,EAAmBA,EAAM,cAAc,IAAK,CAAE,GAAI,WAAY,YAAa,WAAY,UAAW,wBAAwB,EAAoBA,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,GAAI,WAAY,YAAa,WAAY,GAAI,KAAM,UAAW,0BAA2B,KAAM,OAAQ,OAAQ,cAAgB,CAAA,EAAmBA,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,GAAI,WAAY,YAAa,WAAY,GAAI,KAAM,UAAW,0BAA2B,KAAM,OAAQ,OAAQ,eAAgB,CAAC,CAAC,CAAC,ECAt9BC,EAAYF,GAA0BC,EAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAK,EAAoBC,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,cAAc,CAAE,EAAmBA,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,eAAgB,CAAC,ECAjdE,EAAYH,GAA0BC,EAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAO,EAAkBC,EAAM,cAAc,OAAQ,CAAE,EAAG,wBAAyB,YAAa,IAAK,cAAe,SAAU,eAAgB,QAAS,aAAc,qBAAsB,KAAM,OAAQ,OAAQ,cAAc,CAAE,CAAC,ECkCjYG,EAA2C,CAAC,CACvD,sBAAAC,EACA,qBAAAC,EACA,UAAAC,EACA,SAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,eAAAC,EACA,MAAAC,EACA,cAAAC,EACA,GAAGb,CACL,IAAM,CACE,MAAAc,EAAgBC,EAAwB,IAAI,EAE5CC,EAAaC,EAAQ,CACzB,YAAa,gCAAA,CACd,EAEKC,EAAmBC,GAAa,OACpCA,EAAE,eAAe,EAEX,MAAAC,EAAWC,EAAcP,EAAc,OAAQ,EAErDD,GAAA,MAAAA,EAAgBO,GAEhB,MAAME,GAAQC,EAAAT,GAAA,YAAAA,EAAe,UAAf,YAAAS,EAAwB,cAAc,SAChDD,IACFA,EAAM,MAAQ,GAElB,EAGE,OAAAE,EAAC,MAAA,CACE,GAAGxB,EACJ,cAAY,eACZ,UAAWyB,EAAQ,CAAC,eAAgBlB,CAAS,CAAC,EAE9C,SAAAiB,EAACE,EAAA,CACC,cAAY,cACZ,UAAWD,EAAQ,CAAC,yBAAyB,CAAC,EAC9C,mBAAmB,QACnB,SAAUE,EACV,UAAWC,EAEX,SAAAC,EAACC,EAAA,CACC,MAAOzB,GAAyBW,EAAW,YAC3C,SAAUV,GAAwByB,EAClC,aAAc,GACd,wBAAyB,GACzB,cAAY,gCACZ,UAAWN,EAAQ,CAAC,iCAAiC,CAAC,EAEtD,SAAA,CAAAD,EAAC,OAAA,CACC,cAAY,mBACZ,UAAWC,EAAQ,CAAC,wBAAwB,CAAC,EAC7C,IAAKX,EAEL,WAAC,MAAI,CAAA,UAAWW,EAAQ,CAAC,0BAA0B,CAAC,EACjD,SAAA,CACChB,GAAAe,EAACQ,EAAA,CACC,KAAMvB,EACN,UAAWgB,EAAQ,CAAC,yBAAyB,CAAC,CAAA,CAChD,EAEDf,GACCc,EAACQ,EAAA,CACC,KAAMtB,EACN,UAAWe,EAAQ,CAAC,0BAA0B,CAAC,EAC/C,QAASP,EACT,KAAK,QAAA,CAAA,CACP,CAEJ,CAAA,CAAA,CACF,EAECN,GACCY,EAACQ,EAAA,CACC,KAAMpB,EACN,UAAWa,EAAQ,CAAC,yBAAyB,CAAC,CAAA,CAChD,EAGDd,GACCa,EAACQ,EAAA,CACC,KAAMrB,EACN,UAAWc,EAAQ,CAAC,2BAA2B,CAAC,CAAA,CAAA,CAClD,CAAA,CAAA,CAEJ,CAAA,CACF,CACF,CAEJ","x_google_ignoreList":[0,1,2]}