{"version":3,"file":"ProductDetails.js","sources":["/@dropins/storefront-pdp/src/components/Product/Product.tsx","/@dropins/storefront-pdp/src/components/GalleryGrid/GalleryGrid.tsx","/@dropins/storefront-pdp/src/containers/ProductDetails/ProductDetails.tsx"],"sourcesContent":["/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nimport { Carousel, GalleryGrid, Overlay, Zoom } from '@/pdp/components';\nimport '@/pdp/components/Product/Product.css';\n\nimport { CarouselConfig } from '@/pdp/containers';\n\ninterface ProductCarouselConfig extends CarouselConfig {\n  thumbnails: VNode[];\n}\n\nexport interface ProductProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  title?: VNode;\n  breadcrumbs?: VNode;\n  galleryContent?: VNode;\n  infoContent?: VNode;\n  productContent?: VNode;\n  shortDescription?: VNode;\n  description?: VNode;\n  attributes?: VNode;\n  images: VNode[];\n  options?: VNode;\n  sku?: VNode;\n  price?: VNode;\n  specialPrice?: VNode;\n  outOfStock: boolean;\n  actions?: VNode;\n  quantity?: VNode;\n  carouselConfig?: ProductCarouselConfig;\n  zoomType?: 'zoom' | 'overlay';\n  closeButton?: boolean;\n}\n\nexport const Product: FunctionComponent<ProductProps> = ({\n  title,\n  breadcrumbs,\n  galleryContent,\n  infoContent,\n  productContent,\n  sku,\n  outOfStock,\n  shortDescription,\n  description,\n  attributes,\n  images,\n  options,\n  price,\n  specialPrice,\n  className,\n  children,\n  quantity,\n  actions,\n  carouselConfig,\n  zoomType = 'overlay',\n  closeButton = true,\n  ...props\n}) => {\n  // i18n\n  const RegularPriceLabel = useText('PDP.Product.RegularPrice.label').label;\n  const SpecialPriceLabel = useText('PDP.Product.SpecialPrice.label').label;\n  const OutOfStockLabel = useText('PDP.Product.OutOfStock.label').label;\n  const ImagesLabel = useText('PDP.Product.Image.label').label;\n\n  const [zoom, setZoom] = useState<number | null>(null);\n\n  const galleryImages = images?.length ? (\n    images.map((image, key) => {\n      const alt =\n        title?.props?.children &&\n        ImagesLabel?.replace('{product}', title.props.children.toString())\n          .replace('{key}', String(key + 1))\n          .replace('{total}', String(images.length));\n      return zoomType === 'zoom' ? (\n        <Zoom closeButton={closeButton}>\n          <VComponent\n            key={key}\n            node={image}\n            loading={key === 0 ? 'eager' : 'lazy'}\n            alt={alt}\n          />\n        </Zoom>\n      ) : (\n        <VComponent\n          key={key}\n          node={image}\n          loading={key === 0 ? 'eager' : 'lazy'}\n          alt={alt}\n          onClick={() => setZoom(key)}\n        />\n      );\n    })\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  const localThumbnailsImages = carouselConfig?.thumbnails?.length ? (\n    carouselConfig.thumbnails.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={carouselConfig?.thumbnailsLoadingMode || 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))\n        }\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-product', className])}>\n      {breadcrumbs && (\n        <VComponent node={breadcrumbs} className=\"pdp-product__breadcrumbs\" />\n      )}\n      <div className=\"pdp-product__column-container pdp-product__gallery-column\">\n        <div className=\"pdp-product__column-body\">\n          {carouselConfig?.controls?.desktop ? (\n            <Carousel\n              className=\"pdp-product__overlay__carousel\"\n              arrows={images?.length > 1}\n              controls={\n                images?.length > 1 ? carouselConfig.controls.desktop : 'dots'\n              }\n              arrowsOnMainImage={carouselConfig?.arrowsOnMainImage}\n              loop={carouselConfig?.loopable && images?.length > 1}\n              peak={\n                (carouselConfig?.thumbnails?.length > 1 &&\n                  carouselConfig?.peak?.desktop) ||\n                false\n              }\n              gap={carouselConfig?.gap || null}\n              width=\"100%\"\n              height=\"100%\"\n              defaultIndex={zoom || 0}\n              thumbnails={localThumbnailsImages}\n            >\n              {galleryImages}\n            </Carousel>\n          ) : (\n            <GalleryGrid className=\"pdp-product__images\" gap=\"small\">\n              {galleryImages}\n            </GalleryGrid>\n          )}\n        </div>\n        {galleryContent && (\n          <VComponent\n            node={galleryContent}\n            className=\"pdp-product__gallery-content\"\n          />\n        )}\n      </div>\n\n      <div className=\"pdp-product__column-container pdp-product__content-column\">\n        <div className=\"pdp-product__column-body\">\n          <div className=\"pdp-product__header\">\n            {title && (\n              <VComponent node={title} className=\"pdp-product__title\" />\n            )}\n\n            {sku && <VComponent node={sku} className=\"pdp-product__sku\" />}\n          </div>\n\n          <div className=\"pdp-product__prices\">\n            {specialPrice && (\n              <VComponent\n                node={specialPrice}\n                className={classes([\n                  'pdp-product__price-special',\n                  'pdp-product__price',\n                ])}\n                aria-label={SpecialPriceLabel}\n                role=\"text\"\n              />\n            )}\n            {price && (\n              <VComponent\n                node={price}\n                className={classes([\n                  'pdp-product__price-regular',\n                  'pdp-product__price--grey',\n                ])}\n                aria-label={RegularPriceLabel}\n                role=\"text\"\n              />\n            )}\n          </div>\n\n          {/* Small Screen Gallery */}\n          {carouselConfig?.controls?.mobile &&\n          carouselConfig?.controls?.mobile === 'thumbnailsRow' ? (\n            <Carousel\n              className=\"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails\"\n              width=\"100%\"\n              height=\"auto\"\n              arrows={images?.length > 1}\n              controls={images?.length > 1 ? 'thumbnailsRow' : null}\n              loop={carouselConfig?.loopable && images?.length > 1}\n              peak={\n                (carouselConfig?.thumbnails?.length > 1 &&\n                  carouselConfig?.peak?.mobile) ||\n                false\n              }\n              gap={carouselConfig?.gap || null}\n              thumbnails={localThumbnailsImages}\n            >\n              {galleryImages}\n            </Carousel>\n          ) : (\n            <Carousel\n              className=\"pdp-product__images pdp-product__images--carousel\"\n              peak={carouselConfig?.peak?.mobile && images?.length > 1}\n              gap={carouselConfig?.gap || null}\n              width=\"100%\"\n              height=\"auto\"\n              arrows={images?.length > 1}\n              controls={images?.length > 1 ? 'dots' : null}\n              loop={carouselConfig?.loopable && images?.length > 1}\n            >\n              {galleryImages}\n            </Carousel>\n          )}\n\n          <div\n            className={classes([\n              'pdp-product__actions',\n              [`pdp-product__actions--out-of-stock`, outOfStock],\n            ])}\n          >\n            {outOfStock && (\n              <div className=\"pdp-product__out-of-stock__text\">\n                {OutOfStockLabel}\n              </div>\n            )}\n\n            {options && (\n              <VComponent\n                node={options}\n                className={classes(['pdp-product__options'])}\n              />\n            )}\n\n            {quantity && (\n              <div className=\"pdp-product__quantity\">\n                <VComponent node={quantity} />\n              </div>\n            )}\n\n            {actions && (\n              <VComponent\n                node={actions}\n                className={classes(['pdp-product__buttons'])}\n              />\n            )}\n          </div>\n\n          {shortDescription && (\n            <VComponent\n              node={shortDescription}\n              className={classes(['pdp-product__short_description'])}\n            />\n          )}\n\n          {description && (\n            <VComponent\n              node={description}\n              className={classes(['pdp-product__description'])}\n            />\n          )}\n\n          {attributes ? (\n            <div className=\"pdp-product__attributes\">{attributes}</div>\n          ) : null}\n        </div>\n        {infoContent && (\n          <VComponent\n            node={infoContent}\n            className=\"pdp-product__info-content\"\n          />\n        )}\n      </div>\n\n      {productContent && (\n        <VComponent node={productContent} className=\"pdp-product__content\" />\n      )}\n\n      {/* Zoom Overlay */}\n      {zoom === null ? null : (\n        <Overlay\n          className=\"pdp-product__overlay\"\n          onClose={() => setZoom(null)}\n          centered\n        >\n          <Carousel\n            className=\"pdp-product__overlay__carousel\"\n            arrows={images?.length > 1}\n            width=\"100%\"\n            height=\"100%\"\n            defaultIndex={zoom || 0}\n            loop={carouselConfig?.loopable && images?.length > 1}\n            controls={images?.length > 1 ? 'dots' : null}\n            isZoomed\n          >\n            {galleryImages}\n          </Carousel>\n        </Overlay>\n      )}\n    </div>\n  );\n};\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, Children } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/pdp/components/GalleryGrid/GalleryGrid.css';\n\nexport interface GalleryGridProps extends HTMLAttributes<HTMLDivElement> {\n  children: VNode[] | VNode;\n  gap?: 'small' | 'medium' | 'large' | null;\n  style?: Record<string, string | number>;\n}\n\nexport const GalleryGrid: FunctionComponent<GalleryGridProps> = ({\n  children,\n  gap = null,\n  className,\n  style,\n  ...props\n}) => {\n  const count = Children.count(children);\n\n  return (\n    <div\n      {...props}\n      className={classes(['pdp-gallery-grid', className])}\n      style={{\n        '--gap': gap ? `var(--spacing-${gap})` : '0px',\n        ...style,\n      }}\n    >\n      {Children.map(\n        children,\n        (child: VNode<HTMLAttributes<HTMLElement>>, key) => (\n          <div key={count + key} className=\"pdp-gallery-grid__item\">\n            <VComponent\n              key={child.props.src}\n              node={child}\n              loading={key === 0 ? 'eager' : 'lazy'}\n            />\n          </div>\n        )\n      )}\n    </div>\n  );\n};\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport {\n  HTMLAttributes,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n} from 'preact/compat';\n\nimport {\n  Container,\n  toLanguageTag,\n  SlotProps,\n  SlotMethod,\n  Slot,\n  ResolveImageUrlOptions,\n} from '@adobe-commerce/elsie/lib';\n\nimport {\n  Button,\n  Icon,\n  ButtonProps,\n  Image,\n  Incrementer,\n  Breadcrumbs,\n} from '@adobe-commerce/elsie/components';\nimport { Product, Swatches, PriceRange, Option } from '@/pdp/components';\nimport { config, fetchProductData } from '@/pdp/api';\nimport { events } from '@adobe-commerce/event-bus';\nimport { Lang, useText } from '@adobe-commerce/elsie/i18n';\nimport { isDateValid, toDateString } from '@/pdp/lib/date';\nimport {\n  setUrlParams,\n  getValidatedQuantityFromUrl,\n} from '@/pdp/lib/url-params';\nimport { publishProductPageViewEvent } from '@/pdp/lib/acdl';\nimport { ProductModel, Option as ProductOption } from '@/pdp/data/models';\nimport { transformProductData } from '@/pdp/data/transforms/product-transform';\n\ntype IconType = keyof typeof import('@adobe-commerce/elsie/icons');\n\n/** @deprecated This type is part of the deprecated ProductDetails component. */\nexport type Values = {\n  sku: string;\n  quantity: number;\n  optionsUIDs?: string[];\n};\n\n/** @deprecated This type is part of the deprecated ProductDetails component. */\ntype DefaultSlotContext = {\n  data: ProductModel | null;\n  values: Values;\n  valid: boolean;\n};\n\n/** @deprecated This type is part of the deprecated ProductDetails component. */\nexport type CarouselConfig = {\n  controls?: {\n    desktop?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n    mobile?: 'dots' | 'thumbnailsRow' | null;\n  };\n  arrowsOnMainImage?: boolean;\n  loopable?: boolean;\n  peak?: {\n    desktop: boolean;\n    mobile: boolean;\n  };\n  gap?: 'small' | 'medium' | 'large' | null;\n  thumbnailsLoadingMode?: 'lazy' | 'eager';\n  imageParams?: ResolveImageUrlOptions;\n  thumbnailParams?: ResolveImageUrlOptions;\n};\n\n/** @deprecated This type is part of the deprecated ProductDetails component. */\nexport type OptionsConfig = {\n  anchorOptions?: string[];\n};\n\n/** @deprecated This interface is part of the deprecated ProductDetails component. */\nexport interface ProductDetailsProps extends HTMLAttributes<HTMLDivElement> {\n  sku: string;\n  productData?: ProductModel;\n  hideSku?: boolean;\n  hideQuantity?: boolean;\n  hideShortDescription?: boolean;\n  hideDescription?: boolean;\n  hideAttributes?: boolean;\n  hideSelectedOptionValue?: boolean;\n  hideURLParams?: boolean;\n  slots?: {\n    Title?: SlotProps<DefaultSlotContext>;\n\n    SKU?: SlotProps<DefaultSlotContext>;\n\n    RegularPrice?: SlotProps<DefaultSlotContext>;\n\n    SpecialPrice?: SlotProps<DefaultSlotContext>;\n\n    Options?: SlotProps<DefaultSlotContext>;\n\n    Quantity?: SlotProps<DefaultSlotContext>;\n\n    Actions?: SlotProps<\n      DefaultSlotContext & {\n        appendButton: SlotMethod<\n          Omit<ButtonProps, 'icon'> & {\n            text?: string;\n            icon?: IconType;\n          }\n        >;\n      }\n    >;\n\n    ShortDescription?: SlotProps<DefaultSlotContext>;\n\n    Description?: SlotProps<DefaultSlotContext>;\n\n    Attributes?: SlotProps<DefaultSlotContext>;\n\n    Breadcrumbs?: SlotProps<\n      DefaultSlotContext & {\n        setSeparator: SlotMethod<IconType>;\n\n        appendLink: SlotMethod<\n          HTMLAttributes<HTMLAnchorElement> & { text?: string }\n        >;\n\n        appendHTMLElement: SlotMethod<HTMLElement>;\n      }\n    >;\n\n    GalleryContent?: SlotProps<DefaultSlotContext>;\n\n    InfoContent?: SlotProps<DefaultSlotContext>;\n\n    Content?: SlotProps<DefaultSlotContext>;\n  };\n  carousel?: CarouselConfig;\n  optionsConfig?: OptionsConfig;\n  useACDL?: boolean;\n  onAddToCart?: (values: Values) => void;\n  zoomType?: 'zoom' | 'overlay';\n  closeButton?: boolean;\n  disableDropdownPreselection?: boolean;\n}\n\n/**\n * @deprecated This container has been deprecated and will be removed in a future release.\n * Please use the different composable containers to build your product details page.xs\n */\nexport const ProductDetails: Container<\n  ProductDetailsProps,\n  ProductModel | null\n> = ({\n  sku,\n  hideSku,\n  hideQuantity,\n  hideShortDescription,\n  hideDescription,\n  hideAttributes,\n  hideURLParams,\n  hideSelectedOptionValue,\n  slots,\n  children,\n  initialData,\n  carousel,\n  optionsConfig,\n  useACDL,\n  onAddToCart,\n  zoomType,\n  closeButton = true,\n  disableDropdownPreselection,\n  ...props\n}) => {\n  // i18n\n  const AddToCartLabel = useText('PDP.Product.AddToCart.label').label;\n  const IncrementerLabel = useText('PDP.Product.Incrementer.label').label;\n  const DetailsLabel = useText('PDP.Product.Details.label').label;\n  const ChooseOptionLabel = useText('PDP.Swatches.ChooseOption.label').label;\n\n  // TODO: Investigate if the \"|| 'en-US' \" is really necessary\n  const [locale, setLocale] = useState<Lang>(\n    (config.getConfig().defaultLocale as Lang) || 'en-US'\n  );\n\n  const [selectionsToUpdate, setSelectionsToUpdate] = useState<Option[]>();\n\n  const [data = null, setData] = useState(initialData);\n\n  const [values, setValues] = useState<Values>(() => {\n    const initialQuantity = getValidatedQuantityFromUrl(1); // Default quantity to 1\n\n    const defaultValues: Values = {\n      sku,\n      quantity: initialQuantity,\n    };\n\n    if (data?.optionUIDs) {\n      defaultValues.optionsUIDs = data.optionUIDs;\n    }\n    return defaultValues;\n  });\n\n  // the context is invalid for a configurable product that doesn't have all the options selected\n  const [valid, setValid] = useState(() => {\n    return !(\n      data?.options &&\n      data?.options?.length > 0 &&\n      data?.optionUIDs?.length !== data?.options.length\n    );\n  });\n\n  const defaultSlotContext: DefaultSlotContext = { data, values, valid };\n\n  function hasProductViewOptionValueProduct(options: ProductOption[]) {\n    return options?.some(\n      (option) => option?.typename === 'ProductViewOptionValueProduct'\n    );\n  }\n\n  useEffect(() => {\n    const dataEvent = events.on('pdp/data', (payload) => {\n      if (payload) {\n        setData(payload);\n        // Preserve the current quantity value when updating from pdp/data event\n        setValues((prev: Values) => ({\n          ...prev,\n          sku: payload.sku,\n          optionsUIDs: payload.optionUIDs,\n        }));\n      }\n    });\n\n    // @ts-ignore - Type error with event bus events\n    const updateDataEvent = events.on(\n      'pdp/setValues',\n      (payload: Partial<Values>) => {\n        setValues((prev: Values) => ({ ...prev, ...payload }));\n      }\n    );\n\n    return () => {\n      updateDataEvent?.off();\n      dataEvent?.off();\n    };\n  }, []);\n\n  // Locale\n  useEffect(() => {\n    const localeEvent = events.on('locale', (payload: string) => {\n      if (payload === locale) return;\n\n      setLocale(payload as Lang);\n\n      fetchProductData(sku, {\n        preselectFirstOption: !disableDropdownPreselection,\n        anchors: optionsConfig?.anchorOptions,\n      }).then(setData);\n    });\n    return () => {\n      localeEvent?.off();\n    };\n  }, [disableDropdownPreselection, locale, optionsConfig?.anchorOptions, sku]);\n\n  useEffect(() => {\n    if (useACDL && initialData && Object.keys(initialData).length > 0) {\n      publishProductPageViewEvent(initialData);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [initialData]);\n\n  // Callbacks\n  const handleOnValues = useCallback((newValues: Partial<Values>) => {\n    setValues((prev) => ({ ...prev, ...newValues }));\n  }, []);\n\n  useEffect(() => {\n    events.emit('pdp/values', values);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(values)]);\n\n  const handleOptionSelected = useCallback(\n    async (selections: { [id: string]: { label: string; value: string } }) => {\n      // options Selected\n      let optionsUIDs = Object.entries(selections)\n        .filter(([_, value]) => value.label !== ChooseOptionLabel) // eslint-disable-line no-unused-vars\n        .map(([id, _]) => selections[id].value) // eslint-disable-line no-unused-vars\n        .filter((element) => element !== undefined);\n\n      // set optionUIDs to URL params\n      // ?optionsUIDs=1,2,3\n      // only set the URL params if the hideURLParams is not set to true and the product is not a bundle type\n      if (\n        !hideURLParams &&\n        data?.options &&\n        !hasProductViewOptionValueProduct(data.options)\n      ) {\n        setUrlParams({ optionsUIDs: optionsUIDs.join(',') });\n      }\n\n      // update state\n      handleOnValues({ optionsUIDs });\n      setValid(optionsUIDs?.length === data?.options?.length);\n\n      // get refined product data and update state\n      const next = await fetchProductData(sku, {\n        anchors: optionsConfig?.anchorOptions,\n        isBundle: data?.isBundle,\n        optionsUIDs,\n        preselectFirstOption: !disableDropdownPreselection,\n      });\n\n      setData(next);\n\n      // special processing for anchor options (options that should not be refined when other options are selected)\n      if (optionsConfig?.anchorOptions?.length) {\n        processUpdates(next, optionsUIDs);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [sku]\n  );\n\n  const processUpdates = useCallback(\n    (next: ProductModel | null, previousOptionsUIDs: string[]) => {\n      const updatedOptionsUIDs = next?.optionUIDs ?? [];\n      const haveSameValues = previousOptionsUIDs.every((item) =>\n        updatedOptionsUIDs.includes(item)\n      );\n      if (!haveSameValues) {\n        setSelectionsToUpdate(next?.options);\n        handleOnValues({ optionsUIDs: updatedOptionsUIDs });\n        setValid(updatedOptionsUIDs?.length === next?.options?.length);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [sku]\n  );\n\n  const handleOnErrors = useCallback((_errors: { [id: string]: string }) => {\n    if (Object.keys(_errors).length !== 0) setValid(false);\n  }, []);\n\n  // Product Attributes\n  const attributes = useMemo(() => {\n    return data?.attributes?.map(({ label, value }, key: number) => {\n      const __html = isDateValid(value)\n        ? toDateString(value, locale)\n        : value.toString();\n\n      return (\n        <li key={key}>\n          {/* eslint-disable-next-line react/no-danger */}\n          {label}: <span dangerouslySetInnerHTML={{ __html }} />\n        </li>\n      );\n    });\n  }, [data?.attributes, locale]);\n\n  const quantity =\n    !hideQuantity && data?.inStock ? (\n      <Slot\n        name=\"Quantity\"\n        slot={slots?.Quantity}\n        context={{ ...defaultSlotContext }}\n      >\n        <Incrementer\n          key=\"quantity\"\n          name=\"quantity\"\n          defaultValue={values.quantity.toString()}\n          value={values.quantity.toString()}\n          min={1}\n          aria-label={IncrementerLabel}\n          className=\"pdp-product__quantity\"\n          onValue={(quantity) => {\n            const quantityValue = Number(quantity);\n            handleOnValues({ quantity: quantityValue });\n\n            // Add quantity to URL parameters if not set to hide\n            if (!hideURLParams && data?.options) {\n              // Only update URL if the product is not a bundle type\n              if (!hasProductViewOptionValueProduct(data.options)) {\n                setUrlParams({ quantity: quantityValue });\n              }\n            }\n          }}\n        />\n      </Slot>\n    ) : undefined;\n\n  const renderOptions = () => {\n    if (data?.options) {\n      return (\n        <Slot\n          name=\"Options\"\n          slot={slots?.Options}\n          context={{ ...defaultSlotContext }}\n        >\n          <Swatches\n            selectedUIDs={values.optionsUIDs}\n            options={data.options}\n            defaultOptions={values.optionsUIDs}\n            selectionsToUpdate={selectionsToUpdate}\n            hideSelectedValue={hideSelectedOptionValue}\n            disablePreselections={disableDropdownPreselection}\n            onValues={handleOptionSelected}\n            onErrors={handleOnErrors}\n          />\n        </Slot>\n      );\n    }\n  };\n\n  return (\n    <div {...props}>\n      <Product\n        title={\n          <Slot\n            name=\"Title\"\n            slot={slots?.Title}\n            context={{ ...defaultSlotContext }}\n          >\n            {data?.name}\n          </Slot>\n        }\n        sku={\n          !hideSku ? (\n            <Slot\n              name=\"SKU\"\n              slot={slots?.SKU}\n              context={{ ...defaultSlotContext }}\n            >\n              {data?.sku}\n            </Slot>\n          ) : undefined\n        }\n        options={renderOptions()}\n        breadcrumbs={\n          slots?.Breadcrumbs && (\n            <Slot\n              name=\"Breadcrumbs\"\n              slot={slots?.Breadcrumbs}\n              context={{\n                ...defaultSlotContext,\n\n                setSeparator(callback) {\n                  this._registerMethod((...attrs) => {\n                    const nextSeparator = callback(...attrs);\n\n                    const separator = nextSeparator && (\n                      <Icon source={nextSeparator} />\n                    );\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        separator,\n                        children: [\n                          // eslint-disable-next-line react/jsx-key\n                          <Breadcrumbs\n                            separator={separator}\n                            categories={prev.categories}\n                          />,\n                        ],\n                      };\n                    });\n                  });\n                },\n\n                appendLink(callback) {\n                  this._registerMethod((...attrs) => {\n                    const { text, ...p } = callback(...attrs);\n\n                    const link = <a {...p}>{text}</a>;\n\n                    this._setProps((prev: any) => {\n                      const categories = [...(prev.categories || []), link];\n                      return {\n                        ...prev,\n                        categories,\n                        children: [\n                          // eslint-disable-next-line react/jsx-key\n                          <Breadcrumbs\n                            separator={prev.separator}\n                            categories={categories}\n                          />,\n                        ],\n                      };\n                    });\n                  });\n                },\n\n                appendHTMLElement(callback) {\n                  this._registerMethod((...attrs) => {\n                    const domElement = callback(...attrs);\n\n                    const vnode = this._htmlElementToVNode(domElement);\n\n                    this._setProps((prev: any) => {\n                      const categories = [...(prev.categories || []), vnode];\n\n                      return {\n                        ...prev,\n                        categories,\n                        children: [\n                          // eslint-disable-next-line react/jsx-key\n                          <Breadcrumbs\n                            separator={prev.separator}\n                            categories={categories}\n                          />,\n                        ],\n                      };\n                    });\n                  });\n                },\n              }}\n            />\n          )\n        }\n        quantity={quantity}\n        actions={\n          <Slot\n            name=\"Actions\"\n            slot={slots?.Actions}\n            context={{\n              ...defaultSlotContext,\n\n              appendButton(callback) {\n                this._registerMethod((...attrs) => {\n                  const _button = callback(...attrs);\n\n                  if (!_button) return;\n\n                  const { text, icon, ...buttonProps } = _button;\n\n                  const button = (\n                    <Button\n                      type=\"button\"\n                      {...buttonProps}\n                      icon={icon && <Icon source={icon} />}\n                    >\n                      {text}\n                    </Button>\n                  );\n\n                  this._setProps((prev: any) => ({\n                    children: [...(prev.children || []), button],\n                  }));\n                });\n              },\n            }}\n          >\n            {\n              // Default Add to Cart button if no slot is provided\n              !slots?.Actions && (\n                <Button\n                  size=\"medium\"\n                  type=\"submit\"\n                  icon={<Icon source=\"Cart\" />}\n                  disabled={!data?.inStock || !valid}\n                  aria-label={AddToCartLabel}\n                  onClick={() => {\n                    return onAddToCart?.(values);\n                  }}\n                >\n                  {AddToCartLabel}\n                </Button>\n              )\n            }\n          </Slot>\n        }\n        shortDescription={\n          !hideShortDescription ? (\n            <Slot\n              name=\"ShortDescription\"\n              slot={slots?.ShortDescription}\n              context={{ ...defaultSlotContext }}\n            >\n              <div\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{\n                  __html: data?.shortDescription ?? '',\n                }}\n              />\n            </Slot>\n          ) : undefined\n        }\n        description={\n          !hideDescription ? (\n            <Slot\n              name=\"Description\"\n              slot={slots?.Description}\n              context={{ ...defaultSlotContext }}\n            >\n              <div\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: data?.description ?? '' }}\n              />\n            </Slot>\n          ) : undefined\n        }\n        images={\n          data?.images?.map(({ label, url }) => (\n            <Image\n              key={url}\n              title={label}\n              alt={label}\n              src={url}\n              // TODO: change width/height for image aspect ratio\n              // pending https://jira.corp.adobe.com/browse/DATA-5122\n              width={carousel?.imageParams?.width ?? 960}\n              height={carousel?.imageParams?.height ?? 1191}\n              params={carousel?.imageParams ?? { width: 960 }}\n            />\n          )) ?? []\n        }\n        specialPrice={\n          data?.prices?.visible ? (\n            <Slot\n              name=\"SpecialPrice\"\n              slot={slots?.SpecialPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange\n                {...data.prices.final}\n                locale={toLanguageTag(locale)}\n              />\n            </Slot>\n          ) : undefined\n        }\n        price={\n          data?.prices?.visible &&\n          data.prices.regular &&\n          data.prices.final.amount !== data?.prices.regular.amount ? (\n            <Slot\n              name=\"RegularPrice\"\n              slot={slots?.RegularPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange\n                {...data.prices.regular}\n                locale={toLanguageTag(locale)}\n              />\n            </Slot>\n          ) : undefined\n        }\n        zoomType={zoomType}\n        closeButton={closeButton}\n        carouselConfig={{\n          ...carousel,\n          thumbnails:\n            carousel && Object.keys(carousel).length\n              ? data?.images?.map(({ label, url }) => (\n                  <Image\n                    key={url}\n                    title={label}\n                    alt={label}\n                    src={url}\n                    // TODO: change width/height for image aspect ratio\n                    // pending https://jira.corp.adobe.com/browse/DATA-5122\n                    width={carousel?.thumbnailParams?.width ?? 200}\n                    height={carousel?.thumbnailParams?.height ?? 248}\n                    params={carousel?.thumbnailParams ?? { width: 200 }}\n                  />\n                )) ?? []\n              : [],\n        }}\n        outOfStock={!data?.inStock}\n        attributes={\n          !hideAttributes ? (\n            <Slot\n              name=\"Attributes\"\n              slot={slots?.Attributes}\n              context={{ ...defaultSlotContext }}\n            >\n              {attributes?.length ? (\n                <>\n                  {DetailsLabel}\n                  <ul>{attributes}</ul>\n                </>\n              ) : null}\n            </Slot>\n          ) : undefined\n        }\n        galleryContent={\n          slots?.GalleryContent && (\n            <Slot\n              name=\"GalleryContent\"\n              slot={slots.GalleryContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        infoContent={\n          slots?.InfoContent && (\n            <Slot\n              name=\"InfoContent\"\n              slot={slots.InfoContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        productContent={\n          slots?.Content && (\n            <Slot\n              name=\"Content\"\n              slot={slots.Content}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n      />\n    </div>\n  );\n};\n\n/** @deprecated This method is part of the deprecated ProductDetails component. */\nProductDetails.getInitialData = async function ({\n  sku,\n  disableDropdownPreselection = false,\n  optionsConfig,\n}) {\n  const initialData = config.getConfig().models?.ProductDetails?.initialData;\n\n  return initialData\n    ? transformProductData(initialData)\n    : fetchProductData(sku, {\n        preselectFirstOption: !disableDropdownPreselection,\n        anchors: optionsConfig?.anchorOptions,\n      });\n};\n"],"names":["Product","title","breadcrumbs","galleryContent","infoContent","productContent","sku","outOfStock","shortDescription","description","attributes","images","options","price","specialPrice","className","children","quantity","actions","carouselConfig","zoomType","closeButton","props","RegularPriceLabel","useText","SpecialPriceLabel","OutOfStockLabel","ImagesLabel","zoom","setZoom","useState","galleryImages","image","key","alt","_a","jsx","Zoom","VComponent","localThumbnailsImages","jsxs","classes","_b","Carousel","_c","_d","GalleryGrid","_e","_f","_g","_h","_i","Overlay","gap","style","count","Children","child","ProductDetails","hideSku","hideQuantity","hideShortDescription","hideDescription","hideAttributes","hideURLParams","hideSelectedOptionValue","slots","initialData","carousel","optionsConfig","useACDL","onAddToCart","disableDropdownPreselection","AddToCartLabel","IncrementerLabel","DetailsLabel","ChooseOptionLabel","locale","setLocale","config","selectionsToUpdate","setSelectionsToUpdate","data","setData","values","setValues","initialQuantity","getValidatedQuantityFromUrl","defaultValues","valid","setValid","defaultSlotContext","hasProductViewOptionValueProduct","option","useEffect","dataEvent","events","payload","prev","updateDataEvent","localeEvent","fetchProductData","publishProductPageViewEvent","handleOnValues","useCallback","newValues","handleOptionSelected","selections","optionsUIDs","_","value","id","element","setUrlParams","next","processUpdates","previousOptionsUIDs","updatedOptionsUIDs","item","handleOnErrors","_errors","useMemo","label","__html","isDateValid","toDateString","Slot","Incrementer","quantityValue","renderOptions","Swatches","callback","attrs","nextSeparator","separator","Icon","Breadcrumbs","text","p","link","categories","domElement","vnode","_button","icon","buttonProps","button","Button","url","Image","PriceRange","toLanguageTag","Fragment","transformProductData"],"mappings":"65BAqDO,MAAMA,GAA2C,CAAC,CACvD,MAAAC,EACA,YAAAC,EACA,eAAAC,EACA,YAAAC,EACA,eAAAC,EACA,IAAAC,EACA,WAAAC,EACA,iBAAAC,EACA,YAAAC,EACA,WAAAC,GACA,OAAAC,EACA,QAAAC,EACA,MAAAC,EACA,aAAAC,EACA,UAAAC,EACA,SAAAC,GACA,SAAAC,EACA,QAAAC,EACA,eAAAC,EACA,SAAAC,EAAW,UACX,YAAAC,GAAc,GACd,GAAGC,EACL,IAAM,uBAEE,MAAAC,GAAoBC,EAAQ,gCAAgC,EAAE,MAC9DC,EAAoBD,EAAQ,gCAAgC,EAAE,MAC9DE,GAAkBF,EAAQ,8BAA8B,EAAE,MAC1DG,EAAcH,EAAQ,yBAAyB,EAAE,MAEjD,CAACI,EAAMC,CAAO,EAAIC,EAAwB,IAAI,EAE9CC,EAAgBpB,GAAA,MAAAA,EAAQ,OAC5BA,EAAO,IAAI,CAACqB,EAAOC,IAAQ,OACnB,MAAAC,IACJC,EAAAlC,GAAA,YAAAA,EAAO,QAAP,YAAAkC,EAAc,YACdR,GAAA,YAAAA,EAAa,QAAQ,YAAa1B,EAAM,MAAM,SAAS,SAAS,GAC7D,QAAQ,QAAS,OAAOgC,EAAM,CAAC,GAC/B,QAAQ,UAAW,OAAOtB,EAAO,MAAM,IAC5C,OAAOS,IAAa,OACjBgB,EAAAC,GAAA,CAAK,YAAAhB,GACJ,SAAAe,EAACE,EAAA,CAEC,KAAMN,EACN,QAASC,IAAQ,EAAI,QAAU,OAC/B,IAAAC,CAAA,EAHKD,GAKT,EAEAG,EAACE,EAAA,CAEC,KAAMN,EACN,QAASC,IAAQ,EAAI,QAAU,OAC/B,IAAAC,EACA,QAAS,IAAML,EAAQI,CAAG,CAAA,EAJrBA,CAKP,CAEH,CAAA,EAEDG,EAAC,MAAA,CACC,IAAI,iFACJ,UAAU,mCACV,cAAW,EAAA,CACb,EAGIG,GAAwBJ,EAAAhB,GAAA,YAAAA,EAAgB,aAAhB,MAAAgB,EAA4B,OACxDhB,EAAe,WAAW,IAAI,CAACa,EAAOC,WACpC,OAAAG,EAACE,EAAA,CAEC,KAAMN,EACN,SAASb,GAAA,YAAAA,EAAgB,wBAAyB,OAClD,MACEgB,EAAAlC,GAAA,YAAAA,EAAO,QAAP,YAAAkC,EAAc,YACdR,GAAA,YAAAA,EAAa,QAAQ,YAAa1B,EAAM,MAAM,SAAS,SAAS,GAC7D,QAAQ,QAAS,OAAOgC,EAAM,CAAC,GAC/B,QAAQ,UAAW,OAAOtB,EAAO,MAAM,GAAC,EAPxCsB,CAUR,EAAA,EAEDG,EAAC,MAAA,CACC,IAAI,iFACJ,UAAU,mCACV,cAAW,EAAA,CACb,EAIA,OAAAI,EAAC,MAAK,CAAA,GAAGlB,GAAO,UAAWmB,EAAQ,CAAC,cAAe1B,CAAS,CAAC,EAC1D,SAAA,CAAAb,GACEkC,EAAAE,EAAA,CAAW,KAAMpC,EAAa,UAAU,2BAA2B,EAEtEsC,EAAC,MAAI,CAAA,UAAU,4DACb,SAAA,CAAAJ,EAAC,MAAI,CAAA,UAAU,2BACZ,UAAAM,EAAAvB,GAAA,YAAAA,EAAgB,WAAhB,MAAAuB,EAA0B,QACzBN,EAACO,EAAA,CACC,UAAU,iCACV,QAAQhC,GAAA,YAAAA,EAAQ,QAAS,EACzB,UACEA,GAAA,YAAAA,EAAQ,QAAS,EAAIQ,EAAe,SAAS,QAAU,OAEzD,kBAAmBA,GAAA,YAAAA,EAAgB,kBACnC,MAAMA,GAAA,YAAAA,EAAgB,YAAYR,GAAA,YAAAA,EAAQ,QAAS,EACnD,OACGiC,EAAAzB,GAAA,YAAAA,EAAgB,aAAhB,YAAAyB,EAA4B,QAAS,KACpCC,EAAA1B,GAAA,YAAAA,EAAgB,OAAhB,YAAA0B,EAAsB,UACxB,GAEF,KAAK1B,GAAA,YAAAA,EAAgB,MAAO,KAC5B,MAAM,OACN,OAAO,OACP,aAAcS,GAAQ,EACtB,WAAYW,EAEX,SAAAR,CAAA,CACH,IAECe,GAAY,CAAA,UAAU,sBAAsB,IAAI,QAC9C,UACH,CAAA,EAEJ,EACC3C,GACCiC,EAACE,EAAA,CACC,KAAMnC,EACN,UAAU,8BAAA,CAAA,CACZ,EAEJ,EAEAqC,EAAC,MAAI,CAAA,UAAU,4DACb,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,2BACb,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,sBACZ,SAAA,CAAAvC,GACEmC,EAAAE,EAAA,CAAW,KAAMrC,EAAO,UAAU,qBAAqB,EAGzDK,GAAQ8B,EAAAE,EAAA,CAAW,KAAMhC,EAAK,UAAU,kBAAmB,CAAA,CAAA,EAC9D,EAEAkC,EAAC,MAAI,CAAA,UAAU,sBACZ,SAAA,CACC1B,GAAAsB,EAACE,EAAA,CACC,KAAMxB,EACN,UAAW2B,EAAQ,CACjB,6BACA,oBAAA,CACD,EACD,aAAYhB,EACZ,KAAK,MAAA,CACP,EAEDZ,GACCuB,EAACE,EAAA,CACC,KAAMzB,EACN,UAAW4B,EAAQ,CACjB,6BACA,0BAAA,CACD,EACD,aAAYlB,GACZ,KAAK,MAAA,CAAA,CACP,EAEJ,GAGCwB,EAAA5B,GAAA,YAAAA,EAAgB,WAAhB,MAAA4B,EAA0B,UAC3BC,EAAA7B,GAAA,YAAAA,EAAgB,WAAhB,YAAA6B,EAA0B,UAAW,gBACnCZ,EAACO,EAAA,CACC,UAAU,8FACV,MAAM,OACN,OAAO,OACP,QAAQhC,GAAA,YAAAA,EAAQ,QAAS,EACzB,UAAUA,GAAA,YAAAA,EAAQ,QAAS,EAAI,gBAAkB,KACjD,MAAMQ,GAAA,YAAAA,EAAgB,YAAYR,GAAA,YAAAA,EAAQ,QAAS,EACnD,OACGsC,EAAA9B,GAAA,YAAAA,EAAgB,aAAhB,YAAA8B,EAA4B,QAAS,KACpCC,EAAA/B,GAAA,YAAAA,EAAgB,OAAhB,YAAA+B,EAAsB,SACxB,GAEF,KAAK/B,GAAA,YAAAA,EAAgB,MAAO,KAC5B,WAAYoB,EAEX,SAAAR,CAAA,CAAA,EAGHK,EAACO,EAAA,CACC,UAAU,oDACV,OAAMQ,EAAAhC,GAAA,YAAAA,EAAgB,OAAhB,YAAAgC,EAAsB,UAAUxC,GAAA,YAAAA,EAAQ,QAAS,EACvD,KAAKQ,GAAA,YAAAA,EAAgB,MAAO,KAC5B,MAAM,OACN,OAAO,OACP,QAAQR,GAAA,YAAAA,EAAQ,QAAS,EACzB,UAAUA,GAAA,YAAAA,EAAQ,QAAS,EAAI,OAAS,KACxC,MAAMQ,GAAA,YAAAA,EAAgB,YAAYR,GAAA,YAAAA,EAAQ,QAAS,EAElD,SAAAoB,CAAA,CACH,EAGFS,EAAC,MAAA,CACC,UAAWC,EAAQ,CACjB,uBACA,CAAC,qCAAsClC,CAAU,CAAA,CAClD,EAEA,SAAA,CAAAA,GACE6B,EAAA,MAAA,CAAI,UAAU,kCACZ,SACHV,GAAA,EAGDd,GACCwB,EAACE,EAAA,CACC,KAAM1B,EACN,UAAW6B,EAAQ,CAAC,sBAAsB,CAAC,CAAA,CAC7C,EAGDxB,KACE,MAAI,CAAA,UAAU,wBACb,SAACmB,EAAAE,EAAA,CAAW,KAAMrB,CAAA,CAAU,CAC9B,CAAA,EAGDC,GACCkB,EAACE,EAAA,CACC,KAAMpB,EACN,UAAWuB,EAAQ,CAAC,sBAAsB,CAAC,CAAA,CAAA,CAC7C,CAAA,CAEJ,EAECjC,GACC4B,EAACE,EAAA,CACC,KAAM9B,EACN,UAAWiC,EAAQ,CAAC,gCAAgC,CAAC,CAAA,CACvD,EAGDhC,GACC2B,EAACE,EAAA,CACC,KAAM7B,EACN,UAAWgC,EAAQ,CAAC,0BAA0B,CAAC,CAAA,CACjD,EAGD/B,GACE0B,EAAA,MAAA,CAAI,UAAU,0BAA2B,YAAW,EACnD,IAAA,EACN,EACChC,GACCgC,EAACE,EAAA,CACC,KAAMlC,EACN,UAAU,2BAAA,CAAA,CACZ,EAEJ,EAECC,GACE+B,EAAAE,EAAA,CAAW,KAAMjC,EAAgB,UAAU,uBAAuB,EAIpEuB,IAAS,KAAO,KACfQ,EAACgB,GAAA,CACC,UAAU,uBACV,QAAS,IAAMvB,EAAQ,IAAI,EAC3B,SAAQ,GAER,SAAAO,EAACO,EAAA,CACC,UAAU,iCACV,QAAQhC,GAAA,YAAAA,EAAQ,QAAS,EACzB,MAAM,OACN,OAAO,OACP,aAAciB,GAAQ,EACtB,MAAMT,GAAA,YAAAA,EAAgB,YAAYR,GAAA,YAAAA,EAAQ,QAAS,EACnD,UAAUA,GAAA,YAAAA,EAAQ,QAAS,EAAI,OAAS,KACxC,SAAQ,GAEP,SAAAoB,CAAA,CAAA,CACH,CAAA,CACF,EAEJ,CAEJ,ECzTae,GAAmD,CAAC,CAC/D,SAAA9B,EACA,IAAAqC,EAAM,KACN,UAAAtC,EACA,MAAAuC,EACA,GAAGhC,CACL,IAAM,CACE,MAAAiC,EAAQC,GAAS,MAAMxC,CAAQ,EAGnC,OAAAoB,EAAC,MAAA,CACE,GAAGd,EACJ,UAAWmB,EAAQ,CAAC,mBAAoB1B,CAAS,CAAC,EAClD,MAAO,CACL,QAASsC,EAAM,iBAAiBA,CAAG,IAAM,MACzC,GAAGC,CACL,EAEC,SAASE,GAAA,IACRxC,EACA,CAACyC,EAA2CxB,IACzCG,EAAA,MAAA,CAAsB,UAAU,yBAC/B,SAAAA,EAACE,EAAA,CAEC,KAAMmB,EACN,QAASxB,IAAQ,EAAI,QAAU,MAAA,EAF1BwB,EAAM,MAAM,GAAA,CAGnB,EALQF,EAAQtB,CAMlB,CAAA,CAEJ,CACF,CAEJ,EC0GayB,GAGT,CAAC,CACH,IAAApD,EACA,QAAAqD,EACA,aAAAC,EACA,qBAAAC,EACA,gBAAAC,EACA,eAAAC,EACA,cAAAC,EACA,wBAAAC,EACA,MAAAC,EACA,SAAAlD,GACA,YAAAmD,EACA,SAAAC,EACA,cAAAC,EACA,QAAAC,EACA,YAAAC,EACA,SAAAnD,GACA,YAAAC,EAAc,GACd,4BAAAmD,EACA,GAAGlD,CACL,IAAM,gBAEE,MAAAmD,EAAiBjD,EAAQ,6BAA6B,EAAE,MACxDkD,GAAmBlD,EAAQ,+BAA+B,EAAE,MAC5DmD,GAAenD,EAAQ,2BAA2B,EAAE,MACpDoD,GAAoBpD,EAAQ,iCAAiC,EAAE,MAG/D,CAACqD,EAAQC,EAAS,EAAIhD,EACzBiD,GAAO,UAAU,EAAE,eAA0B,OAChD,EAEM,CAACC,EAAoBC,CAAqB,EAAInD,EAAmB,EAEjE,CAACoD,EAAO,KAAMC,CAAO,EAAIrD,EAASqC,CAAW,EAE7C,CAACiB,EAAQC,CAAS,EAAIvD,EAAiB,IAAM,CAC3C,MAAAwD,EAAkBC,GAA4B,CAAC,EAE/CC,EAAwB,CAC5B,IAAAlF,EACA,SAAUgF,CACZ,EAEA,OAAIJ,GAAA,MAAAA,EAAM,aACRM,EAAc,YAAcN,EAAK,YAE5BM,CAAA,CACR,EAGK,CAACC,EAAOC,CAAQ,EAAI5D,EAAS,IAAM,SAChC,MAAA,EACLoD,GAAA,MAAAA,EAAM,WACN/C,EAAA+C,GAAA,YAAAA,EAAM,UAAN,YAAA/C,EAAe,QAAS,KACxBO,EAAAwC,GAAA,YAAAA,EAAM,aAAN,YAAAxC,EAAkB,WAAWwC,GAAA,YAAAA,EAAM,QAAQ,QAAA,CAE9C,EAEKS,EAAyC,CAAE,KAAAT,EAAM,OAAAE,EAAQ,MAAAK,CAAM,EAErE,SAASG,EAAiChF,EAA0B,CAClE,OAAOA,GAAA,YAAAA,EAAS,KACbiF,IAAWA,GAAA,YAAAA,EAAQ,YAAa,gCACnC,CAGFC,EAAU,IAAM,CACd,MAAMC,EAAYC,GAAO,GAAG,WAAaC,GAAY,CAC/CA,IACFd,EAAQc,CAAO,EAEfZ,EAAWa,IAAkB,CAC3B,GAAGA,EACH,IAAKD,EAAQ,IACb,YAAaA,EAAQ,UAAA,EACrB,EACJ,CACD,EAGKE,EAAkBH,GAAO,GAC7B,gBACCC,GAA6B,CAC5BZ,EAAWa,IAAkB,CAAE,GAAGA,EAAM,GAAGD,GAAU,CAAA,CAEzD,EAEA,MAAO,IAAM,CACXE,GAAA,MAAAA,EAAiB,MACjBJ,GAAA,MAAAA,EAAW,KACb,CACF,EAAG,EAAE,EAGLD,EAAU,IAAM,CACd,MAAMM,EAAcJ,GAAO,GAAG,SAAWC,GAAoB,CACvDA,IAAYpB,IAEhBC,GAAUmB,CAAe,EAEzBI,GAAiB/F,EAAK,CACpB,qBAAsB,CAACkE,EACvB,QAASH,GAAA,YAAAA,EAAe,aAAA,CACzB,EAAE,KAAKc,CAAO,EAAA,CAChB,EACD,MAAO,IAAM,CACXiB,GAAA,MAAAA,EAAa,KACf,CAAA,EACC,CAAC5B,EAA6BK,EAAQR,GAAA,YAAAA,EAAe,cAAe/D,CAAG,CAAC,EAE3EwF,EAAU,IAAM,CACVxB,GAAWH,GAAe,OAAO,KAAKA,CAAW,EAAE,OAAS,GAC9DmC,GAA4BnC,CAAW,CACzC,EAEC,CAACA,CAAW,CAAC,EAGV,MAAAoC,EAAiBC,EAAaC,GAA+B,CACjEpB,EAAWa,IAAU,CAAE,GAAGA,EAAM,GAAGO,GAAY,CACjD,EAAG,EAAE,EAELX,EAAU,IAAM,CACPE,GAAA,KAAK,aAAcZ,CAAM,GAE/B,CAAC,KAAK,UAAUA,CAAM,CAAC,CAAC,EAE3B,MAAMsB,EAAuBF,EAC3B,MAAOG,GAAmE,SAExE,IAAIC,EAAc,OAAO,QAAQD,CAAU,EACxC,OAAO,CAAC,CAACE,EAAGC,CAAK,IAAMA,EAAM,QAAUlC,EAAiB,EACxD,IAAI,CAAC,CAACmC,EAAIF,CAAC,IAAMF,EAAWI,CAAE,EAAE,KAAK,EACrC,OAAQC,GAAYA,IAAY,MAAS,EAM1C,CAAChD,IACDkB,GAAA,MAAAA,EAAM,UACN,CAACU,EAAiCV,EAAK,OAAO,GAE9C+B,GAAa,CAAE,YAAaL,EAAY,KAAK,GAAG,EAAG,EAItCL,EAAA,CAAE,YAAAK,EAAa,EAC9BlB,GAASkB,GAAA,YAAAA,EAAa,YAAWzE,EAAA+C,GAAA,YAAAA,EAAM,UAAN,YAAA/C,EAAe,OAAM,EAGhD,MAAA+E,EAAO,MAAMb,GAAiB/F,EAAK,CACvC,QAAS+D,GAAA,YAAAA,EAAe,cACxB,SAAUa,GAAA,YAAAA,EAAM,SAChB,YAAA0B,EACA,qBAAsB,CAACpC,CAAA,CACxB,EAEDW,EAAQ+B,CAAI,GAGRxE,EAAA2B,GAAA,YAAAA,EAAe,gBAAf,MAAA3B,EAA8B,QAChCyE,EAAeD,EAAMN,CAAW,CAEpC,EAEA,CAACtG,CAAG,CACN,EAEM6G,EAAiBX,EACrB,CAACU,EAA2BE,IAAkC,OACtD,MAAAC,GAAqBH,GAAA,YAAAA,EAAM,aAAc,CAAC,EACzBE,EAAoB,MAAOE,GAChDD,EAAmB,SAASC,CAAI,CAClC,IAEErC,EAAsBiC,GAAA,YAAAA,EAAM,OAAO,EACpBX,EAAA,CAAE,YAAac,EAAoB,EAClD3B,GAAS2B,GAAA,YAAAA,EAAoB,YAAWlF,EAAA+E,GAAA,YAAAA,EAAM,UAAN,YAAA/E,EAAe,OAAM,EAEjE,EAEA,CAAC7B,CAAG,CACN,EAEMiH,EAAiBf,EAAagB,GAAsC,CACpE,OAAO,KAAKA,CAAO,EAAE,SAAW,KAAY,EAAK,CACvD,EAAG,EAAE,EAGC9G,EAAa+G,GAAQ,IAAM,OACxB,OAAAtF,EAAA+C,GAAA,YAAAA,EAAM,aAAN,YAAA/C,EAAkB,IAAI,CAAC,CAAE,MAAAuF,EAAO,MAAAZ,GAAS7E,IAAgB,CACxD,MAAA0F,EAASC,GAAYd,CAAK,EAC5Be,GAAaf,EAAOjC,CAAM,EAC1BiC,EAAM,SAAS,EAEnB,SACG,KAEE,CAAA,SAAA,CAAAY,EAAM,KAAGtF,EAAA,OAAA,CAAK,wBAAyB,CAAE,OAAAuF,EAAU,CAAA,CAAA,CAAA,EAF7C1F,CAGT,CAAA,EAGH,EAAA,CAACiD,GAAA,YAAAA,EAAM,WAAYL,CAAM,CAAC,EAEvB5D,EACJ,CAAC2C,IAAgBsB,GAAA,MAAAA,EAAM,SACrB9C,EAAC0F,EAAA,CACC,KAAK,WACL,KAAM5D,GAAA,YAAAA,EAAO,SACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAAC2F,GAAA,CAEC,KAAK,WACL,aAAc3C,EAAO,SAAS,SAAS,EACvC,MAAOA,EAAO,SAAS,SAAS,EAChC,IAAK,EACL,aAAYV,GACZ,UAAU,wBACV,QAAUzD,GAAa,CACf,MAAA+G,EAAgB,OAAO/G,CAAQ,EACtBsF,EAAA,CAAE,SAAUyB,EAAe,EAGtC,CAAChE,IAAiBkB,GAAA,MAAAA,EAAM,WAErBU,EAAiCV,EAAK,OAAO,GACnC+B,GAAA,CAAE,SAAUe,EAAe,EAE5C,CACF,EAlBI,UAAA,CAmBN,CAAA,EAEA,OAEAC,EAAgB,IAAM,CAC1B,GAAI/C,GAAA,MAAAA,EAAM,QAEN,OAAA9C,EAAC0F,EAAA,CACC,KAAK,UACL,KAAM5D,GAAA,YAAAA,EAAO,QACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAAC8F,GAAA,CACC,aAAc9C,EAAO,YACrB,QAASF,EAAK,QACd,eAAgBE,EAAO,YACvB,mBAAAJ,EACA,kBAAmBf,EACnB,qBAAsBO,EACtB,SAAUkC,EACV,SAAUa,CAAA,CAAA,CACZ,CACF,CAGN,EAGE,OAAAnF,EAAC,MAAK,CAAA,GAAGd,EACP,SAAAc,EAACpC,GAAA,CACC,MACEoC,EAAC0F,EAAA,CACC,KAAK,QACL,KAAM5D,GAAA,YAAAA,EAAO,MACb,QAAS,CAAE,GAAGyB,CAAmB,EAEhC,SAAMT,GAAA,YAAAA,EAAA,IAAA,CACT,EAEF,IACGvB,EAQG,OAPFvB,EAAC0F,EAAA,CACC,KAAK,MACL,KAAM5D,GAAA,YAAAA,EAAO,IACb,QAAS,CAAE,GAAGyB,CAAmB,EAEhC,SAAMT,GAAA,YAAAA,EAAA,GAAA,CAAA,EAIb,QAAS+C,EAAc,EACvB,aACE/D,GAAA,YAAAA,EAAO,cACL9B,EAAC0F,EAAA,CACC,KAAK,cACL,KAAM5D,GAAA,YAAAA,EAAO,YACb,QAAS,CACP,GAAGyB,EAEH,aAAawC,EAAU,CAChB,KAAA,gBAAgB,IAAIC,IAAU,CAC3B,MAAAC,EAAgBF,EAAS,GAAGC,CAAK,EAEjCE,EAAYD,GACfjG,EAAAmG,GAAA,CAAK,OAAQF,EAAe,EAG1B,KAAA,UAAWnC,IACP,CACL,GAAGA,EACH,UAAAoC,EACA,SAAU,CAERlG,EAACoG,GAAA,CACC,UAAAF,EACA,WAAYpC,EAAK,UAAA,CAAA,CACnB,CAEJ,EACD,CAAA,CACF,CACH,EAEA,WAAWiC,EAAU,CACd,KAAA,gBAAgB,IAAIC,IAAU,CACjC,KAAM,CAAE,KAAAK,EAAM,GAAGC,CAAM,EAAAP,EAAS,GAAGC,CAAK,EAElCO,EAAOvG,EAAC,IAAG,CAAA,GAAGsG,EAAI,SAAKD,EAAA,EAExB,KAAA,UAAWvC,GAAc,CAC5B,MAAM0C,EAAa,CAAC,GAAI1C,EAAK,YAAc,CAAA,EAAKyC,CAAI,EAC7C,MAAA,CACL,GAAGzC,EACH,WAAA0C,EACA,SAAU,CAERxG,EAACoG,GAAA,CACC,UAAWtC,EAAK,UAChB,WAAA0C,CAAA,CAAA,CACF,CAEJ,CAAA,CACD,CAAA,CACF,CACH,EAEA,kBAAkBT,EAAU,CACrB,KAAA,gBAAgB,IAAIC,IAAU,CAC3B,MAAAS,EAAaV,EAAS,GAAGC,CAAK,EAE9BU,EAAQ,KAAK,oBAAoBD,CAAU,EAE5C,KAAA,UAAW3C,GAAc,CAC5B,MAAM0C,EAAa,CAAC,GAAI1C,EAAK,YAAc,CAAA,EAAK4C,CAAK,EAE9C,MAAA,CACL,GAAG5C,EACH,WAAA0C,EACA,SAAU,CAERxG,EAACoG,GAAA,CACC,UAAWtC,EAAK,UAChB,WAAA0C,CAAA,CAAA,CACF,CAEJ,CAAA,CACD,CAAA,CACF,CAAA,CACH,CACF,CACF,EAGJ,SAAA3H,EACA,QACEmB,EAAC0F,EAAA,CACC,KAAK,UACL,KAAM5D,GAAA,YAAAA,EAAO,QACb,QAAS,CACP,GAAGyB,EAEH,aAAawC,EAAU,CAChB,KAAA,gBAAgB,IAAIC,IAAU,CAC3B,MAAAW,EAAUZ,EAAS,GAAGC,CAAK,EAEjC,GAAI,CAACW,EAAS,OAEd,KAAM,CAAE,KAAAN,EAAM,KAAAO,EAAM,GAAGC,CAAgB,EAAAF,EAEjCG,EACJ9G,EAAC+G,GAAA,CACC,KAAK,SACJ,GAAGF,EACJ,KAAMD,GAAS5G,EAAAmG,GAAA,CAAK,OAAQS,EAAM,EAEjC,SAAAP,CAAA,CACH,EAGG,KAAA,UAAWvC,KAAe,CAC7B,SAAU,CAAC,GAAIA,GAAK,UAAY,GAAKgD,CAAM,CAAA,EAC3C,CAAA,CACH,CAAA,CAEL,EAIE,SAAA,EAAChF,GAAA,MAAAA,EAAO,UACN9B,EAAC+G,GAAA,CACC,KAAK,SACL,KAAK,SACL,KAAM/G,EAACmG,GAAK,CAAA,OAAO,MAAO,CAAA,EAC1B,SAAU,EAACrD,GAAA,MAAAA,EAAM,UAAW,CAACO,EAC7B,aAAYhB,EACZ,QAAS,IACAF,GAAA,YAAAA,EAAca,GAGtB,SAAAX,CAAA,CAAA,CACH,CAGN,EAEF,iBACGZ,EAaG,OAZFzB,EAAC0F,EAAA,CACC,KAAK,mBACL,KAAM5D,GAAA,YAAAA,EAAO,iBACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAAC,MAAA,CAEC,wBAAyB,CACvB,QAAQ8C,GAAA,YAAAA,EAAM,mBAAoB,EAAA,CACpC,CAAA,CACF,CAAA,EAIN,YACGpB,EAWG,OAVF1B,EAAC0F,EAAA,CACC,KAAK,cACL,KAAM5D,GAAA,YAAAA,EAAO,YACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAAC,MAAA,CAEC,wBAAyB,CAAE,QAAQ8C,GAAA,YAAAA,EAAM,cAAe,EAAG,CAAA,CAAA,CAC7D,CAAA,EAIN,SACE/C,EAAA+C,GAAA,YAAAA,EAAM,SAAN,YAAA/C,EAAc,IAAI,CAAC,CAAE,MAAAuF,EAAO,IAAA0B,cAC1B,OAAAhH,EAACiH,GAAA,CAEC,MAAO3B,EACP,IAAKA,EACL,IAAK0B,EAGL,QAAOjH,EAAAiC,GAAA,YAAAA,EAAU,cAAV,YAAAjC,EAAuB,QAAS,IACvC,SAAQO,EAAA0B,GAAA,YAAAA,EAAU,cAAV,YAAA1B,EAAuB,SAAU,KACzC,QAAQ0B,GAAA,YAAAA,EAAU,cAAe,CAAE,MAAO,GAAI,CAAA,EARzCgF,CAUR,MAAK,CAAC,EAET,cACE1G,GAAAwC,GAAA,YAAAA,EAAM,SAAN,MAAAxC,GAAc,QACZN,EAAC0F,EAAA,CACC,KAAK,eACL,KAAM5D,GAAA,YAAAA,EAAO,aACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAACkH,GAAA,CACE,GAAGpE,EAAK,OAAO,MAChB,OAAQqE,GAAc1E,CAAM,CAAA,CAAA,CAC9B,CAAA,EAEA,OAEN,OACEjC,GAAAsC,GAAA,YAAAA,EAAM,SAAN,MAAAtC,GAAc,SACdsC,EAAK,OAAO,SACZA,EAAK,OAAO,MAAM,UAAWA,GAAA,YAAAA,EAAM,OAAO,QAAQ,QAChD9C,EAAC0F,EAAA,CACC,KAAK,eACL,KAAM5D,GAAA,YAAAA,EAAO,aACb,QAAS,CAAE,GAAGyB,CAAmB,EAEjC,SAAAvD,EAACkH,GAAA,CACE,GAAGpE,EAAK,OAAO,QAChB,OAAQqE,GAAc1E,CAAM,CAAA,CAAA,CAC9B,CAAA,EAEA,OAEN,SAAAzD,GACA,YAAAC,EACA,eAAgB,CACd,GAAG+C,EACH,WACEA,GAAY,OAAO,KAAKA,CAAQ,EAAE,SAC9BvB,GAAAqC,GAAA,YAAAA,EAAM,SAAN,YAAArC,GAAc,IAAI,CAAC,CAAE,MAAA6E,EAAO,IAAA0B,CAC1B,IAAA,SAAA,OAAAhH,EAACiH,GAAA,CAEC,MAAO3B,EACP,IAAKA,EACL,IAAK0B,EAGL,QAAOjH,EAAAiC,GAAA,YAAAA,EAAU,kBAAV,YAAAjC,EAA2B,QAAS,IAC3C,SAAQO,EAAA0B,GAAA,YAAAA,EAAU,kBAAV,YAAA1B,EAA2B,SAAU,IAC7C,QAAQ0B,GAAA,YAAAA,EAAU,kBAAmB,CAAE,MAAO,GAAI,CAAA,EAR7CgF,CAUR,MAAK,CAAA,EACN,CAAA,CACR,EACA,WAAY,EAAClE,GAAA,MAAAA,EAAM,SACnB,WACGnB,EAaG,OAZF3B,EAAC0F,EAAA,CACC,KAAK,aACL,KAAM5D,GAAA,YAAAA,EAAO,WACb,QAAS,CAAE,GAAGyB,CAAmB,EAEhC,SAAAjF,GAAA,MAAAA,EAAY,OAER8B,EAAAgH,GAAA,CAAA,SAAA,CAAA7E,GACDvC,EAAC,MAAI,SAAW1B,CAAA,CAAA,CAAA,CAAA,CAClB,EACE,IAAA,CAAA,EAIV,gBACEwD,GAAA,YAAAA,EAAO,iBACL9B,EAAC0F,EAAA,CACC,KAAK,iBACL,KAAM5D,EAAM,eACZ,QAAS,CAAE,GAAGyB,CAAmB,CAAA,CACnC,EAGJ,aACEzB,GAAA,YAAAA,EAAO,cACL9B,EAAC0F,EAAA,CACC,KAAK,cACL,KAAM5D,EAAM,YACZ,QAAS,CAAE,GAAGyB,CAAmB,CAAA,CACnC,EAGJ,gBACEzB,GAAA,YAAAA,EAAO,UACL9B,EAAC0F,EAAA,CACC,KAAK,UACL,KAAM5D,EAAM,QACZ,QAAS,CAAE,GAAGyB,CAAmB,CAAA,CAAA,CACnC,CAAA,EAIR,CAEJ,EAGAjC,GAAe,eAAiB,eAAgB,CAC9C,IAAApD,EACA,4BAAAkE,EAA8B,GAC9B,cAAAH,CACF,EAAG,SACD,MAAMF,GAAczB,GAAAP,EAAA4C,GAAO,UAAU,EAAE,SAAnB,YAAA5C,EAA2B,iBAA3B,YAAAO,EAA2C,YAE/D,OAAOyB,EACHsF,GAAqBtF,CAAW,EAChCkC,GAAiB/F,EAAK,CACpB,qBAAsB,CAACkE,EACvB,QAASH,GAAA,YAAAA,EAAe,aAAA,CACzB,CACP"}