{"version":3,"file":"ProductPrice.js","sources":["/@dropins/storefront-pdp/src/components/Price/Price.tsx","/@dropins/storefront-pdp/src/containers/ProductPrice/ProductPrice.tsx"],"sourcesContent":["/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2024 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */import { FunctionComponent, VNode } from 'preact';\n\n \nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/pdp/components/Price/Price.css';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface PriceProps extends HTMLAttributes<HTMLDivElement> {\n  price?: VNode;\n  specialPrice?: VNode;\n}\n\nexport const Price: FunctionComponent<PriceProps> = ({\n  className,\n  price,\n  specialPrice,\n  children,\n  ...props\n}) => {\n  const RegularPriceLabel = useText('PDP.Product.RegularPrice.label').label;\n  const SpecialPriceLabel = useText('PDP.Product.SpecialPrice.label').label;\n\n  return (\n    <div {...props} className={classes(['pdp-price', className])}>\n      {specialPrice && (\n        <VComponent\n          node={specialPrice}\n          className={classes([\n            'pdp-price__amount-special',\n            'pdp-price__amount',\n          ])}\n          aria-label={SpecialPriceLabel}\n          role=\"text\"\n        />\n      )}\n      {price && (\n        <VComponent\n          node={price}\n          className={classes([\n            'pdp-price__amount-regular',\n            'pdp-price__amount--grey',\n          ])}\n          aria-label={RegularPriceLabel}\n          role=\"text\"\n        />\n      )}\n    </div>\n  );\n};\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2024 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { Container, toLanguageTag } from '@adobe-commerce/elsie/lib';\nimport { Price, PriceRange } from '@/pdp/components';\nimport { events } from '@adobe-commerce/event-bus';\nimport { ProductModel } from '@/pdp/data/models';\nimport { config, getFetchedProductData } from '@/pdp/api';\n\nexport interface ProductPriceProps extends HTMLAttributes<HTMLDivElement> {}\n\nexport const ProductPrice: Container<\n  ProductPriceProps,\n  ProductModel | null\n> = ({ initialData = null, children, ...props }) => {\n  const { defaultLocale = 'en-US' } = config.getConfig();\n\n  const [data, setData] = useState<ProductModel | null>(initialData);\n\n  const [locale, setLocale] = useState<string>(defaultLocale);\n\n  useEffect(() => {\n    const dataEvent = events.on('pdp/data', setData);\n    const localeEvent = events.on('locale', setLocale);\n\n    return () => {\n      dataEvent?.off();\n      localeEvent?.off();\n    };\n  }, []);\n\n  if (!data) return null;\n\n  return (\n    <Price\n      {...props}\n      specialPrice={\n        data.prices?.visible ? (\n          <PriceRange {...data.prices.final} locale={toLanguageTag(locale)} />\n        ) : undefined\n      }\n      price={\n        data.prices?.visible &&\n        data.prices.regular &&\n        data.prices.final.amount !== data.prices.regular.amount ? (\n          <PriceRange {...data.prices.regular} locale={toLanguageTag(locale)} />\n        ) : undefined\n      }\n    />\n  );\n};\n\nProductPrice.getInitialData = getFetchedProductData;\n"],"names":["Price","className","price","specialPrice","children","props","RegularPriceLabel","useText","SpecialPriceLabel","jsxs","classes","jsx","VComponent","ProductPrice","initialData","defaultLocale","config","data","setData","useState","locale","setLocale","useEffect","dataEvent","events","localeEvent","_a","PriceRange","toLanguageTag","_b","getFetchedProductData"],"mappings":"ooBA2BO,MAAMA,EAAuC,CAAC,CACnD,UAAAC,EACA,MAAAC,EACA,aAAAC,EACA,SAAAC,EACA,GAAGC,CACL,IAAM,CACE,MAAAC,EAAoBC,EAAQ,gCAAgC,EAAE,MAC9DC,EAAoBD,EAAQ,gCAAgC,EAAE,MAGlE,OAAAE,EAAC,MAAK,CAAA,GAAGJ,EAAO,UAAWK,EAAQ,CAAC,YAAaT,CAAS,CAAC,EACxD,SAAA,CACCE,GAAAQ,EAACC,EAAA,CACC,KAAMT,EACN,UAAWO,EAAQ,CACjB,4BACA,mBAAA,CACD,EACD,aAAYF,EACZ,KAAK,MAAA,CACP,EAEDN,GACCS,EAACC,EAAA,CACC,KAAMV,EACN,UAAWQ,EAAQ,CACjB,4BACA,yBAAA,CACD,EACD,aAAYJ,EACZ,KAAK,MAAA,CAAA,CACP,EAEJ,CAEJ,ECtCaO,EAGT,CAAC,CAAE,YAAAC,EAAc,KAAM,SAAAV,EAAU,GAAGC,KAAY,SAClD,KAAM,CAAE,cAAAU,EAAgB,SAAYC,EAAO,UAAU,EAE/C,CAACC,EAAMC,CAAO,EAAIC,EAA8BL,CAAW,EAE3D,CAACM,EAAQC,CAAS,EAAIF,EAAiBJ,CAAa,EAYtD,OAVJO,EAAU,IAAM,CACd,MAAMC,EAAYC,EAAO,GAAG,WAAYN,CAAO,EACzCO,EAAcD,EAAO,GAAG,SAAUH,CAAS,EAEjD,MAAO,IAAM,CACXE,GAAA,MAAAA,EAAW,MACXE,GAAA,MAAAA,EAAa,KACf,CACF,EAAG,EAAE,EAEAR,EAGHN,EAACX,EAAA,CACE,GAAGK,EACJ,cACEqB,EAAAT,EAAK,SAAL,MAAAS,EAAa,UACVC,EAAY,CAAA,GAAGV,EAAK,OAAO,MAAO,OAAQW,EAAcR,CAAM,CAAG,CAAA,EAChE,OAEN,OACES,EAAAZ,EAAK,SAAL,MAAAY,EAAa,SACbZ,EAAK,OAAO,SACZA,EAAK,OAAO,MAAM,SAAWA,EAAK,OAAO,QAAQ,OAC9CN,EAAAgB,EAAA,CAAY,GAAGV,EAAK,OAAO,QAAS,OAAQW,EAAcR,CAAM,CAAG,CAAA,EAClE,MAAA,CAER,EAjBgB,IAmBpB,EAEAP,EAAa,eAAiBiB"}