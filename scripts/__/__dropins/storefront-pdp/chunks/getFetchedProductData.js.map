{"version":3,"file":"getFetchedProductData.js","sources":["/@dropins/storefront-pdp/src/api/getFetchedProductData/getFetchedProductData.ts"],"sourcesContent":["/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2024 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { events } from '@adobe-commerce/event-bus';\nimport { ProductModel } from '@/pdp/data/models/product-model';\n\nexport const getFetchedProductData = async (): Promise<ProductModel | null> => {\n  // if the event has already been emitted, return the last payload\n  if (events._lastEvent['pdp/data']) {\n    return Promise.resolve(events._lastEvent['pdp/data'].payload);\n  }\n\n  // otherwise, wait for the next event\n  return new Promise((resolve) => {\n    const event = events.on(\n      'pdp/data',\n      (data) => {\n        resolve(data);\n        event?.off();\n      },\n      { eager: true }\n    );\n  });\n};\n"],"names":["getFetchedProductData","events","resolve","event","data"],"mappings":"qDAmBO,MAAMA,EAAwB,SAE/BC,EAAO,WAAW,UAAU,EACvB,QAAQ,QAAQA,EAAO,WAAW,UAAU,EAAE,OAAO,EAIvD,IAAI,QAASC,GAAY,CAC9B,MAAMC,EAAQF,EAAO,GACnB,WACCG,GAAS,CACRF,EAAQE,CAAI,EACZD,GAAA,MAAAA,EAAO,KACT,EACA,CAAE,MAAO,EAAK,CAChB,CAAA,CACD"}