{"version":3,"file":"Zoom.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/ChevronDown.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","/@dropins/storefront-pdp/src/components/Carousel/Carousel.tsx","/@dropins/storefront-pdp/src/components/Overlay/Overlay.tsx","/@dropins/storefront-pdp/src/components/Zoom/Zoom.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  Children,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/compat';\nimport { classes, debounce } from '@adobe-commerce/elsie/lib';\nimport { Button, Icon } from '@adobe-commerce/elsie/components';\nimport { ChevronDown } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nimport '@/pdp/components/Carousel/Carousel.css';\n\ntype Show = number;\n\nconst PEAK_WIDTH = 24;\nconst THUMB_GAP = 16;\nconst ICON_SIZE = '32';\n\nenum GapSize {\n  small = 16,\n  medium = 24,\n  large = 64,\n}\n\nexport interface CarouselProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'controls'> {\n  children: VNode[] | VNode;\n  thumbnails?: VNode[] | VNode;\n  show?: Show | { small: Show; medium: Show; large: Show };\n  gap?: 'small' | 'medium' | 'large' | null;\n  scrollbar?: boolean;\n  peak?: boolean;\n  arrows?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loop?: boolean;\n  direction?: 'horizontal';\n  style?: Record<string, string | number>;\n  width?: string;\n  height?: string;\n  defaultIndex?: number;\n  infinite?: boolean;\n  isZoomed?: boolean;\n}\n\nexport const Carousel: FunctionComponent<CarouselProps> = ({\n  show = 1,\n  scrollbar = false,\n  peak = false,\n  arrows = false,\n  controls = 'dots',\n  arrowsOnMainImage = false,\n  loop = false,\n  gap = null,\n  direction = 'horizontal',\n  width = '100%',\n  height = '100%',\n  defaultIndex = 0,\n  className,\n  children,\n  thumbnails = null,\n  isZoomed,\n  ...props\n}) => {\n  // i18n\n  const Label = useText('PDP.Carousel.label').label;\n  const SlideLabel = useText('PDP.Carousel.Slide.label').label;\n  const PreviousLabel = useText('PDP.Carousel.Previous.label').label;\n  const NextLabel = useText('PDP.Carousel.Next.label').label;\n  const ControlsLabel = useText('PDP.Carousel.Controls.label').label;\n  const ControlsBtnLabel = useText('PDP.Carousel.Controls.Button.label').label;\n\n  // States\n  const [perPage, setPerPage] = useState(() => getPerPageFromBreakpoint(show));\n\n  // Constants\n  const length = Math.ceil(Children.count(children) / perPage);\n\n  const peakWidth = peak ? PEAK_WIDTH : 0;\n  const gapWidth = gap ? GapSize[gap] : 0;\n  const rest = Children.count(children) % perPage;\n\n  // States\n  const [current, setCurrent] = useState(\n    loop ? (isRTL() ? defaultIndex - 1 : defaultIndex + 1) : defaultIndex\n  );\n\n  // Thumbnails (refs for each thumbnail item)\n  const thumbnailsRefs = useRef<HTMLLabelElement[]>([]);\n  const [thumbWidth, setThumbWidth] = useState(0);\n  const [thumbHeight, setThumbHeight] = useState(0);\n\n  // VNodes\n  const thumbnailSlides = useMemo<VNode[]>(() => {\n    return Children.toArray(thumbnails);\n  }, [thumbnails]);\n\n  // Slides\n  const slides = useMemo<VNode[][]>(() => {\n    const returnValue = Children.toArray(children).reduce((acc, child, i) => {\n      if (i % perPage === 0) {\n        return [...acc, [child]];\n      }\n\n      return [...acc.slice(0, -1), [...acc[acc.length - 1], child]];\n    }, [] as VNode[][]);\n\n    if (!loop || returnValue.length === 1) {\n      return returnValue;\n    }\n\n    if (loop && !(Children.count(children) % perPage !== 0)) {\n      return [returnValue[length - 1]]\n        .concat(returnValue)\n        .concat([returnValue[0], returnValue[1]]);\n    }\n\n    return [Children.toArray(children).slice(-perPage)]\n      .concat(returnValue)\n      .concat([returnValue[0], returnValue[1]]);\n  }, [children, perPage, length, loop]);\n\n  // Wrapper\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailsWrapperRef = useRef<HTMLDivElement>(null);\n\n  const thumbnailControls =\n    controls === 'thumbnailsRow' || controls === 'thumbnailsColumn';\n\n  // Observe Resize (responsive)\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n\n    if (!wrapper) return; // Guard clause in case the ref is not set yet\n\n    const handleResize = debounce(() => {\n      setThumbWidth(wrapper.offsetWidth ?? 0);\n      setThumbHeight(wrapper.offsetHeight ?? 0);\n      const width = window.innerWidth;\n      const newPerPage = getPerPageFromBreakpoint(show, width);\n\n      if (newPerPage !== perPage) {\n        setPerPage(newPerPage);\n      }\n    }, 50);\n\n    const observer = new ResizeObserver(handleResize);\n    observer.observe(wrapper);\n\n    return () => {\n      observer.unobserve(wrapper);\n    };\n  }, [perPage, show]);\n\n  // Scrolling logic controls\n  const handleThumbnailsScroll = useCallback(\n    (nextSlideIndex: number) => {\n      const nextItem = loop ? nextSlideIndex - 1 : nextSlideIndex;\n      const thumbnailRef = thumbnailsRefs?.current[0];\n      const oneItemWidth = thumbnailRef?.offsetWidth + THUMB_GAP;\n      const oneItemHeight = thumbnailRef?.offsetHeight + THUMB_GAP;\n      const thumbnailsWrapper = thumbnailsWrapperRef.current!;\n\n      const isRow = controls === 'thumbnailsRow';\n      const isColumn = controls === 'thumbnailsColumn';\n      const offset = isRow\n        ? thumbnailsWrapper?.offsetWidth\n        : thumbnailsWrapper?.offsetHeight;\n      const oneItemSize = isRow ? oneItemWidth : oneItemHeight;\n\n      if ((isRow || isColumn) && offset) {\n        const visibleThumbnails = Math.floor(\n          (isRow\n            ? thumbnailsWrapper.clientWidth\n            : thumbnailsWrapper.clientHeight) / oneItemSize\n        );\n        const centerOffset = Math.floor(visibleThumbnails / 2);\n        const targetScrollPosition = (nextItem - centerOffset) * oneItemSize;\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n\n        if (isRow) {\n          thumbnailsWrapper.scrollLeft = isRTL()\n            ? -(\n                thumbnailsWrapper.scrollWidth -\n                thumbnailsWrapper.clientWidth -\n                targetScrollPosition\n              )\n            : targetScrollPosition;\n        } else {\n          thumbnailsWrapper.scrollTop = targetScrollPosition;\n        }\n      }\n    },\n    [controls, loop]\n  );\n\n  useEffect(() => {\n    handleThumbnailsScroll(current);\n  }, [current, handleThumbnailsScroll]);\n\n  // Navigation\n  const handleScrollTo = useCallback(\n    (nextSlideIndex: number, smooth?: boolean, reset?: boolean) => {\n      if (thumbnailControls) {\n        handleThumbnailsScroll(nextSlideIndex);\n      }\n\n      const wrapper = wrapperRef.current!;\n      const realWidth = peakWidth\n        ? wrapper.offsetWidth - peakWidth\n        : wrapper.offsetWidth - peakWidth + gapWidth;\n\n      const items = Array.from(wrapper.querySelectorAll('[data-index]')).filter(\n        (element) => {\n          const dataIndex = Number(element.getAttribute('data-index')!);\n          return !isNaN(dataIndex) && dataIndex > -1;\n        }\n      );\n\n      const item = items[nextSlideIndex];\n\n      if (!item) {\n        return;\n      }\n\n      if (reset) {\n        const futureIndex = nextSlideIndex === 0 ? length : 0;\n        const scrollWidth =\n          realWidth * (length + (rest ? rest : perPage) / perPage);\n\n        if (isRTL()) {\n          if (\n            wrapper.scrollLeft <= 0 &&\n            wrapper.scrollLeft > -(realWidth - 5)\n          ) {\n            handleScrollTo(1, true);\n            return;\n          }\n          if (\n            wrapper.scrollLeft < realWidth - scrollWidth &&\n            wrapper.scrollLeft >= -scrollWidth\n          ) {\n            handleScrollTo(length, true);\n            return;\n          }\n\n          wrapper.style.scrollBehavior = 'auto';\n          wrapper.scrollLeft = futureIndex === 0 ? 0 : -scrollWidth;\n          handleScrollTo(futureIndex === 0 ? 1 : length, true);\n        } else {\n          if (wrapper.scrollLeft >= 0 && wrapper.scrollLeft < realWidth - 5) {\n            handleScrollTo(1, true);\n            return;\n          }\n\n          if (\n            wrapper.scrollLeft > scrollWidth - realWidth &&\n            wrapper.scrollLeft <= scrollWidth\n          ) {\n            handleScrollTo(length, true);\n            return;\n          }\n\n          wrapper.style.scrollBehavior = 'auto';\n          wrapper.scrollLeft = futureIndex === 0 ? 0 : scrollWidth;\n          handleScrollTo(futureIndex === 0 ? 1 : length, true);\n          return;\n        }\n      }\n\n      const diff =\n        ((wrapper.offsetWidth - gapWidth) / perPage) *\n          slides[nextSlideIndex].length -\n        peakWidth;\n\n      wrapper.style.scrollBehavior = smooth ? 'smooth' : 'auto';\n      wrapper.scrollLeft = isRTL()\n        ? -(slides[nextSlideIndex].length === perPage\n            ? realWidth * nextSlideIndex\n            : realWidth * (nextSlideIndex - 1) - diff)\n        : slides[nextSlideIndex].length === perPage\n        ? realWidth * nextSlideIndex\n        : realWidth * (nextSlideIndex - 1) + diff;\n      return;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      gapWidth,\n      length,\n      peakWidth,\n      perPage,\n      rest,\n      slides,\n      handleThumbnailsScroll,\n      controls,\n    ]\n  );\n\n  const handleGoToPrev = useCallback(() => {\n    if (loop) {\n      const nextSlideIndex = current - 1;\n      handleScrollTo(\n        nextSlideIndex,\n        true,\n        isRTL() ? current === length - 1 : current === 1\n      );\n      return;\n    }\n\n    const nextSlideIndex = current <= 0 ? 0 : current - 1;\n    handleScrollTo(nextSlideIndex, true);\n  }, [current, handleScrollTo, loop]); //eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleGoToNext = useCallback(() => {\n    const lastSlideIndex = slides.length - 1;\n\n    if (loop) {\n      const nextSlideIndex = current + 1;\n      handleScrollTo(\n        nextSlideIndex,\n        true,\n        isRTL() ? current === 0 : current === length\n      );\n      return;\n    }\n\n    const nextSlideIndex =\n      current >= lastSlideIndex ? lastSlideIndex : current + 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [slides.length, loop, current, handleScrollTo, length]);\n\n  // Navigate with keyboard\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault();\n        isRTL() ? handleGoToNext() : handleGoToPrev();\n      }\n\n      if (event.key === 'ArrowRight') {\n        event.preventDefault();\n        isRTL() ? handleGoToPrev() : handleGoToNext();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleGoToNext, handleGoToPrev]);\n\n  // Set default index\n  useEffect(() => {\n    handleScrollTo(loop ? defaultIndex + 1 : defaultIndex, false);\n  }, [defaultIndex, handleScrollTo, loop]);\n\n  // Track scrolling (swipes)\n  const handleOnScroll = debounce(() => {\n    const wrapper = wrapperRef.current!;\n    const realWidth = peakWidth\n      ? wrapper.offsetWidth - peakWidth\n      : wrapper.offsetWidth - peakWidth + gapWidth;\n\n    const dividing = Math.abs(wrapper.scrollLeft) / realWidth;\n    const nextSlideIndex = Math.abs(\n      Math.round(dividing) - dividing < 1\n        ? Math.round(dividing)\n        : Math.ceil(dividing)\n    );\n\n    if (thumbnailControls) {\n      handleThumbnailsScroll(nextSlideIndex);\n    }\n\n    if (loop) {\n      const totalWidth =\n        realWidth * (length + (rest ? rest : perPage) / perPage);\n      const scrollOffset = isRTL() ? -wrapper.scrollLeft : wrapper.scrollLeft;\n\n      if (Math.ceil(Math.abs(scrollOffset)) >= Math.ceil(totalWidth) - 5) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = isRTL()\n          ? -wrapper.offsetWidth +\n            (Math.ceil(scrollOffset) - Math.ceil(totalWidth) - peakWidth)\n          : wrapper.offsetWidth +\n            (Math.ceil(scrollOffset) - Math.ceil(totalWidth) - peakWidth);\n        return;\n      }\n\n      if (Math.abs(scrollOffset) === 0) {\n        wrapper.style.scrollBehavior = 'auto';\n\n        wrapper.scrollLeft = isRTL()\n          ? -(totalWidth - wrapper.offsetWidth + peakWidth)\n          : totalWidth - wrapper.offsetWidth + peakWidth;\n        return;\n      }\n    }\n\n    if (current !== nextSlideIndex) {\n      setCurrent(nextSlideIndex);\n    }\n  }, 100);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    wrapper?.addEventListener('scroll', handleOnScroll);\n\n    return () => {\n      wrapper?.removeEventListener('scroll', handleOnScroll);\n    };\n  }, [handleOnScroll]);\n\n  // thumbnails is column -> container is row reverse, controls is column\n  // thumbnails is row -> container is column, controls is row\n  const getArrow = (\n    forThumbnails: boolean,\n    direction: string,\n    callback: () => void\n  ) => {\n    return (\n      <Button\n        className={classes([\n          ['pdp-carousel__button', !forThumbnails],\n          [`pdp-carousel__button--${direction}`, !forThumbnails],\n          [`pdp-carousel__button--${controls}`, forThumbnails],\n        ])}\n        style={{\n          '--height': `${thumbHeight}px`,\n        }}\n        variant=\"tertiary\"\n        aria-label={direction === 'next' ? NextLabel : PreviousLabel}\n        onClick={callback}\n        disabled={\n          loop\n            ? false\n            : direction === 'next'\n            ? current >= slides.length - 1\n            : current < 1\n        }\n      >\n        <Icon\n          className={classes([\n            ['pdp-carousel__button__icon', !forThumbnails],\n            [`pdp-carousel__button__icon--${direction}`, !forThumbnails],\n            [\n              `pdp-carousel__button__icon--${controls}--${direction}`,\n              forThumbnails,\n            ],\n          ])}\n          size={ICON_SIZE}\n          source={ChevronDown}\n        />\n      </Button>\n    );\n  };\n\n  const prevArrow =\n    arrows &&\n    slides.length != 1 &&\n    getArrow(thumbnailControls, 'prev', handleGoToPrev);\n\n  const nextArrow =\n    arrows &&\n    slides.length != 1 &&\n    getArrow(thumbnailControls, 'next', handleGoToNext);\n\n  const prevArrowMainImage =\n    arrows && slides.length != 1 && getArrow(false, 'prev', handleGoToPrev);\n\n  const nextArrowMainImage =\n    arrows && slides.length != 1 && getArrow(false, 'next', handleGoToNext);\n\n  return (\n    <div\n      role=\"region\"\n      aria-roledescription={Label}\n      className={classes([\n        'pdp-carousel',\n        ['pdp-carousel--main-image-controls', arrowsOnMainImage],\n        ['pdp-carousel--arrows', arrows && !thumbnailControls],\n        [`pdp-carousel--${controls}`, thumbnailControls],\n        className,\n      ])}\n      style={{\n        '--flex-carousel':\n          controls === 'thumbnailsColumn' ? 'row-reverse' : 'column',\n        '--gap': thumbnailControls ? '0' : 'var(--spacing-small)',\n        '--width': width,\n      }}\n      {...props}\n    >\n      {/* Slideshow */}\n      <div\n        ref={wrapperRef}\n        className={classes([\n          'pdp-carousel__wrapper',\n          `pdp-carousel__wrapper--${direction}`,\n          ['pdp-carousel__wrapper--scrollbar', scrollbar],\n          ['pdp-carousel__wrapper--peak', peak],\n        ])}\n        style={{\n          '--total-width': controls === 'thumbnailsColumn' ? `81.6%` : `100%`,\n          '--height': controls === 'thumbnailsColumn' ? 'auto' : height,\n          '--gap': gap ? `var(--spacing-${gap})` : '0px',\n          '--per-page': perPage,\n        }}\n        tabIndex={0}\n      >\n        {slides.map((page, index) => {\n          const orphan = page.length < perPage;\n\n          return (\n            <div\n              key={index}\n              role=\"group\"\n              aria-roledescription={SlideLabel}\n              data-index={index}\n              className={classes([\n                'pdp-carousel__slide',\n                `pdp-carousel__slide--${direction}`,\n                ['pdp-carousel__slide--active', current === index],\n                ['pdp-carousel__slide--orphan', orphan],\n              ])}\n              style={{\n                '--length': page.length,\n              }}\n            >\n              {page}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Previous and next arrows for Carousel without thumbnails */}\n      {!thumbnailControls && (\n        <>\n          {prevArrow}\n          {nextArrow}\n        </>\n      )}\n\n      {thumbnailControls && arrowsOnMainImage && (\n        <>\n          {prevArrowMainImage}\n          {nextArrowMainImage}\n        </>\n      )}\n\n      {/* Controls */}\n      {controls && slides.length != 1 && (\n        <div\n          className={classes([\n            [\n              `pdp-carousel__controls__container--${controls}`,\n              thumbnailControls,\n            ],\n            [\n              'pdp-carousel__controls__container--no-arrows',\n              !arrows || arrowsOnMainImage,\n            ],\n          ])}\n          style={{\n            '--width': controls === 'thumbnailsRow' ? `${thumbWidth}px` : width,\n            '--height': `${thumbHeight}px`,\n            '--nr-thumbnails': thumbnailSlides.length,\n          }}\n        >\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && prevArrow}\n\n          <div\n            ref={thumbnailsWrapperRef}\n            className={classes([\n              [\n                `pdp-carousel__controls__wrapper--${controls}`,\n                thumbnailControls,\n              ],\n              [`pdp-carousel__controls__wrapper`, thumbnailControls],\n            ])}\n          >\n            <div\n              role=\"group\"\n              aria-label={ControlsLabel}\n              className={classes([\n                'pdp-carousel__controls',\n                [`pdp-carousel__controls--${controls}`, thumbnailControls],\n              ])}\n            >\n              {(loop ? slides.slice(0, length) : slides).map((_, key) => {\n                const buttonsLength = loop ? length : slides.length;\n                const active = loop ? current - 1 === key : current === key;\n\n                if (!thumbnailControls) {\n                  return (\n                    <button\n                      key={key}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      onClick={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      className={classes([\n                        'pdp-carousel__controls__button',\n                        ['pdp-carousel__controls__button--active', active],\n                      ])}\n                    />\n                  );\n                }\n                return (\n                  <label\n                    className={classes(['pdp-carousel__thumbnail__container'])}\n                    key={key}\n                    ref={(el: HTMLLabelElement | null) => {\n                      if (el) {\n                        thumbnailsRefs.current[key] = el;\n                      }\n                    }}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={'carousel-thumbnails'}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      checked={active && thumbWidth !== 0}\n                      onChange={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      {...props}\n                      className={classes([\n                        'pdp-carousel__thumbnail',\n                        [\n                          'pdp-carousel__thumbnail--selected',\n                          active && thumbWidth !== 0,\n                        ],\n                      ])}\n                    />\n\n                    <span\n                      className={classes(['pdp-carousel__thumbnail__span'])}\n                    >\n                      {thumbnailSlides[key]}\n                    </span>\n                  </label>\n                );\n              })}\n            </div>\n          </div>\n\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && nextArrow}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Utilities\nfunction getPerPageFromBreakpoint(\n  breakpoints: { small: number; medium: number; large: number } | number,\n  width = 0\n) {\n  if (typeof breakpoints === 'number') return breakpoints;\n\n  const { small, medium, large } = breakpoints;\n  const breakpointsMap = [\n    { breakpoint: 1024, value: large },\n    { breakpoint: 786, value: medium },\n    { breakpoint: 0, value: small },\n  ];\n\n  const matchingBreakpoint = breakpointsMap.find(\n    ({ breakpoint }) => width > breakpoint\n  );\n\n  return matchingBreakpoint ? matchingBreakpoint.value : small;\n}\n\nfunction isRTL() {\n  return document.documentElement.dir === 'rtl';\n}\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2023 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback, useEffect, useRef } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { Close as CloseSVG } from '@adobe-commerce/elsie/icons';\nimport { Button } from '@adobe-commerce/elsie/components';\n\nimport '@/pdp/components/Overlay/Overlay.css';\n\nexport interface OverlayProps extends HTMLAttributes<HTMLDivElement> {\n  centered?: boolean;\n  onClose?: () => void;\n}\n\nexport const Overlay: FunctionComponent<OverlayProps> = ({\n  centered,\n  onClose,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const CloseLabel = useText('PDP.Overlay.Close.label').label;\n  const overlayRef = useRef<HTMLInputElement>(null);\n  const handleOnClose = useCallback(() => {\n    onClose?.();\n  }, [onClose]);\n\n  // Close on ESC\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleOnClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleOnClose]);\n\n  // Prevent document scrolling\n  useEffect(() => {\n    const input = overlayRef.current;\n    input?.focus();\n\n    const scrollingElement = document.scrollingElement as HTMLElement;\n\n    const defaultOverflowValue = scrollingElement.style.overflow;\n\n    scrollingElement.style.overflow = 'hidden';\n\n    return () => {\n      scrollingElement.style.overflow = defaultOverflowValue;\n    };\n  }, []);\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'pdp-overlay',\n        ['pdp-overlay--centered', centered],\n        className,\n      ])}\n      ref={overlayRef}\n      role=\"dialog\"\n      aria-describedby=\"overlay-content\"\n      tabindex={0}\n    >\n      <div className=\"pdp-overlay__content\" id=\"overlay-content\">\n        {children}\n      </div>\n      <Button\n        aria-label={CloseLabel}\n        variant=\"tertiary\"\n        className=\"pdp-overlay__close-button\"\n        onClick={handleOnClose}\n        icon={<CloseSVG />}\n      />\n    </div>\n  );\n};\n","/**\n * ADOBE CONFIDENTIAL\n * __________________\n * Copyright 2024 Adobe\n * All Rights Reserved.\n * __________________\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n */\nimport { cloneElement, FunctionComponent, VNode } from 'preact';\nimport { Children, useEffect, useState, useRef } from 'preact/compat';\n\nimport '@/pdp/components/Zoom/Zoom.css';\nimport { Button } from '@adobe-commerce/elsie/components';\nimport { Close as CloseSVG } from '@adobe-commerce/elsie/icons';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface ZoomProps {\n  children: VNode[] | VNode;\n  scale?: number;\n  closeButton?: boolean;\n}\n\nexport const Zoom: FunctionComponent<ZoomProps> = ({\n  children,\n  scale = 2.0,\n  closeButton = true,\n}) => {\n  const [zoomed, setZoomed] = useState(false);\n  const [figureClassName, setFigureClassName] = useState('pdp-zoom');\n  const [drag, setDrag] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [dragStartPosition, setDragStartPosition] = useState({ x: 0, y: 0 });\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  // Track touch start position for swipe detection, only used when closeButton is enabled\n  const touchStartRef = useRef<{ x: number; y: number; time: number } | null>(\n    null\n  );\n  const isSwipingRef = useRef<boolean>(false);\n  const lastValidTouchRef = useRef<{ clientX: number; clientY: number } | null>(\n    null\n  );\n\n  const startDrag = (event: TouchEvent) => {\n    if (!zoomed || event.type !== 'touchstart') return;\n    setDragStart({ x: event.touches[0].clientX, y: event.touches[0].clientY });\n    setDragStartPosition({ x: position.x, y: position.y });\n    setDrag(true);\n  };\n\n  const dragMove = (event: TouchEvent) => {\n    if (!drag || event.type !== 'touchmove') return;\n    const zoomer = (\n      event.currentTarget as HTMLElement\n    )?.getBoundingClientRect();\n    const overlap = (100 - 100 / scale) / 2;\n    const movedX = event.touches[0].clientX - dragStart.x;\n    const movedY = event.touches[0].clientY - dragStart.y;\n    const movedXPercent = (movedX * 100) / (zoomer.width * scale);\n    const movedYPercent = (movedY * 100) / (zoomer.height * scale);\n    const x = dragStartPosition.x + movedXPercent;\n    const y = dragStartPosition.y + movedYPercent;\n    setPosition({\n      x: Math.max(-overlap, Math.min(x, overlap)) || 0,\n      y: Math.max(-overlap, Math.min(y, overlap)) || 0,\n    });\n    event.preventDefault();\n  };\n\n  const updatePosition = (event: MouseEvent | TouchEvent) => {\n    const zoomer = (\n      event.currentTarget as HTMLElement\n    )?.getBoundingClientRect();\n\n    const overlap = (100 - 100 / scale) / 2;\n    let coordinates: { clientX: number; clientY: number } | null = null;\n\n    if ('touches' in event) {\n      // For touchend events, touches array will be empty, so use our last stored position\n      if (event.touches.length > 0) {\n        coordinates = event.touches[0];\n        // Store the last valid touch for use in touchend\n        lastValidTouchRef.current = {\n          clientX: coordinates.clientX,\n          clientY: coordinates.clientY,\n        };\n      } else if (event.type === 'touchend' && touchStartRef.current) {\n        // For touchend, use the starting position as fallback\n        coordinates = {\n          clientX: touchStartRef.current.x,\n          clientY: touchStartRef.current.y,\n        };\n      } else if (lastValidTouchRef.current) {\n        // If we have a stored position, use it\n        coordinates = lastValidTouchRef.current;\n      } else {\n        // No valid coordinates available\n        return;\n      }\n    } else if (event instanceof MouseEvent) {\n      coordinates = event;\n    } else {\n      return;\n    }\n\n    // Calculate relative position as percentage from center\n    const relativeX =\n      ((coordinates.clientX - zoomer.left) / zoomer.width) * 100;\n    const relativeY =\n      ((coordinates.clientY - zoomer.top) / zoomer.height) * 100;\n\n    // Adjust position to center on click point\n    const x = ((50 - relativeX) * (scale - 1)) / scale;\n    const y = ((50 - relativeY) * (scale - 1)) / scale;\n\n    setPosition({\n      x: Math.max(-overlap, Math.min(x, overlap)) || 0,\n      y: Math.max(-overlap, Math.min(y, overlap)) || 0,\n    });\n  };\n\n  const handleTouchStart = (event: TouchEvent) => {\n    // Only use swipe detection when closeButton is enabled\n    if (closeButton) {\n      // Record the starting touch position and time\n      touchStartRef.current = {\n        x: event.touches[0].clientX,\n        y: event.touches[0].clientY,\n        time: Date.now(),\n      };\n\n      // Store last valid touch\n      lastValidTouchRef.current = {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      };\n\n      isSwipingRef.current = false;\n\n      if (zoomed) {\n        startDrag(event);\n      }\n    } else {\n      // When closeButton is disabled, use the original behavior\n      if (drag) return;\n\n      !zoomed && updatePosition(event);\n\n      setZoomed(!zoomed);\n\n      event.preventDefault();\n    }\n  };\n\n  const handleTouchMove = (event: TouchEvent) => {\n    if (event.touches.length === 0) return;\n\n    // Store last valid touch position on any move\n    lastValidTouchRef.current = {\n      clientX: event.touches[0].clientX,\n      clientY: event.touches[0].clientY,\n    };\n\n    // When closeButton is enabled, use swipe detection\n    if (closeButton) {\n      if (!touchStartRef.current) return;\n\n      // If already in drag mode, handle drag movement\n      if (drag) {\n        dragMove(event);\n        return;\n      }\n\n      // Detect if this is a swipe (not a tap)\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = Math.abs(touchX - touchStartRef.current.x);\n      const deltaY = Math.abs(touchY - touchStartRef.current.y);\n\n      // If movement exceeds threshold, mark as swiping\n      if (deltaX > 10 || deltaY > 10) {\n        isSwipingRef.current = true;\n      }\n    }\n\n    // Update position if already zoomed\n    if (zoomed) {\n      updatePosition(event);\n    }\n  };\n\n  const handleTouchEnd = (event: TouchEvent) => {\n    // When closeButton is enabled, use swipe detection\n    if (closeButton) {\n      if (!touchStartRef.current) return;\n\n      // Handle tap vs swipe\n      const tapDuration = Date.now() - touchStartRef.current.time;\n\n      // Only trigger zoom on tap (not swipe) and when tap is short enough\n      if (!isSwipingRef.current && tapDuration < 300 && !drag) {\n        setZoomed(true);\n        updatePosition(event);\n        event.preventDefault();\n      }\n\n      // Reset drag state and clear touch tracking\n      setDrag(false);\n      touchStartRef.current = null;\n    } else {\n      // When closeButton is disabled, simply toggle zoom\n      setZoomed(false);\n    }\n  };\n\n  const handleClick = (event: MouseEvent) => {\n    // Only handle mouse clicks here\n    if ('touches' in event) return;\n\n    if (drag) return;\n\n    if (zoomed) {\n      !closeButton && setZoomed(false);\n    } else {\n      setZoomed(true);\n      updatePosition(event);\n    }\n    event.preventDefault();\n  };\n\n  const handleMove = (event: MouseEvent) => {\n    // Only handle mouse moves here\n    if ('touches' in event) return;\n\n    if (zoomed) {\n      updatePosition(event);\n    }\n  };\n\n  const handleLeave = (event: MouseEvent) => {\n    // Only handle mouse events\n    if ('touches' in event) return;\n\n    if (closeButton) {\n      setDrag(false);\n      return;\n    }\n    setZoomed(false);\n  };\n\n  const closeButtonClick = (event: MouseEvent | TouchEvent) => {\n    setZoomed(false);\n    event.stopPropagation();\n  };\n\n  const transformStyle = zoomed\n    ? `scale(${scale}) translateX(${position.x}%) translateY(${position.y}%)`\n    : 'none';\n\n  const CloseLabel = useText('PDP.Zoom.Close.label').label;\n  const ImageClone = cloneElement(Children.only(children) as any, {\n    draggable: false,\n    style: {\n      '--transform': transformStyle,\n    },\n  });\n\n  useEffect(() => {\n    const className = zoomed\n      ? `pdp-zoom ${closeButton ? 'pdp-zoom--no-effects' : 'pdp-zoom--zoomed'}`\n      : 'pdp-zoom';\n    setFigureClassName(className);\n  }, [zoomed, closeButton]);\n\n  return (\n    <figure\n      className={figureClassName}\n      onClick={handleClick}\n      onMouseMove={handleMove}\n      onMouseLeave={handleLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleTouchMove}\n      onTouchEnd={handleTouchEnd}\n    >\n      {ImageClone}\n      {closeButton && zoomed && (\n        <Button\n          aria-label={CloseLabel}\n          variant=\"tertiary\"\n          className=\"pdp-zoom__close-button\"\n          icon={<CloseSVG />}\n          onClick={closeButtonClick}\n        />\n      )}\n    </figure>\n  );\n};\n"],"names":["SvgChevronDown","props","React","SvgClose","PEAK_WIDTH","THUMB_GAP","ICON_SIZE","GapSize","Carousel","show","scrollbar","peak","arrows","controls","arrowsOnMainImage","loop","gap","direction","width","height","defaultIndex","className","children","thumbnails","isZoomed","Label","useText","SlideLabel","PreviousLabel","NextLabel","ControlsLabel","ControlsBtnLabel","perPage","setPerPage","useState","getPerPageFromBreakpoint","length","Children","peakWidth","gapWidth","rest","current","setCurrent","isRTL","thumbnailsRefs","useRef","thumbWidth","setThumbWidth","thumbHeight","setThumbHeight","thumbnailSlides","useMemo","slides","returnValue","acc","child","i","wrapperRef","thumbnailsWrapperRef","thumbnailControls","useEffect","wrapper","handleResize","debounce","newPerPage","observer","handleThumbnailsScroll","useCallback","nextSlideIndex","nextItem","thumbnailRef","oneItemWidth","oneItemHeight","thumbnailsWrapper","isRow","isColumn","offset","oneItemSize","visibleThumbnails","centerOffset","targetScrollPosition","handleScrollTo","smooth","reset","realWidth","element","dataIndex","futureIndex","scrollWidth","diff","handleGoToPrev","handleGoToNext","lastSlideIndex","handleKeyDown","event","handleOnScroll","dividing","totalWidth","scrollOffset","getArrow","forThumbnails","callback","jsx","Button","classes","Icon","ChevronDown","prevArrow","nextArrow","prevArrowMainImage","nextArrowMainImage","jsxs","page","index","orphan","Fragment","_","key","buttonsLength","active","el","breakpoints","small","medium","large","matchingBreakpoint","breakpoint","Overlay","centered","onClose","CloseLabel","overlayRef","handleOnClose","input","scrollingElement","defaultOverflowValue","CloseSVG","Zoom","scale","closeButton","zoomed","setZoomed","figureClassName","setFigureClassName","drag","setDrag","dragStart","setDragStart","dragStartPosition","setDragStartPosition","position","setPosition","touchStartRef","isSwipingRef","lastValidTouchRef","startDrag","dragMove","zoomer","_a","overlap","movedX","movedY","movedXPercent","movedYPercent","x","y","updatePosition","coordinates","relativeX","relativeY","handleTouchStart","handleTouchMove","touchX","touchY","deltaX","deltaY","handleTouchEnd","tapDuration","handleClick","handleMove","handleLeave","closeButtonClick","transformStyle","ImageClone","cloneElement"],"mappings":"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","x_google_ignoreList":[0,1]}