{"version":3,"file":"Image.js","sources":["/@dropins/tools/src/i18n/index.ts","/@dropins/tools/src/components/UIProvider/UIProvider.tsx","/@dropins/tools/src/components/Image/Image.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { deepmerge } from '@adobe-commerce/elsie/lib';\nimport en_US from '@adobe-commerce/elsie/i18n/en_US.json';\n\nexport type Lang = 'en_US';\n\nexport const definition = {\n  default: en_US,\n  en_US,\n};\n\n// https://github.com/synacor/preact-i18n\n// eslint-disable-next-line no-restricted-imports\nexport * from 'preact-i18n';\n\nexport const getDefinitionByLanguage = (lang: Lang) => {\n  return deepmerge(definition.default, definition[lang] || {});\n};\n","/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes, createContext, useMemo } from 'preact/compat';\nimport { deepmerge, Render } from '@adobe-commerce/elsie/lib';\nimport { IntlProvider, getDefinitionByLanguage, Lang } from '@adobe-commerce/elsie/i18n';\n\nimport '@adobe-commerce/elsie/components/UIProvider/UIProvider.css';\nimport '@adobe-commerce/elsie/components/UIProvider/normalize.css';\n\nexport const UIContext = createContext<{\n  locale: string;\n}>({\n  locale: 'en-US',\n});\n\ntype LangDefinitions = { [key: string]: any };\n\nexport interface UIProviderProps extends HTMLAttributes<HTMLDivElement> {\n  lang?: Lang; // ... list of other supported languages\n  langDefinitions?: LangDefinitions;\n}\n\nexport const UIProvider: FunctionComponent<UIProviderProps> = ({\n  lang = 'en_US',\n  langDefinitions = {},\n  children,\n}) => {\n  const definitions = useMemo(() => {\n    // Merge default definition with selected definition\n    const selectedDefinitions: LangDefinitions = deepmerge(\n      langDefinitions.default,\n      langDefinitions[lang] ?? {}\n    );\n\n    // Merge SDK default definitions with custom definitions\n    return deepmerge(\n      getDefinitionByLanguage(lang), // SDK default definitions\n      selectedDefinitions // Custom definitions\n    );\n  }, [lang, langDefinitions]);\n\n  const locale = lang.replace('_', '-');\n\n  return (\n    <UIContext.Provider value={{ locale }}>\n      <IntlProvider definition={definitions}>\n        <>{children}</>\n      </IntlProvider>\n    </UIContext.Provider>\n  );\n};\n\nexport const provider = new Render(<UIProvider />);","/********************************************************************\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useMemo, useState } from 'preact/compat';\nimport {\n  classes,\n  generateSrcset,\n  ResolveImageUrlOptions,\n} from '@adobe-commerce/elsie/lib';\nimport '@adobe-commerce/elsie/components/Image/Image.css';\n\nexport interface ImageProps extends HTMLAttributes<HTMLDivElement> {\n  params?: ResolveImageUrlOptions;\n  src: string;\n  onLoad?: (e: any) => void;\n}\nexport const Image: FunctionComponent<ImageProps> = ({\n  className,\n  src,\n  params,\n  loading = 'lazy',\n  srcSet,\n  onLoad,\n  ...props\n}) => {\n  const [loaded, setLoaded] = useState(false);\n\n  const _srcSet = useMemo(() => {\n    // If srcSet is provided, use it\n    if (srcSet) return srcSet;\n\n    // If src is not provided, return \"undefined\"\n    if (!src || !params) return;\n\n    // Otherwise, generate srcSet based on params\n    return generateSrcset(src, { ...params });\n  }, [params, src, srcSet]);\n\n  // Add class at image onLoad\n  const onLoadHandler = (e: any) => {\n    setLoaded(true);    \n    onLoad?.(e);\n  };\n\n  return (\n    <img\n      {...props}\n      className={classes([\n        'dropin-image',\n        ['dropin-image--loaded', loaded],\n        className,\n      ])}\n      loading={loading}\n      onLoad={onLoadHandler}\n      src={src}\n      srcSet={_srcSet}\n    />\n  );\n};\n"],"names":["definition","en_US","getDefinitionByLanguage","lang","deepmerge","UIContext","createContext","UIProvider","langDefinitions","children","definitions","useMemo","selectedDefinitions","locale","jsx","IntlProvider","Fragment","provider","Render","Image","className","src","params","loading","srcSet","onLoad","props","loaded","setLoaded","useState","_srcSet","generateSrcset","onLoadHandler","e","classes"],"mappings":"k9EAcaA,EAAa,CACxB,QAASC,EACT,MAAAA,CACF,EAMaC,EAA2BC,GAC/BC,EAAUJ,EAAW,QAASA,EAAWG,CAAI,GAAK,EAAE,ECPhDE,EAAYC,EAEtB,CACD,OAAQ,OACV,CAAC,EASYC,EAAiD,CAAC,CAC7D,KAAAJ,EAAO,QACP,gBAAAK,EAAkB,CAAC,EACnB,SAAAC,CACF,IAAM,CACE,MAAAC,EAAcC,EAAQ,IAAM,CAEhC,MAAMC,EAAuCR,EAC3CI,EAAgB,QAChBA,EAAgBL,CAAI,GAAK,CAAA,CAC3B,EAGO,OAAAC,EACLF,EAAwBC,CAAI,EAC5BS,CACF,CAAA,EACC,CAACT,EAAMK,CAAe,CAAC,EAEpBK,EAASV,EAAK,QAAQ,IAAK,GAAG,EAEpC,OACGW,EAAAT,EAAU,SAAV,CAAmB,MAAO,CAAE,OAAAQ,CAAA,EAC3B,SAAAC,EAACC,GAAa,WAAYL,EACxB,SAAGI,EAAAE,EAAA,CAAA,SAAAP,CAAA,CAAS,CACd,CAAA,EACF,CAEJ,EAEaQ,EAAW,IAAIC,EAAOJ,EAACP,IAAW,CAAE,ECrCpCY,EAAuC,CAAC,CACnD,UAAAC,EACA,IAAAC,EACA,OAAAC,EACA,QAAAC,EAAU,OACV,OAAAC,EACA,OAAAC,EACA,GAAGC,CACL,IAAM,CACJ,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAS,EAAK,EAEpCC,EAAUnB,EAAQ,IAAM,CAE5B,GAAIa,EAAe,OAAAA,EAGf,GAAA,GAACH,GAAO,CAACC,GAGb,OAAOS,EAAeV,EAAK,CAAE,GAAGC,EAAQ,CACvC,EAAA,CAACA,EAAQD,EAAKG,CAAM,CAAC,EAGlBQ,EAAiBC,GAAW,CAChCL,EAAU,EAAI,EACdH,GAAA,MAAAA,EAASQ,EACX,EAGE,OAAAnB,EAAC,MAAA,CACE,GAAGY,EACJ,UAAWQ,EAAQ,CACjB,eACA,CAAC,uBAAwBP,CAAM,EAC/BP,CAAA,CACD,EACD,QAAAG,EACA,OAAQS,EACR,IAAAX,EACA,OAAQS,CAAA,CACV,CAEJ"}