{"version":3,"file":"ProductList.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Warning.svg","../../node_modules/@adobe-commerce/elsie/src/components/ProductItemCard/ProductItemCardSkeleton.tsx","../../node_modules/@adobe-commerce/elsie/src/components/ProductItemCard/ProductItemCard.tsx","/@dropins/storefront-product-discovery/src/containers/ProductList/utils/getProductSearch.ts","/@dropins/storefront-product-discovery/src/containers/ProductList/utils/getAttributeMetadata.ts","/@dropins/storefront-product-discovery/src/containers/ProductList/utils/sortUtils.ts","/@dropins/storefront-product-discovery/src/components/ProductList/ProductList.tsx","/@dropins/storefront-product-discovery/src/components/SearchAlertMessage/SearchAlertMessage.tsx","/@dropins/storefront-product-discovery/src/containers/ProductList/utils/urlUtils.ts","/@dropins/storefront-product-discovery/src/utils/htmlStringDecode.ts","/@dropins/storefront-product-discovery/src/containers/ProductList/ProductList.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgWarning = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Warning_Base\", width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_841_1324)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M11.9949 2.30237L0.802734 21.6977H23.1977L11.9949 2.30237Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M12.4336 10.5504L12.3373 14.4766H11.6632L11.5669 10.5504V9.51273H12.4336V10.5504ZM11.5883 18.2636V17.2687H12.4229V18.2636H11.5883Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_841_1324\" }, /* @__PURE__ */ React.createElement(\"rect\", { width: 24, height: 21, fill: \"white\", transform: \"translate(0 1.5)\" }))));\nexport default SvgWarning;\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe-commerce/elsie/components';\nimport '@adobe-commerce/elsie/components/ProductItemCard/ProductItemCardSkeleton.css';\n\nexport const ProductItemCardSkeleton: FunctionComponent = () => {\n  return (\n    <div className=\"dropin-product-item-card dropin-product-item-card-skeleton\">\n      <Skeleton className=\"dropin-product-item-card__skeleton dropin-product-item-card__image-container\">\n        <SkeletonRow\n          fullWidth={true}\n          className=\"dropin-product-item-card__skeleton__image\"\n        />\n        <div className=\"dropin-product-item-card__content dropin-product-item-card__skeleton__content\">\n          <SkeletonRow\n            fullWidth={true}\n            size=\"large\"\n            className=\"dropin-product-item-card__skeleton__item\"\n          />\n          <SkeletonRow\n            fullWidth={true}\n            size=\"xsmall\"\n            className=\"dropin-product-item-card__skeleton__item\"\n          />\n          <SkeletonRow\n            fullWidth={true}\n            size=\"small\"\n            className=\"dropin-product-item-card__skeleton__item\"\n          />\n        </div>{' '}\n      </Skeleton>\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { VComponent, classes } from '@adobe-commerce/elsie/lib';\nimport { ProductItemCardSkeleton } from '@adobe-commerce/elsie/components/ProductItemCard/ProductItemCardSkeleton';\nimport '@adobe-commerce/elsie/components/ProductItemCard/ProductItemCard.css';\n\nexport interface ProductItemCardProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'loading'> {\n  image?: VNode;\n  titleNode?: VNode;\n  price?: VNode;\n  sku?: VNode;\n  actionButton?: VNode;\n  swatches?: VNode;\n  initialized?: boolean;\n}\n\nexport const ProductItemCard: FunctionComponent<ProductItemCardProps> = ({\n  className,\n  image,\n  titleNode,\n  price,\n  sku,\n  actionButton,\n  swatches,\n  initialized = false,\n  ...props\n}) => {\n  if (!initialized) {\n    return <ProductItemCardSkeleton />;\n  }\n  return (\n    <div\n      {...props}\n      className={classes(['dropin-product-item-card', className])}\n    >\n      <div className=\"dropin-product-item-card__image-container\">\n        {image && (\n          <VComponent\n            node={image}\n            className={classes(['dropin-product-item-card__image'])}\n          />\n        )}\n      </div>\n      <div className=\"dropin-product-item-card__content\">\n        {titleNode && (\n          <VComponent\n            node={titleNode}\n            className={classes(['dropin-product-item-card__title'])}\n          />\n        )}\n        {sku && (\n          <VComponent\n            node={sku}\n            className={classes(['dropin-product-item-card__sku'])}\n          />\n        )}\n        {price && (\n          <div className=\"dropin-product-item-card__price\">\n            <VComponent\n              node={price}\n              className={classes(['dropin-product-item-card__price'])}\n            />\n          </div>\n        )}\n        {swatches && (\n          <div className=\"dropin-product-item-card__swatches\">\n            <VComponent\n              node={swatches}\n              className={classes(['dropin-product-item-card__swatches'])}\n            />\n          </div>\n        )}\n        {actionButton && (\n          <div className=\"dropin-product-item-card__action\">\n            <VComponent\n              node={actionButton}\n              className={classes(['dropin-product-item-card__action'])}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { productSearch as productSearchQuery } from '@/plp/api';\nimport { SearchVariables } from '@/plp/data/models';\nimport { transformProductSearchResponse } from '@/plp/data/transforms';\nimport {\n  PLP_UNIT_ID,\n  searchRequestSent,\n  searchResponseReceived,\n  searchResultsView,\n  updateSearchInputCtx,\n  updateSearchResultsCtx,\n} from '@/plp/utils/acdlEvents';\n\nexport function getProductSearch(variables: SearchVariables): any {\n  let searchRequestId = '';\n  // ======  data collection =====\n  try {\n    searchRequestId = self.crypto.randomUUID();\n    updateSearchInputCtx(\n      PLP_UNIT_ID,\n      searchRequestId,\n      variables.phrase || '',\n      variables.filter || [],\n      variables.pageSize || 0,\n      variables.currentPage || 0,\n      variables.sort || [],\n    );\n    searchRequestSent(PLP_UNIT_ID);\n  } catch (e) {\n    console.error('Error collecting data:', e);\n  }\n  // =============================\n\n  //Add default visibility filter\n  const defaultVisibilityFilter = { attribute: 'visibility', in: ['Search', 'Catalog, Search'] };\n  const searchObj = structuredClone(variables);\n  searchObj.filter?.push(defaultVisibilityFilter);\n\n  return productSearchQuery(searchObj)\n    .then((value: any | null) => {\n      const transformedResponse = transformProductSearchResponse(value);\n\n      try {\n        // =====  data collection =====\n        updateSearchResultsCtx(PLP_UNIT_ID, searchRequestId, transformedResponse);\n        searchResponseReceived(PLP_UNIT_ID);\n        // TODO: Publish view events base on search type\n        if (variables.phrase) {\n          searchResultsView(PLP_UNIT_ID);\n        }\n        // else {\n        //     categoryResultsView();\n        // }\n        // ============================\n      } catch (e) {\n        console.error('Error collecting data:', e);\n      }\n\n      return transformedResponse;\n    })\n    .catch((error: any) => {\n      console.error('Error fetching product search:', error);\n      throw new Error('Error fetching product search.');\n    })\n    .finally(() => {});\n}\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { attributeMetadata as attributeMetadataQuery } from '@/plp/api';\nimport { transformAttributeMetadata } from '@/plp/data/transforms';\n\nexport function getAttributeMetadata(): any {\n  return attributeMetadataQuery()\n    .then((value: any | null) => {\n      return transformAttributeMetadata(value);\n    })\n    .catch((error: any) => {\n      console.error('Error fetching attribute metadata:', error);\n      throw new Error('Error fetching attribute metadata.');\n    })\n    .finally(() => {});\n}\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { SortOrder } from '@/plp/data/models/api';\nconst getDefaultSort = (translations: any): any => {\n  return { text: translations.relevanceLabel, value: 'relevance_DESC' };\n};\n\nconst setSortOptions = (sortOptions: any, translations: any): any => {\n  const defaultSort = getDefaultSort(translations); //{ text: translations.relevanceLabel, value: 'relevance_DESC'};\n  // const categorySortDefault = { attribute: 'position', direction: 'ASC' };\n\n  const finalSortOptions = sortOptions.reduce((resultOptions: any, option: any) => {\n    if (option.attribute !== 'position' && option.attribute !== 'relevance') {\n      if (option.attribute === 'price') {\n        resultOptions.push({\n          text: translations.sortASC,\n          value: `${option.attribute}_ASC`,\n        });\n        resultOptions.push({\n          text: translations.sortDESC,\n          value: `${option.attribute}_DESC`,\n        });\n      } else {\n        resultOptions.push({\n          text: option.label,\n          value: `${option.attribute}_DESC`,\n        });\n      }\n    }\n    return resultOptions;\n  }, []);\n  finalSortOptions.push(defaultSort);\n  return { options: finalSortOptions, default: defaultSort };\n};\n\nconst getSortSearchVariables = (sortValue: string): SortOrder[] => {\n  const index = sortValue.indexOf('_');\n  const newSort: SortOrder[] = [\n    {\n      attribute: sortValue.substring(0, index) as string,\n      direction: sortValue.substring(index + 1) === 'ASC' ? 'ASC' : 'DESC',\n    },\n  ];\n  return newSort;\n};\n\nconst getSortValue = (sort: SortOrder[]): string => {\n  if (sort.length > 0) {\n    return `${sort[0].attribute}_${sort[0].direction}`;\n  }\n  return '';\n};\n\nconst getPickerOption = (options: any, value: string): any => {\n  const index = options.findIndex((option: any) => option.value === value);\n  if (index > -1) {\n    return options[index];\n  }\n  return null;\n};\n\nexport { getDefaultSort, getSortSearchVariables, setSortOptions, getPickerOption, getSortValue };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/plp/components/ProductList/ProductList.css';\n\nexport interface ProductListProps extends HTMLAttributes<HTMLDivElement> {\n  header?: VNode;\n  productList?: VNode[];\n  footer?: VNode;\n}\n\nexport const ProductList: FunctionComponent<ProductListProps> = ({ header, productList, footer }) => {\n  return (\n    <div className={'plp-product-list'}>\n      {header && <VComponent className=\"plp-product-list__header\" node={header} />}\n      <div className=\"plp-product-list__grid\">{productList && <VComponent node={productList} />}</div>\n      {footer && <VComponent className=\"plp-product-list__pagination\" node={footer} />}\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport '@/plp/components/SearchAlertMessage/SearchAlertMessage.css';\nimport { Icon, InLineAlert } from '@adobe-commerce/elsie/components';\nimport { Warning } from '@adobe-commerce/elsie/icons';\n\nexport interface SearchAlertMessageProps extends HTMLAttributes<HTMLDivElement> {\n  alertMessage?: string;\n}\n\nexport const SearchAlertMessage: FunctionComponent<SearchAlertMessageProps> = ({ alertMessage = '' }) => {\n  return (\n    <div className={classes(['plp-search-alert-message__wrapper'])}>\n      <div className=\"plp-search-alert-message__content\">\n        <InLineAlert\n          heading={alertMessage}\n          type={'warning'}\n          icon={<Icon source={Warning} size=\"24\" />}\n          onDismiss={undefined}\n        />\n      </div>\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nconst nonFilterKeys = {\n  search: 'q',\n  search_query: 'search_query',\n  pagination: 'p',\n  sort: 'product_list_order',\n  page_size: 'page_size',\n};\n\nconst getValueFromUrl = (param: string) => {\n  const params = getSearchParams();\n  const filter = params.get(param);\n  if (filter) {\n    return filter;\n  }\n  return '';\n};\n\nconst getSearchParams = () => {\n  const search = window.location.search;\n  return new URLSearchParams(search);\n};\n\nconst updateUrlPagination = (pageNumber: number) => {\n  const url = new URL(window.location.href);\n  const params = new URLSearchParams(url.searchParams);\n  if (pageNumber === 1) {\n    params.delete('p');\n  } else {\n    params.set('p', pageNumber.toString());\n  }\n  setWindowHistory(url.pathname, params);\n};\n\nconst updateUrlSort = (sortOption: string) => {\n  const url = new URL(window.location.href);\n  const params = new URLSearchParams(url.searchParams);\n  params.set('product_list_order', sortOption);\n  setWindowHistory(url.pathname, params);\n};\n\nconst updateUrlSearchPhrase = (searchPhrase: string) => {\n  const url = new URL(window.location.href);\n  const params = new URLSearchParams(url.searchParams);\n  params.set('q', searchPhrase);\n  setWindowHistory(url.pathname, params);\n};\n\nconst setWindowHistory = (pathname: string, params: URLSearchParams) => {\n  if (params.toString() === '') {\n    window.history.pushState({}, '', `${pathname}`);\n  } else {\n    window.history.pushState({}, '', `${pathname}?${params.toString()}`);\n  }\n};\n\nconst getFiltersFromUrl = (filterableAttributes: string[]): any[] => {\n  const params = getSearchParams();\n  const filters: any[] = [];\n  for (const [key, value] of params.entries()) {\n    // if nonFilterKeys values includes a key from params (for customizing)\n    if (filterableAttributes.includes(key) && !Object.values(nonFilterKeys).includes(key)) {\n      if (value.includes('--')) {\n        const range = value.split('--');\n        const filter = {\n          attribute: key,\n          range: { from: Number(range[0]), to: Number(range[1]) },\n        };\n        filters.push(filter);\n      } else {\n        const attributeIndex = filters.findIndex((filter) => filter.attribute == key);\n        if (attributeIndex !== -1) {\n          filters[attributeIndex].in?.push(value);\n        } else {\n          const filter = { attribute: key, in: [value] };\n          filters.push(filter);\n        }\n      }\n    }\n  }\n  return filters;\n};\n\nconst addUrlFilters = (filters: any[]) => {\n  const url = new URL(window.location.href);\n  const params = new URLSearchParams(url.searchParams);\n  for (const key of url.searchParams.keys()) {\n    // if nonFilterKeys values includes a key from params (for customizing)\n    if (!Object.values(nonFilterKeys).includes(key)) {\n      params.delete(key);\n    }\n  }\n  filters.forEach((filter) => {\n    const attribute = filter.attribute;\n    if (filter.range) {\n      const filt = filter.range;\n      if (getValueFromUrl(attribute)) {\n        params.delete(attribute);\n        params.append(attribute, `${filt.from}--${filt.to}`);\n      } else {\n        params.append(attribute, `${filt.from}--${filt.to}`);\n      }\n    } else {\n      const filt = filter.in || [];\n      const filterParams = params.getAll(attribute);\n      filt.map((f: any) => {\n        if (!filterParams.includes(f)) {\n          params.append(attribute, f);\n        }\n      });\n    }\n  });\n  setWindowHistory(url.pathname, params);\n};\n\nexport { addUrlFilters, getFiltersFromUrl, getValueFromUrl, updateUrlPagination, updateUrlSort, updateUrlSearchPhrase };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nconst htmlStringDecode = (input: string): string | null => {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n};\n\nexport { htmlStringDecode };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { HTMLAttributes, useCallback, useEffect, useState } from 'preact/compat';\nimport { Container, Slot, SlotProps } from '@adobe-commerce/elsie/lib';\nimport { Image, ImageProps, Pagination, Picker, PickerOption, PriceRange } from '@adobe-commerce/elsie/components';\nimport { ProductItemCard } from '@adobe-commerce/elsie/components/ProductItemCard/ProductItemCard';\nimport { getProductSearch } from './utils/getProductSearch';\nimport { ProductSearchResult, SearchVariables } from '@/plp/data/models';\nimport { getAttributeMetadata } from './utils/getAttributeMetadata';\nimport {\n  getSortSearchVariables,\n  setSortOptions,\n  getPickerOption,\n  getDefaultSort,\n  getSortValue,\n} from './utils/sortUtils';\nimport { SearchAlertMessage } from '@/plp/components';\nimport {\n  addUrlFilters,\n  getFiltersFromUrl,\n  getValueFromUrl,\n  updateUrlPagination,\n  updateUrlSearchPhrase,\n  updateUrlSort,\n} from './utils/urlUtils';\nimport { ProductList as ProductListComponent } from '@/plp/components/ProductList/ProductList';\nimport { useText, Text } from '@adobe-commerce/elsie/i18n';\nimport { Product } from '@/plp/data/models/product';\nimport { htmlStringDecode } from '@/plp/utils/htmlStringDecode';\nimport { events } from '@adobe-commerce/event-bus';\nimport { VNode } from 'preact';\nimport { transformProduct } from '@/plp/data/transforms';\n\nexport interface ProductListProps extends HTMLAttributes<HTMLDivElement> {\n  minQueryLength?: number;\n  slots?: {\n    Header?: SlotProps;\n    ProductActions?: SlotProps;\n    ProductPrice?: SlotProps;\n    ProductName?: SlotProps;\n    ProductImage?: SlotProps;\n    Footer?: SlotProps;\n  };\n  pageSize?: number;\n  routeProduct?: (product: Product) => string;\n}\n\nexport const ProductList: Container<ProductListProps> = ({\n  minQueryLength = 3,\n  slots,\n  pageSize = 12,\n  routeProduct,\n}) => {\n  const translations = useText({\n    relevanceLabel: 'Search.PLP.SortDropdown.relevanceLabel',\n    sortASC: 'Search.PLP.SortDropdown.sortASC',\n    sortDESC: 'Search.PLP.SortDropdown.sortDESC',\n    minQueryLength: <Text id=\"Search.PLP.Warning.minQueryLength\" fields={{ minQueryLength }} />,\n    noResults: 'Search.PLP.Warning.noResults',\n    searchError: 'Search.PLP.Warning.searchError',\n  });\n  const [pickerOptions, setPickerOptions] = useState<PickerOption[]>([]);\n  const [currentPage, setCurrentPage] = useState<number>();\n  const [totalPages, setTotalPages] = useState<number>(1);\n  const [showAlert, setShowAlert] = useState<boolean>(false);\n  const [alertMessage, setAlertMessage] = useState<string>(translations.noResults);\n  const defaultSort = getDefaultSort(translations);\n  const [sortValue, setSortValue] = useState<string>();\n  const [filterableAttributes, setFilterableAttributes] = useState<any[]>([]);\n  // Initialize the product list with empty items to avoid rendering issues\n  const fakeProductList = [...Array(pageSize).keys()].map(() => {\n    const fakeProduct = transformProduct({}) as Product;\n    fakeProduct.initialized = false; // Mark as not initialized for skeleton loading\n    return fakeProduct;\n  });\n  const [productList, setProductList] = useState<Product[]>(fakeProductList);\n\n  const changePage = (page: number): void => {\n    searchProducts({\n      currentPage: page,\n    });\n  };\n\n  const updateCurrentPage = (page: number): void => {\n    setCurrentPage(page);\n    updateUrlPagination(page);\n  };\n\n  const changeSort = (sortValue: any): void => {\n    const newSort = getSortSearchVariables(sortValue);\n    setSortValue(sortValue);\n    searchProducts({\n      sort: newSort,\n    });\n  };\n\n  const updateSearchVariablesQueryString = (variables: SearchVariables): void => {\n    const newPhrase = variables.phrase || '';\n    updateUrlSearchPhrase(newPhrase);\n    const newFilters = variables.filter || [];\n    addUrlFilters(newFilters);\n    const newSortValue = getSortValue(variables.sort || []);\n    updateUrlSort(newSortValue);\n    //page number is set based on product search results\n  };\n\n  const loadMetadata = (urlSort: string): Promise<any[]> => {\n    return getAttributeMetadata()\n      .then((value: any) => {\n        setFilterableAttributes((value?.filterableInSearch || []).map((attr: any) => attr.attribute));\n        const sortOptions = setSortOptions(value?.sortable, translations);\n        setPickerOptions(sortOptions.options);\n        const sortStartValue = getPickerOption(sortOptions.options, urlSort || sortOptions.default.value);\n        setSortValue(sortStartValue.value);\n        const urlFilters = getFiltersFromUrl((value?.filterableInSearch || []).map((attr: any) => attr.attribute));\n        return urlFilters;\n      })\n      .catch(() => {\n        setShowAlert(true);\n        setAlertMessage(translations.searchError);\n      });\n  };\n\n  const searchProducts = (inputVariables?: SearchVariables): Promise<void> | void => {\n    const urlSort = getValueFromUrl('product_list_order');\n    const sortSearchVariable = urlSort ? getSortSearchVariables(urlSort) : getSortSearchVariables(defaultSort.value);\n    const searchVariables = {\n      phrase: inputVariables?.phrase || getValueFromUrl('q'),\n      pageSize: inputVariables?.pageSize || pageSize,\n      currentPage: inputVariables?.currentPage || currentPage,\n      filter: inputVariables?.filter || getFiltersFromUrl(filterableAttributes),\n      sort: inputVariables?.sort || sortSearchVariable,\n    } as SearchVariables;\n    if (inputVariables?.phrase || inputVariables?.filter || inputVariables?.sort || inputVariables?.pageSize) {\n      searchVariables.currentPage = 1; // Reset to first page on new search\n      if (inputVariables?.phrase) {\n        searchVariables.filter = []; // Clear filters if a new search phrase is provided\n        searchVariables.sort = getSortSearchVariables(defaultSort.value); // Reset sort to initial value\n        setSortValue(defaultSort.value);\n      }\n    }\n    updateSearchVariablesQueryString(searchVariables);\n\n    if ((searchVariables?.phrase?.length || 0) < minQueryLength) {\n      setShowAlert(true);\n      setAlertMessage(translations.minQueryLength.replace('{SEARCH_PHRASE}', searchVariables?.phrase || ''));\n      emitEmptySearchEvent();\n    } else {\n      setShowAlert(false);\n      return getProductSearch(searchVariables)\n        .then((value: ProductSearchResult) => {\n          events.emit('search/result', { result: value, request: searchVariables });\n          if (value?.totalCount === 0 && value?.items.length === 0) {\n            setShowAlert(true);\n            setAlertMessage(translations.noResults);\n          } else {\n            setProductList(\n              value?.items.map((product: Product) => {\n                product.initialized = true;\n                return product;\n              }),\n            );\n            updateCurrentPage(value?.pageInfo?.currentPage || 1);\n            setTotalPages(value?.pageInfo?.totalPages || 1);\n          }\n        })\n        .catch(() => {\n          setShowAlert(true);\n          setAlertMessage(translations.searchError);\n          emitEmptySearchEvent();\n        })\n        .finally(() => {});\n    }\n  };\n\n  const handleSearchRequestEvent = useCallback((searchVariables: SearchVariables): void => {\n    searchProducts(searchVariables);\n  }, []);\n\n  const emitEmptySearchEvent = (): void => {\n    events.emit('search/result', { result: {} as ProductSearchResult, request: {} });\n  };\n\n  useEffect(() => {\n    const searchPhrase = getValueFromUrl('q');\n    const urlSort = getValueFromUrl('product_list_order') || defaultSort.value;\n    loadMetadata(urlSort).then((value: any) => {\n      if (searchPhrase?.length && searchPhrase.length < minQueryLength) {\n        setShowAlert(true);\n        setAlertMessage(translations.minQueryLength.replace('{SEARCH_PHRASE}', searchPhrase));\n        emitEmptySearchEvent();\n      } else {\n        searchProducts({ filter: value });\n      }\n    });\n    const requestEvent = events.on('search/request', handleSearchRequestEvent);\n    return () => {\n      requestEvent?.off();\n    };\n  }, []);\n\n  //NODE CREATION\n\n  const getActionsSlot = (product: Product) => {\n    return <Slot name=\"ProductActions\" slot={slots?.ProductActions} context={{ product }} />;\n  };\n\n  const getProductPriceSlot = (product: Product) => {\n    const productPrice =\n      product.typename === 'ComplexProductView' ? (\n        <PriceRange\n          display=\"from to\"\n          minimumAmount={product.priceRange?.minimum.regular.amount.value}\n          maximumAmount={product.priceRange?.maximum.regular.amount.value}\n          currency={product.priceRange?.minimum.regular.amount.currency}\n        />\n      ) : (\n        <PriceRange amount={product.price?.regular.amount.value} currency={product.price?.regular.amount.currency} />\n      );\n    return (\n      <Slot name=\"ProductPrice\" slot={slots?.ProductPrice} context={{ product }}>\n        {routeProduct ? <a href={routeProduct(product)}>{productPrice}</a> : productPrice}\n      </Slot>\n    );\n  };\n\n  const getProductNameSlot = (product: Product) => {\n    const productName = product.name !== null ? htmlStringDecode(product.name) : '';\n    return (\n      <Slot name=\"ProductName\" slot={slots?.ProductName} context={{ product }}>\n        {routeProduct ? <a href={routeProduct(product)}>{productName}</a> : productName}\n      </Slot>\n    );\n  };\n\n  const getProductImageSlot = (product: Product, index: number) => {\n    const defaultImageProps: ImageProps = {\n      loading: index < 8 ? 'eager' : 'lazy',\n      src: product.images?.[0]?.url || '',\n      alt: product.images?.[0]?.label || '',\n      width: '200',\n      height: '250',\n    };\n    const imageComponent = <Image class=\"plp-product-item__image\" {...defaultImageProps} aria-label={product.sku} />;\n    return (\n      <Slot name=\"ProductImage\" slot={slots?.ProductImage} context={{ product }}>\n        {routeProduct ? <a href={routeProduct(product)}>{imageComponent}</a> : imageComponent}\n      </Slot>\n    );\n  };\n\n  const getHeader = () => {\n    return (\n      <Slot name=\"Header\" slot={slots?.Header} context={{ productList }}>\n        <Picker\n          floatingLabel={translations.sortLabel}\n          options={pickerOptions}\n          value={sortValue}\n          required\n          handleSelect={(event) => {\n            const { value } = event.target as HTMLSelectElement;\n            changeSort(value);\n          }}\n          data-testid=\"product-list-sort-by-picker\"\n        />\n      </Slot>\n    );\n  };\n\n  const getFooter = () => {\n    return (\n      <Slot name=\"Footer\" slot={slots?.Footer} context={{ productList }}>\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          onChange={(page) => {\n            changePage(page);\n          }}\n        />\n      </Slot>\n    );\n  };\n\n  const productListComponent = (\n    <ProductListComponent\n      header={getHeader()}\n      footer={getFooter()}\n      productList={\n        productList?.map((product: Product, i: number) => {\n          return (\n            <ProductItemCard\n              key={product.id || product.sku}\n              image={getProductImageSlot(product, i)}\n              titleNode={getProductNameSlot(product)}\n              price={getProductPriceSlot(product)}\n              actionButton={getActionsSlot(product)}\n              initialized={product.initialized}\n            />\n          );\n        }) as VNode[]\n      }\n    />\n  );\n\n  return (\n    <div class=\"plp-product-list__container\">\n      {showAlert ? <SearchAlertMessage alertMessage={alertMessage} /> : productListComponent}\n    </div>\n  );\n};\n"],"names":["SvgWarning","props","React","ProductItemCardSkeleton","jsxs","Skeleton","jsx","SkeletonRow","ProductItemCard","className","image","titleNode","price","sku","actionButton","swatches","initialized","classes","VComponent","getProductSearch","variables","searchRequestId","updateSearchInputCtx","PLP_UNIT_ID","searchRequestSent","e","defaultVisibilityFilter","searchObj","_a","productSearchQuery","value","transformedResponse","transformProductSearchResponse","updateSearchResultsCtx","searchResponseReceived","searchResultsView","error","getAttributeMetadata","attributeMetadataQuery","transformAttributeMetadata","getDefaultSort","translations","setSortOptions","sortOptions","defaultSort","finalSortOptions","resultOptions","option","getSortSearchVariables","sortValue","index","getSortValue","sort","getPickerOption","options","ProductList","header","productList","footer","SearchAlertMessage","alertMessage","InLineAlert","Icon","Warning","nonFilterKeys","getValueFromUrl","param","filter","getSearchParams","search","updateUrlPagination","pageNumber","url","params","setWindowHistory","updateUrlSort","sortOption","updateUrlSearchPhrase","searchPhrase","pathname","getFiltersFromUrl","filterableAttributes","filters","key","range","attributeIndex","addUrlFilters","attribute","filt","filterParams","f","htmlStringDecode","input","minQueryLength","slots","pageSize","routeProduct","useText","Text","pickerOptions","setPickerOptions","useState","currentPage","setCurrentPage","totalPages","setTotalPages","showAlert","setShowAlert","setAlertMessage","setSortValue","setFilterableAttributes","fakeProductList","fakeProduct","transformProduct","setProductList","changePage","page","searchProducts","updateCurrentPage","changeSort","newSort","updateSearchVariablesQueryString","newPhrase","newFilters","newSortValue","loadMetadata","urlSort","attr","sortStartValue","inputVariables","sortSearchVariable","searchVariables","emitEmptySearchEvent","events","product","_b","handleSearchRequestEvent","useCallback","useEffect","requestEvent","getActionsSlot","Slot","getProductPriceSlot","productPrice","PriceRange","_c","_d","_e","getProductNameSlot","productName","getProductImageSlot","defaultImageProps","imageComponent","Image","getHeader","Picker","event","getFooter","Pagination","productListComponent","ProductListComponent","i"],"mappings":"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","x_google_ignoreList":[0,1,2]}