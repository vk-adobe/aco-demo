{"version":3,"file":"Facets.js","sources":["../../node_modules/@adobe-commerce/elsie/src/icons/Add.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Burger.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Close.svg","../../node_modules/@adobe-commerce/elsie/src/icons/Minus.svg","/@dropins/storefront-product-discovery/src/components/Facet/Facet.tsx","/@dropins/storefront-product-discovery/src/components/FacetList/FacetList.tsx","/@dropins/storefront-product-discovery/src/containers/Facets/utils/facetUtils.tsx","/@dropins/storefront-product-discovery/src/containers/Facets/Facets.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Add_Base\", \"data-name\": \"Icon \\\\u2013 Add \\\\u2013 Base\", xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { id: \"Large\" }, /* @__PURE__ */ React.createElement(\"rect\", { id: \"Placement_area\", \"data-name\": \"Placement area\", width: 24, height: 24, fill: \"#fff\", opacity: 0 }), /* @__PURE__ */ React.createElement(\"g\", { id: \"Add_icon\", \"data-name\": \"Add icon\", transform: \"translate(9.734 9.737)\" }, /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_579\", \"data-name\": \"Line 579\", y2: 12.7, transform: \"translate(2.216 -4.087)\", fill: \"none\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_580\", \"data-name\": \"Line 580\", x2: 12.7, transform: \"translate(-4.079 2.263)\", fill: \"none\", stroke: \"currentColor\" }))));\nexport default SvgAdd;\n","import * as React from \"react\";\nconst SvgBurger = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M3 12H21\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M3 6H21\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M3 18H21\", stroke: \"currentColor\" }));\nexport default SvgBurger;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgMinus = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.3332 11.75H6.6665\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\", vectorEffect: \"non-scaling-stroke\", fill: \"none\", stroke: \"currentColor\" }));\nexport default SvgMinus;\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport '@/plp/components/Facet/Facet.css';\nimport { Button, Icon } from '@adobe-commerce/elsie/components';\nimport { Minus, Add } from '@adobe-commerce/elsie/icons';\nimport { VComponent } from '@adobe-commerce/elsie/lib';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface FacetProps extends HTMLAttributes<HTMLDivElement> {\n  numberOfOptionsConfig?: number;\n  header: VNode;\n  buckets: VNode[];\n}\n\nexport const Facet: FunctionComponent<FacetProps> = ({ numberOfOptionsConfig = 5, header, buckets }) => {\n  const translations = useText({\n    showMore: 'Search.Facet.showMore',\n    showLess: 'Search.Facet.showLess',\n  });\n  const numberOfOptionsShown = numberOfOptionsConfig;\n  const [showMore, setShowMore] = useState(buckets.length < numberOfOptionsShown);\n\n  const numberOfOptions = showMore ? buckets.length : numberOfOptionsShown;\n\n  return (\n    <div>\n      <VComponent className=\"plp-facet__header\" node={header} />\n      {buckets.slice(0, numberOfOptions).map((bucket, index) => {\n        return <VComponent key={index} className=\"plp-facet__bucket\" node={bucket} />;\n      })}\n      {!showMore && buckets.length > numberOfOptionsShown && (\n        <Button variant=\"tertiary\" icon={<Icon source={Add} size=\"24\" />} onClick={(): void => setShowMore(!showMore)}>\n          {translations.showMore}\n        </Button>\n      )}\n      {showMore && buckets.length > numberOfOptionsShown && (\n        <Button\n          variant=\"tertiary\"\n          icon={<Icon source={Minus} size=\"24\" />}\n          onClick={(): void => setShowMore(!showMore)}\n        >\n          {translations.showLess}\n        </Button>\n      )}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport '@/plp/components/FacetList/FacetList.css';\nimport { ActionButton, Icon } from '@adobe-commerce/elsie/components';\nimport { Burger } from '@adobe-commerce/elsie/icons';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\n\nexport interface FacetListProps extends HTMLAttributes<HTMLDivElement> {\n  selectedFacets: VNode;\n  facets: VNode;\n}\n\nexport const FacetList: FunctionComponent<FacetListProps> = ({ selectedFacets, facets }) => {\n  const [showFilters, setShowFilters] = useState(true);\n\n  const handleShowFilters = () => {\n    setShowFilters(!showFilters);\n  };\n\n  return (\n    <div className=\"plp-facet-list\">\n      <div className=\"plp-facet-list__show-filters-button\">\n        <ActionButton\n          onClick={() => {\n            handleShowFilters();\n          }}\n        >\n          <Icon source={Burger} size=\"16\" />\n          <span>Filters</span>\n        </ActionButton>\n      </div>\n      <VComponent className=\"plp-facet-list__selected-filters\" node={selectedFacets} />\n      <VComponent\n        className={classes(['plp-facet-list__facet-options', ['plp-facet-list__facet-options--hidden', showFilters]])}\n        node={facets}\n      />\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { SearchFacet } from '@/plp/data/models/api';\nimport { Product } from '@/plp/data/models/product';\nimport { PriceRange } from '@adobe-commerce/elsie/components';\n\nconst BOOLEAN_NO = 'no';\nconst BOOLEAN_YES = 'yes';\n\nconst getRangeFacetFilter = (facet: SearchFacet) => {\n  const selectedRange = facet.buckets.find((bucket) => bucket.selected);\n  if (!selectedRange) {\n    return null;\n  }\n  return {\n    attribute: facet.attribute,\n    range: {\n      from: selectedRange.from,\n      to: selectedRange.to,\n    },\n  };\n};\n\nconst getScalarFacetFilter = (facet: SearchFacet) => {\n  const scalarSelections = facet.buckets.reduce((accu, curr) => {\n    if (curr.selected) {\n      accu.push(curr.title);\n    }\n    return accu;\n  }, [] as string[]);\n  if (scalarSelections.length === 0) {\n    return null;\n  }\n  return {\n    attribute: facet.attribute,\n    in: scalarSelections,\n  };\n};\n\nconst getFilterSelection = (facet: SearchFacet) => {\n  switch (facet.buckets[0]?.__typename) {\n    case 'RangeBucket':\n      return getRangeFacetFilter(facet);\n    case 'ScalarBucket':\n    case 'CategoryView':\n      return getScalarFacetFilter(facet);\n    default:\n      break;\n  }\n};\n\nconst getCurrencyType = (items: Product[]) => {\n  const firstItem = items[0];\n  if (firstItem?.price?.regular?.amount?.currency) {\n    return firstItem.price.regular.amount.currency;\n  } else if (firstItem?.priceRange?.minimum?.regular?.amount?.currency) {\n    return firstItem?.priceRange?.minimum?.regular?.amount?.currency;\n  }\n  return 'USD'; // Default currency if not found\n};\n\nconst getRangeBucketLabel = (bucket: any, facet: SearchFacet, currency: string | null) => {\n  if (facet?.attribute === 'price') {\n    return (\n      <PriceRange minimumAmount={bucket.from} maximumAmount={bucket.to} currency={currency || 'USD'} display=\"dash\" />\n    );\n  }\n  return bucket.title;\n};\n\nconst getScalarBucketLabel = (bucket: any, facet: SearchFacet) => {\n  if (bucket.title === BOOLEAN_NO) {\n    return `Not ${facet.title}`;\n  } else if (bucket.title === BOOLEAN_YES) {\n    return facet.title;\n  }\n  return bucket.title;\n};\n\nconst getBucketLabel = (bucket: any, facet: SearchFacet, currency: string | null) => {\n  switch (bucket.__typename) {\n    case 'RangeBucket':\n      return getRangeBucketLabel(bucket, facet, currency);\n    case 'ScalarBucket':\n    case 'CategoryView':\n      return getScalarBucketLabel(bucket, facet);\n    default:\n      break;\n  }\n};\n\nexport { getBucketLabel, getCurrencyType, getFilterSelection };\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { Container, Slot, SlotProps } from '@adobe-commerce/elsie/lib';\nimport { ProductSearchResult, SearchFilter, SearchFacet, SearchVariables, FacetBucket } from '@/plp/data/models/api';\nimport { getBucketLabel, getCurrencyType, getFilterSelection } from './utils/facetUtils';\nimport FacetList from '@/plp/components/FacetList';\nimport { Button, Checkbox, Divider, Icon, RadioButton } from '@adobe-commerce/elsie/components';\nimport { Facet } from '@/plp/components';\nimport { VNode } from 'preact';\nimport { Close } from '@adobe-commerce/elsie/icons';\nimport { events } from '@adobe-commerce/event-bus';\nimport { useText } from '@adobe-commerce/elsie/i18n';\n\nexport interface FacetsProps extends HTMLAttributes<HTMLDivElement> {\n  slots?: {\n    Facet?: SlotProps;\n    SelectedFacets?: SlotProps;\n    Facets?: SlotProps;\n  };\n}\n\nexport const Facets: Container<FacetsProps> = ({ slots }) => {\n  const translations = useText({\n    clearAll: 'Search.Facet.clearAll',\n  });\n\n  const [facetList, setFacetList] = useState<SearchFacet[]>([]);\n  const [currency, setCurrency] = useState<string | null>(null);\n\n  const handleSearchResult = (payload: { result: ProductSearchResult; request: SearchVariables }): void => {\n    if (!payload || (!payload.result.facets && !payload.result.items && !payload.request.filter)) {\n      setFacetList([]);\n      return;\n    }\n    const { facets, items } = payload.result;\n    setCurrency(getCurrencyType(items));\n    const filterList = payload.request.filter;\n    if (facets) {\n      const facetsWithSelections = facets.map((facet: SearchFacet) => {\n        const selectedBuckets = facet.buckets.map((bucket) => {\n          bucket.selected = false;\n          const selectedFilter = filterList?.find((filter) => filter.attribute === facet.attribute);\n          if (selectedFilter) {\n            const selectedRange = selectedFilter.range;\n            if (selectedRange && bucket.from === selectedRange.from && bucket.to === selectedRange.to) {\n              bucket.selected = true;\n            } else if (selectedFilter.in && selectedFilter.in.includes(bucket.title)) {\n              bucket.selected = true;\n            }\n          }\n          return bucket;\n        });\n        facet.buckets = selectedBuckets;\n        return facet;\n      });\n      setFacetList(facetsWithSelections);\n    }\n  };\n\n  const updateFacetSelections = (facets: SearchFacet[]): void => {\n    const updatedFacetList = facetList.map((f) => {\n      const newFacet = facets.find((facet) => facet.attribute === f.attribute);\n      if (newFacet) {\n        return newFacet;\n      }\n      return f;\n    });\n    const selectedFilterList = updatedFacetList.reduce((accu: SearchFilter[], facet: SearchFacet) => {\n      const selectedFilter = getFilterSelection(facet);\n      if (selectedFilter) {\n        accu.push(selectedFilter as SearchFilter);\n      }\n      return accu;\n    }, [] as SearchFilter[]);\n    setFacetList(updatedFacetList);\n    events.emit('search/request', { filter: selectedFilterList });\n  };\n\n  const handleCancelSelection = (facet: SearchFacet, title: string): void => {\n    const newBuckets = facet.buckets.map((bucket) => {\n      if (bucket.title === title) {\n        bucket.selected = false;\n      }\n      return bucket;\n    });\n    const newFacet = facet;\n    newFacet.buckets = newBuckets;\n    updateFacetSelections([newFacet]);\n  };\n\n  const clearAllSelections = (): void => {\n    const updatedFacetList = facetList.map((facet) => {\n      const updatedBuckets = facet.buckets.map((bucket) => {\n        bucket.selected = false;\n        return bucket;\n      });\n      facet.buckets = updatedBuckets;\n      return facet;\n    });\n    setFacetList(updatedFacetList);\n    events.emit('search/request', { filter: [] });\n  };\n\n  const changeFilter = (event: any, facet: SearchFacet): void => {\n    const newBuckets = facet.buckets.map((bucket) => {\n      if (facet.buckets[0]?.__typename === 'RangeBucket') {\n        bucket.selected = false;\n      }\n      if (bucket.title === event.target.value) {\n        bucket.selected = event.target.checked;\n      }\n      return bucket;\n    });\n    const newFacet = facet;\n    newFacet.buckets = newBuckets;\n    updateFacetSelections([newFacet]);\n  };\n\n  const getFacetNode = (facet: SearchFacet): VNode => {\n    const header = <span>{facet.title}</span>;\n    const buckets = facet.buckets\n      .map((bucket: FacetBucket) => {\n        const bucketLabel = getBucketLabel(bucket, facet, currency);\n        switch (facet.buckets[0]?.__typename) {\n          case 'RangeBucket':\n            return (\n              <RadioButton\n                data-testid={`${bucket.title}-radio`}\n                label={bucketLabel}\n                name={facet.attribute}\n                value={bucket.title}\n                checked={bucket.selected}\n                onChange={(event): void => {\n                  changeFilter(event, facet);\n                }}\n              />\n            ) as VNode;\n          case 'ScalarBucket':\n          case 'CategoryView':\n            return (\n              <Checkbox\n                data-testid={`${bucket.title}-checkbox`}\n                label={`${bucketLabel} (${bucket.count})`}\n                name={facet.attribute}\n                value={bucket.title}\n                checked={bucket.selected}\n                onChange={(event): void => {\n                  changeFilter(event, facet);\n                }}\n              />\n            ) as VNode;\n          default:\n            return null;\n        }\n      })\n      .filter((bucket) => bucket !== null);\n    return (<Facet header={header} buckets={buckets} />) as VNode;\n  };\n\n  const getFacetsNode = (): VNode => {\n    return (\n      <Slot name=\"Facets\" slot={slots?.Facets} context={{ data: facetList }}>\n        {facetList.map((facet) => {\n          return facet.buckets.length > 0\n            ? ((\n                <>\n                  <Slot name=\"Facet\" slot={slots?.Facet} context={{ data: facet }}>\n                    {getFacetNode(facet)}\n                  </Slot>\n                  <Divider variant=\"secondary\" />\n                </>\n              ) as VNode)\n            : null;\n        })}\n      </Slot>\n    );\n  };\n\n  const getSelectedFacetsNode = (): VNode => {\n    const selectedFacets = facetList.reduce((accu, curr) => {\n      const selected = curr.buckets.filter((bucket: FacetBucket) => bucket.selected);\n      if (selected.length > 0) {\n        accu.push(curr);\n      }\n      return accu;\n    }, [] as SearchFacet[]);\n    const selectedFilterBtns = selectedFacets.map((facet) => {\n      return facet.buckets.map((bucket) => {\n        if (bucket.selected) {\n          const bucketTitle = getBucketLabel(bucket, facet, currency);\n          return (\n            <Button\n              data-testid={`${bucket.title}-selected-btn`}\n              variant=\"secondary\"\n              children={\n                <>\n                  <span>{bucketTitle}</span>\n                  <Icon source={Close} size=\"16\" />\n                </>\n              }\n              onClick={(): void => {\n                handleCancelSelection(facet, bucket.title);\n              }}\n            />\n          ) as VNode;\n        }\n        return null;\n      });\n    });\n\n    const clearAllBtn =\n      selectedFilterBtns.length > 0 ? (\n        <Button\n          variant=\"secondary\"\n          onClick={(): void => {\n            clearAllSelections();\n          }}\n        >\n          <span>{translations.clearAll}</span>\n        </Button>\n      ) : null;\n    return (\n      <Slot name=\"SelectedFacets\" slot={slots?.SelectedFacets} context={{ data: selectedFacets }}>\n        {selectedFilterBtns}\n        {clearAllBtn}\n      </Slot>\n    );\n  };\n\n  useEffect(() => {\n    events.on('search/result', handleSearchResult);\n  }, []);\n\n  return <FacetList selectedFacets={getSelectedFacetsNode()} facets={getFacetsNode()} />;\n};\n"],"names":["SvgAdd","props","React","SvgBurger","SvgClose","SvgMinus","Facet","numberOfOptionsConfig","header","buckets","translations","useText","numberOfOptionsShown","showMore","setShowMore","useState","numberOfOptions","jsx","VComponent","bucket","index","Button","Icon","Add","Minus","FacetList","selectedFacets","facets","showFilters","setShowFilters","handleShowFilters","jsxs","ActionButton","Burger","classes","BOOLEAN_NO","BOOLEAN_YES","getRangeFacetFilter","facet","selectedRange","getScalarFacetFilter","scalarSelections","accu","curr","getFilterSelection","_a","getCurrencyType","items","firstItem","_c","_b","_g","_f","_e","_d","_k","_j","_i","_h","getRangeBucketLabel","currency","PriceRange","getScalarBucketLabel","getBucketLabel","Facets","slots","facetList","setFacetList","setCurrency","handleSearchResult","payload","filterList","facetsWithSelections","selectedBuckets","selectedFilter","filter","updateFacetSelections","updatedFacetList","f","newFacet","selectedFilterList","events","handleCancelSelection","title","newBuckets","clearAllSelections","updatedBuckets","changeFilter","event","getFacetNode","bucketLabel","RadioButton","Checkbox","getFacetsNode","Slot","Fragment","Divider","getSelectedFacetsNode","selectedFilterBtns","bucketTitle","Close","clearAllBtn","useEffect"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}