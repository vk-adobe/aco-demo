{"version":3,"file":"ResultsInfo.js","sources":["/@dropins/storefront-product-discovery/src/components/ResultsInfo/ResultsInfo.tsx","/@dropins/storefront-product-discovery/src/containers/ResultsInfo/ResultsInfo.tsx"],"sourcesContent":["/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, VComponent } from '@adobe-commerce/elsie/lib';\nimport '@/plp/components/ResultsInfo/ResultsInfo.css';\n\nexport interface ResultsInfoProps extends HTMLAttributes<HTMLDivElement> {\n  searchPhrase?: VNode;\n  totalCount?: VNode;\n}\n\nexport const ResultsInfo: FunctionComponent<ResultsInfoProps> = ({ searchPhrase, totalCount, className = '' }) => {\n  return (\n    <div className={classes(['plp-results-info', className])}>\n      {searchPhrase && <VComponent className=\"plp-results-info__search-phrase\" node={searchPhrase} />}\n      {totalCount && <VComponent className=\"plp-results-info__total-count\" node={totalCount} />}\n    </div>\n  );\n};\n","/********************************************************************\n * ADOBE CONFIDENTIAL\n * __________________\n *\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n *******************************************************************/\n\nimport { HTMLAttributes, useCallback, useEffect, useState } from 'preact/compat';\nimport { Container, Slot, SlotProps } from '@adobe-commerce/elsie/lib';\nimport { ProductSearchResult, SearchVariables } from '@/plp/data/models/api';\nimport { events } from '@adobe-commerce/event-bus';\nimport { useText } from '@adobe-commerce/elsie/i18n';\nimport { ResultsInfo as ResultsInfoComponent } from '@/plp/components/ResultsInfo/ResultsInfo';\n\nexport interface ResultsInfoProps extends HTMLAttributes<HTMLDivElement> {\n  slots?: {\n    SearchPhrase?: SlotProps;\n    TotalCount?: SlotProps;\n  };\n}\n\nexport const ResultsInfo: Container<ResultsInfoProps> = ({ slots }) => {\n  const translations = useText({\n    resultsFor: 'Search.ResultsInfo.resultsFor',\n    products: 'Search.ResultsInfo.products',\n  });\n  const [searchPhrase, setSearchPhrase] = useState<string>('');\n  const [totalCount, setTotalCount] = useState<number | undefined>();\n  const [searchResult, setSearchResult] = useState<\n    { result?: ProductSearchResult; request?: SearchVariables } | undefined\n  >();\n\n  const handleSearchResult = useCallback(\n    (payload: { result?: ProductSearchResult; request?: SearchVariables }): void => {\n      setSearchPhrase(payload.request?.phrase || '');\n      setTotalCount(payload.result?.totalCount);\n      setSearchResult(payload);\n    },\n    [],\n  );\n\n  // Listen for search result events\n  useEffect(() => {\n    const resultEvent = events.on('search/result', handleSearchResult);\n    return () => {\n      resultEvent?.off();\n    };\n  }, []);\n\n  const searchPhraseNode = (\n    <Slot name=\"SearchPhrase\" slot={slots?.SearchPhrase} context={{ searchResult }}>\n      {searchPhrase && (\n        <span data-testid=\"search-phrase\">\n          {translations.resultsFor} <strong>{`\"${searchPhrase}\"`}</strong>\n        </span>\n      )}\n    </Slot>\n  );\n\n  const totalCountNode = (\n    <Slot name=\"TotalCount\" slot={slots?.TotalCount} context={{ searchResult }}>\n      {totalCount && <span data-testid=\"total-count\">{`${totalCount} ${translations.products}`}</span>}\n    </Slot>\n  );\n\n  return <ResultsInfoComponent searchPhrase={searchPhraseNode} totalCount={totalCountNode} />;\n};\n"],"names":["ResultsInfo","searchPhrase","totalCount","className","jsxs","classes","jsx","VComponent","slots","translations","useText","setSearchPhrase","useState","setTotalCount","searchResult","setSearchResult","handleSearchResult","useCallback","payload","_a","_b","useEffect","resultEvent","events","searchPhraseNode","Slot","totalCountNode","ResultsInfoComponent"],"mappings":"iXA2BO,MAAMA,EAAmD,CAAC,CAAE,aAAAC,EAAc,WAAAC,EAAY,UAAAC,EAAY,MAErGC,EAAC,OAAI,UAAWC,EAAQ,CAAC,mBAAoBF,CAAS,CAAC,EACpD,SAAA,CAAAF,GAAiBK,EAAAC,EAAA,CAAW,UAAU,kCAAkC,KAAMN,EAAc,EAC5FC,GAAeI,EAAAC,EAAA,CAAW,UAAU,gCAAgC,KAAML,CAAY,CAAA,CAAA,EACzF,ECDSF,EAA2C,CAAC,CAAE,MAAAQ,KAAY,CACrE,MAAMC,EAAeC,EAAQ,CAC3B,WAAY,gCACZ,SAAU,6BAAA,CACX,EACK,CAACT,EAAcU,CAAe,EAAIC,EAAiB,EAAE,EACrD,CAACV,EAAYW,CAAa,EAAID,EAA6B,EAC3D,CAACE,EAAcC,CAAe,EAAIH,EAEtC,EAEII,EAAqBC,EACxBC,GAA+E,SAC9DP,IAAAQ,EAAAD,EAAQ,UAAR,YAAAC,EAAiB,SAAU,EAAE,EAC/BN,GAAAO,EAAAF,EAAQ,SAAR,YAAAE,EAAgB,UAAU,EACxCL,EAAgBG,CAAO,CACzB,EACA,CAAA,CACF,EAGAG,EAAU,IAAM,CACd,MAAMC,EAAcC,EAAO,GAAG,gBAAiBP,CAAkB,EACjE,MAAO,IAAM,CACXM,GAAA,MAAAA,EAAa,KACf,CACF,EAAG,EAAE,EAEL,MAAME,EACHlB,EAAAmB,EAAA,CAAK,KAAK,eAAe,KAAMjB,GAAA,YAAAA,EAAO,aAAc,QAAS,CAAE,aAAAM,CAC7D,EAAA,SAAAb,GACEG,EAAA,OAAA,CAAK,cAAY,gBACf,SAAA,CAAaK,EAAA,WAAW,IAAEH,EAAA,SAAA,CAAQ,SAAI,IAAAL,CAAY,GAAI,CAAA,CAAA,CAAA,CACzD,CAEJ,CAAA,EAGIyB,IACHD,EAAK,CAAA,KAAK,aAAa,KAAMjB,GAAA,YAAAA,EAAO,WAAY,QAAS,CAAE,aAAAM,GACzD,SAAcZ,GAAAI,EAAC,OAAK,CAAA,cAAY,cAAe,SAAA,GAAGJ,CAAU,IAAIO,EAAa,QAAQ,EAAA,CAAG,CAC3F,CAAA,EAGF,OAAQH,EAAAqB,EAAA,CAAqB,aAAcH,EAAkB,WAAYE,EAAgB,CAC3F"}