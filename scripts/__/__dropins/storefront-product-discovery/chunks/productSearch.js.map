{"version":3,"file":"productSearch.js","sources":["/@dropins/storefront-product-discovery/src/api/fetch-graphql/fetch-graphql.ts","/@dropins/storefront-product-discovery/src/api/graphql/fragments.graphql.ts","/@dropins/storefront-product-discovery/src/api/productSearch/graphql/productSearch.graphql.ts","/@dropins/storefront-product-discovery/src/api/productSearch/productSearch.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { FetchGraphQL } from '@adobe-commerce/fetch-graphql';\n\nexport const {\n  setEndpoint,\n  setFetchGraphQlHeader,\n  removeFetchGraphQlHeader,\n  setFetchGraphQlHeaders,\n  fetchGraphQl,\n  getConfig,\n} = new FetchGraphQL().getMethods();\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nconst Facet = /* GraphQL */ `\n  fragment Facet on Aggregation {\n    title\n    attribute\n    buckets {\n      title\n      __typename\n      ... on CategoryView {\n        name\n        count\n        path\n      }\n      ... on ScalarBucket {\n        count\n      }\n      ... on RangeBucket {\n        from\n        to\n        count\n      }\n      ... on StatsBucket {\n        min\n        max\n      }\n    }\n  }\n`;\n\nconst ProductView = /* GraphQL */ `\n  fragment ProductView on ProductSearchItem {\n    productView {\n      __typename\n      sku\n      name\n      inStock\n      url\n      urlKey\n      images {\n        label\n        url\n        roles\n      }\n      ... on ComplexProductView {\n        priceRange {\n          maximum {\n            final {\n              amount {\n                value\n                currency\n              }\n            }\n            regular {\n              amount {\n                value\n                currency\n              }\n            }\n          }\n          minimum {\n            final {\n              amount {\n                value\n                currency\n              }\n            }\n            regular {\n              amount {\n                value\n                currency\n              }\n            }\n          }\n        }\n        options {\n          id\n          title\n          values {\n            title\n            ... on ProductViewOptionValueSwatch {\n              id\n              inStock\n              type\n              value\n            }\n          }\n        }\n      }\n      ... on SimpleProductView {\n        price {\n          final {\n            amount {\n              value\n              currency\n            }\n          }\n          regular {\n            amount {\n              value\n              currency\n            }\n          }\n        }\n      }\n    }\n    highlights {\n      attribute\n      value\n      matched_words\n    }\n  }\n`;\n\n//Unused in favor of ProductView from catalog service\nconst Product = /* GraphQL */ `\n  fragment Product on ProductSearchItem {\n    product {\n      __typename\n      sku\n      description {\n        html\n      }\n      short_description {\n        html\n      }\n      name\n      canonical_url\n      small_image {\n        url\n      }\n      image {\n        url\n      }\n      thumbnail {\n        url\n      }\n      price_range {\n        minimum_price {\n          fixed_product_taxes {\n            amount {\n              value\n              currency\n            }\n            label\n          }\n          regular_price {\n            value\n            currency\n          }\n          final_price {\n            value\n            currency\n          }\n          discount {\n            percent_off\n            amount_off\n          }\n        }\n        maximum_price {\n          fixed_product_taxes {\n            amount {\n              value\n              currency\n            }\n            label\n          }\n          regular_price {\n            value\n            currency\n          }\n          final_price {\n            value\n            currency\n          }\n          discount {\n            percent_off\n            amount_off\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport { Facet, Product, ProductView };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { Facet, ProductView } from '../../graphql/fragments.graphql';\n\nconst PRODUCT_SEARCH_QUERY = /* GraphQL */ `\n  query productSearch(\n    $phrase: String!\n    $pageSize: Int\n    $currentPage: Int = 1\n    $filter: [SearchClauseInput!]\n    $sort: [ProductSearchSortInput!]\n    $context: QueryContextInput\n  ) {\n    productSearch(\n      phrase: $phrase\n      page_size: $pageSize\n      current_page: $currentPage\n      filter: $filter\n      sort: $sort\n      context: $context\n    ) {\n      total_count\n      items {\n        ...ProductView\n      }\n      facets {\n        ...Facet\n      }\n      page_info {\n        current_page\n        page_size\n        total_pages\n      }\n    }\n    attributeMetadata {\n      sortable {\n        label\n        attribute\n        numeric\n      }\n    }\n  }\n  ${ProductView}\n  ${Facet}\n`;\n\nexport { PRODUCT_SEARCH_QUERY };\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { fetchGraphQl } from '@/plp/api';\nimport { PRODUCT_SEARCH_QUERY } from './graphql/productSearch.graphql';\nimport { ProductSearchResponse } from '@/plp/types/api/productSearch';\n\nexport const productSearch = async (variables: any): Promise<ProductSearchResponse | null> => {\n  return fetchGraphQl(PRODUCT_SEARCH_QUERY, { method: 'GET', variables }).then(({ errors, data }) => {\n    if (errors && !data) {\n      console.log('error', errors);\n      throw new Error('Error fetching product search');\n    } else {\n      return data;\n    }\n  });\n};\n"],"names":["setEndpoint","setFetchGraphQlHeader","removeFetchGraphQlHeader","setFetchGraphQlHeaders","fetchGraphQl","getConfig","FetchGraphQL","Facet","ProductView","PRODUCT_SEARCH_QUERY","productSearch","variables","errors","data"],"mappings":"+DAWa,KAAA,CACX,YAAAA,EACA,sBAAAC,EACA,yBAAAC,EACA,uBAAAC,EACA,aAAAC,EACA,UAAAC,CACF,EAAI,IAAIC,EAAa,EAAE,WAAW,ECT5BC,EAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA4BtBC,EAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EC1B5BC,EAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAsCvCD,CAAW;AAAA,IACXD,CAAK;AAAA,ECrCIG,EAAgB,MAAOC,GAC3BP,EAAaK,EAAsB,CAAE,OAAQ,MAAO,UAAAE,EAAW,EAAE,KAAK,CAAC,CAAE,OAAAC,EAAQ,KAAAC,KAAW,CAC7F,GAAAD,GAAU,CAACC,EACL,cAAA,IAAI,QAASD,CAAM,EACrB,IAAI,MAAM,+BAA+B,EAExC,OAAAC,CACT,CACD"}