{"version":3,"file":"acdlEvents.js","sources":["/@dropins/storefront-product-discovery/src/data/transforms/product.ts","/@dropins/storefront-product-discovery/src/data/transforms/api.ts","/@dropins/storefront-product-discovery/src/utils/acdlEvents.ts"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { Product } from '../models/product';\n\nexport const transformProduct = (data: any): Product | null => {\n  // check if data is null or undefined, and if so return an empty object\n  if (!data) {\n    return {\n      id: '',\n      name: '',\n      sku: '',\n      shortDescription: '',\n      url: '',\n      urlKey: '',\n      metaTitle: '',\n      metaKeywords: '',\n      metaDescription: '',\n      lowStock: false,\n      links: [],\n      images: [],\n      description: '',\n      externalId: '',\n      inputOptions: [],\n      addToCartAllowed: false,\n      price: undefined,\n      priceRange: undefined,\n      inStock: false,\n      typename: '',\n    };\n  }\n\n  const transformedProduct = {\n    id: data?.id || '',\n    name: data?.name || '',\n    sku: data?.sku || '',\n    shortDescription: data?.shortDescription || '',\n    url: data?.url || '',\n    urlKey: data?.urlKey || '',\n    metaTitle: data?.metaTitle || '',\n    metaKeywords: data?.metaKeywords || '',\n    metaDescription: data?.metaDescription || '',\n    lowStock: data?.lowStock || false,\n    links: data?.links || [],\n    images:\n      data?.images?.map((image: any) => ({\n        label: image.label || '',\n        roles: image.roles || [],\n        url: image.url || '',\n      })) || [],\n    description: data?.description || '',\n    externalId: data?.externalId || '',\n    inputOptions: data?.inputOptions || [],\n    addToCartAllowed: data?.addToCartAllowed || false,\n    price: data.price\n      ? {\n          final: {\n            amount: {\n              value: data?.price?.final?.amount?.value || 0,\n              currency: data?.price?.final?.amount?.currency || '',\n            },\n          },\n          regular: {\n            amount: {\n              value: data?.price?.regular?.amount?.value || 0,\n              currency: data?.price?.regular?.amount?.currency || '',\n            },\n          },\n          roles: data?.price?.roles || [],\n        }\n      : undefined,\n    priceRange: data?.priceRange\n      ? {\n          minimum: {\n            final: {\n              amount: {\n                value: data?.priceRange?.minimum?.final?.amount?.value || 0,\n                currency: data?.priceRange?.minimum?.final?.amount?.currency || '',\n              },\n            },\n            regular: {\n              amount: {\n                value: data?.priceRange?.minimum?.regular?.amount?.value || 0,\n                currency: data?.priceRange?.minimum?.regular?.amount?.currency || '',\n              },\n            },\n          },\n          maximum: {\n            final: {\n              amount: {\n                value: data?.priceRange?.maximum?.final?.amount?.value || 0,\n                currency: data?.priceRange?.maximum?.final?.amount?.currency || '',\n              },\n            },\n            regular: {\n              amount: {\n                value: data?.priceRange?.maximum?.regular?.amount?.value || 0,\n                currency: data?.priceRange?.maximum?.regular?.amount?.currency || '',\n              },\n            },\n          },\n        }\n      : undefined,\n    inStock: data?.inStock || false,\n    typename: data?.__typename || '',\n  };\n\n  return transformedProduct;\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { ProductSearchResult } from '@/plp/data/models';\nimport { Product } from '@/plp/data/models/product';\n\nimport { transformProduct } from './product';\n\nexport function transformProductSearchResponse(data: any): ProductSearchResult {\n  const productSearch = data?.productSearch;\n  const transformedResponse: ProductSearchResult = {\n    facets: productSearch?.facets || [],\n    items: productSearch?.items.map((product: any) => transformProduct(product?.productView)) || [],\n    pageInfo: {\n      currentPage: productSearch?.page_info?.current_page || 1,\n      totalPages: productSearch?.page_info?.total_pages || 1,\n      totalItems: productSearch?.page_info?.total_items || 0,\n      pageSize: productSearch?.page_info?.page_size || 10, //replace with default constant\n    },\n    totalCount: productSearch?.total_count || 0,\n  };\n  return transformedResponse;\n}\n\nexport function transformAttributeMetadata(data: any): any {\n  const attributeMetadata = data?.attributeMetadata;\n  const transformedResponse = {\n    sortable: attributeMetadata?.sortable || [],\n    filterableInSearch: attributeMetadata?.filterableInSearch || [],\n  };\n  return transformedResponse;\n}\n\nexport const transformSearchResultProducts = (searchResponse: { productSearch: { items: any[] } }): Product[] =>\n  searchResponse?.productSearch?.items?.reduce<Product[]>((returnedProductList, productItem) => {\n    if (!productItem?.productView) return returnedProductList; // Skip if no productView and product is null\n\n    const transformed = transformProduct(productItem.productView);\n    if (transformed) {\n      returnedProductList.push(transformed);\n    }\n\n    return returnedProductList;\n  }, []) || [];\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this\n * file in accordance with the terms of the Adobe license agreement\n * accompanying it.\n *******************************************************************/\n\nimport { ProductSearchResponse } from '@/plp/data/models/api';\nimport {\n  SearchFilter,\n  SearchInput,\n  SearchInputUnit,\n  SearchSort,\n  SearchResults,\n  SearchResultUnit,\n  SearchResultSuggestion,\n  SearchFacetContext,\n  SearchBucket,\n  SearchResultProduct,\n} from '@/plp/data/models/acdl';\n\nconst SEARCH_INPUT_CONTEXT = 'searchInputContext';\nconst SEARCH_RESULTS_CONTEXT = 'searchResultsContext';\nconst PLP_UNIT_ID = 'livesearch-plp';\nconst SEARCH_UNIT_ID = 'livesearch-popover';\n//const SEARCH_CATEGORY_CLICK = 'search-category-click';\nconst SEARCH_PRODUCT_CLICK = 'search-product-click';\nconst SEARCH_REQUEST_SENT = 'search-request-sent';\nconst SEARCH_RESPONSE_RECEIVED = 'search-response-received';\nconst SEARCH_RESULTS_VIEW = 'search-results-view';\n//const CATEGORY_RESULTS_VIEW = 'category-results-view';\n\nfunction getAdobeDataLayer() {\n  // @ts-ignore\n  window.adobeDataLayer = window.adobeDataLayer || [];\n  // @ts-ignore\n  return window.adobeDataLayer;\n}\n\n// Get a context from ACDL\nfunction getContext<T>(name?: string): T {\n  const adobeDataLayer = getAdobeDataLayer();\n  return adobeDataLayer.getState ? adobeDataLayer.getState(name) : ({} as T);\n}\n\nfunction setContext(name: string, data: any) {\n  const adobeDataLayer = getAdobeDataLayer();\n\n  // Clear existing context\n  adobeDataLayer.push({\n    [name]: null,\n  });\n\n  // Set new context\n  adobeDataLayer.push({\n    [name]: data,\n  });\n}\n\nfunction pushEvent(event: string, additionalContext?: any) {\n  const adobeDataLayer = getAdobeDataLayer();\n\n  adobeDataLayer.push((acdl: any) => {\n    const state = acdl.getState ? acdl.getState() : {};\n\n    acdl.push({\n      event,\n      eventInfo: {\n        ...state,\n        ...additionalContext,\n      },\n    });\n  });\n}\n\nconst searchRequestSent = (searchUnitId: string) => {\n  pushEvent(SEARCH_REQUEST_SENT, { searchUnitId });\n};\n\nconst searchResponseReceived = (searchUnitId: string) => {\n  pushEvent(SEARCH_RESPONSE_RECEIVED, { searchUnitId });\n};\n\nconst categoryResultsView = () => {};\n\nconst searchResultsView = (searchUnitId: string) => {\n  pushEvent(SEARCH_RESULTS_VIEW, { searchUnitId });\n};\n\nconst searchProductClick = (sku: string, searchUnitId: string) => {\n  pushEvent(SEARCH_PRODUCT_CLICK, { sku, searchUnitId });\n};\n\nconst updateSearchInputCtx = (\n  searchUnitId: string,\n  searchRequestId: string,\n  phrase: string,\n  filters: Array<SearchFilter>,\n  pageSize: number,\n  currentPage: number,\n  sort: Array<SearchSort>,\n): void => {\n  const acdl = getAdobeDataLayer;\n  if (!acdl) {\n    // don't break search if events are broken/not loading\n    return;\n  }\n\n  const searchInputCtx: SearchInput = getContext(SEARCH_INPUT_CONTEXT) || {};\n  if (!searchInputCtx?.units) {\n    searchInputCtx.units = [];\n  }\n\n  // create search input unit\n  const searchInputUnit: SearchInputUnit = {\n    searchUnitId,\n    searchRequestId,\n    queryTypes: ['products', 'suggestions'],\n    phrase,\n    pageSize,\n    currentPage,\n    filter: filters,\n    sort,\n  };\n\n  // find search input unit index\n  const searchInputUnitIndex = searchInputCtx.units.findIndex((unit) => unit.searchUnitId === searchUnitId);\n\n  // update search input unit\n  if (searchInputUnitIndex < 0) {\n    searchInputCtx.units.push(searchInputUnit);\n  } else {\n    searchInputCtx.units[searchInputUnitIndex] = searchInputUnit;\n  }\n\n  setContext(SEARCH_INPUT_CONTEXT, searchInputCtx);\n};\n\nconst updateSearchResultsCtx = (\n  searchUnitId: string,\n  searchRequestId: string,\n  results: ProductSearchResponse['productSearch'],\n): void => {\n  const acdl = getAdobeDataLayer;\n  if (!acdl) {\n    // don't break search if events are broken/not loading\n    return;\n  }\n  const searchResultsCtx: SearchResults = getContext(SEARCH_RESULTS_CONTEXT) || {};\n  if (!searchResultsCtx?.units) {\n    searchResultsCtx.units = [];\n  }\n\n  // find search result unit index\n  const searchResultUnitIndex = searchResultsCtx.units.findIndex((unit) => unit.searchUnitId === searchUnitId);\n\n  // create search result unit\n  const searchResultUnit: SearchResultUnit = {\n    searchUnitId,\n    searchRequestId,\n    products: createProducts(results.items),\n    categories: [],\n    suggestions: createSuggestions(results.suggestions),\n    page: results?.pageInfo?.currentPage || 1,\n    perPage: results?.pageInfo?.pageSize || 20,\n    facets: createFacets(results.facets as SearchFacetContext[]),\n  };\n\n  // update search result unit\n  if (searchResultUnitIndex < 0) {\n    searchResultsCtx.units.push(searchResultUnit);\n  } else {\n    searchResultsCtx.units[searchResultUnitIndex] = searchResultUnit;\n  }\n\n  setContext(SEARCH_RESULTS_CONTEXT, searchResultsCtx);\n};\n\nconst createProducts = (items: ProductSearchResponse['productSearch']['items']): SearchResultProduct[] => {\n  if (!items) {\n    return [];\n  }\n\n  const products: SearchResultProduct[] = items.map((item, index) => ({\n    name: item?.name,\n    sku: item?.sku,\n    url: item?.url ?? '',\n    imageUrl: item?.images[0]?.url ?? '',\n    price: item?.price?.final?.amount?.value ?? item?.priceRange?.minimum?.regular?.amount?.value,\n    rank: index,\n  }));\n\n  return products;\n};\n\nconst createSuggestions = (items: ProductSearchResponse['productSearch']['suggestions']): SearchResultSuggestion[] => {\n  if (!items) {\n    return [];\n  }\n\n  const suggestions: SearchResultSuggestion[] = items.map((suggestion, index) => ({\n    suggestion,\n    rank: index,\n  }));\n\n  return suggestions;\n};\n\nconst createFacets = (items: SearchFacetContext[]): SearchFacetContext[] => {\n  if (!items) {\n    return [];\n  }\n\n  const facets = items.map<SearchFacetContext>((item) => ({\n    attribute: item?.attribute,\n    title: item?.title,\n    type: item?.type || 'PINNED',\n    buckets: item?.buckets.map<SearchBucket>((bucket: any) => bucket),\n  }));\n\n  return facets;\n};\n\nexport {\n  searchRequestSent,\n  searchResponseReceived,\n  categoryResultsView,\n  searchResultsView,\n  searchProductClick,\n  updateSearchInputCtx,\n  updateSearchResultsCtx,\n  PLP_UNIT_ID,\n  SEARCH_UNIT_ID,\n};\n"],"names":["transformProduct","data","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_E","_F","_G","_H","_I","_J","_K","_L","_M","_N","_O","_P","_Q","_R","_S","_T","image","transformProductSearchResponse","productSearch","product","transformAttributeMetadata","attributeMetadata","transformSearchResultProducts","searchResponse","returnedProductList","productItem","transformed","SEARCH_INPUT_CONTEXT","SEARCH_RESULTS_CONTEXT","PLP_UNIT_ID","SEARCH_UNIT_ID","SEARCH_REQUEST_SENT","SEARCH_RESPONSE_RECEIVED","SEARCH_RESULTS_VIEW","getAdobeDataLayer","getContext","name","adobeDataLayer","setContext","pushEvent","event","additionalContext","acdl","state","searchRequestSent","searchUnitId","searchResponseReceived","searchResultsView","updateSearchInputCtx","searchRequestId","phrase","filters","pageSize","currentPage","sort","searchInputCtx","searchInputUnit","searchInputUnitIndex","unit","updateSearchResultsCtx","results","searchResultsCtx","searchResultUnitIndex","searchResultUnit","createProducts","createSuggestions","createFacets","items","item","index","suggestion","bucket"],"mappings":"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"}