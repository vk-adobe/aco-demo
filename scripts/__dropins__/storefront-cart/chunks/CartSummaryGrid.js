/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,Fragment as l}from"@dropins/tools/preact-jsx-runtime.js";import{useState as y,useEffect as _}from"@dropins/tools/preact-compat.js";import{E as C}from"./EmptyCart.js";import{classes as d,VComponent as b,Slot as v}from"@dropins/tools/lib.js";/* empty css           */import{Image as N}from"@dropins/tools/components.js";import"@dropins/tools/preact-hooks.js";import{events as S}from"@dropins/tools/event-bus.js";import{g as j}from"./persisted-data.js";const D=({className:c,children:i,emptyCart:m,products:e,...n})=>a("div",{...n,className:d(["cart-cart-summary-grid",c]),children:a(l,{children:a("div",{className:d(["cart-cart-summary-grid__content",["cart-cart-summary-grid__content--empty",!e]]),children:e||a(b,{node:m,className:"cart-cart-summary-grid__empty-cart"})})})}),I=({children:c,initialData:i=null,routeProduct:m,routeEmptyCartCTA:e,slots:n,...g})=>{const[o,p]=y(i);_(()=>{const r=S.on("cart/data",t=>{p(t)},{eager:!0});return()=>{r==null||r.off()}},[]);const u=(r,t)=>{const f=r.selectedOptions?`${r.name}: ${Object.entries(r.selectedOptions).join("; ")}`:r.name,s=a(N,{"data-testid":"cart-grid-item-image",loading:t<4?"eager":"lazy",src:r.image.src,alt:r.image.alt,"aria-label":f,width:"100%"});return a("div",{className:"cart-cart-summary-grid__item-container",children:a(v,{name:"Thumbnail",slot:n==null?void 0:n.Thumbnail,context:{item:r},children:m?a("a",{href:m(r),children:s}):s})},t)},h=o&&a(l,{children:o.items.map((r,t)=>u(r,t))});return a(D,{...g,emptyCart:a(C,{ctaLinkURL:e?e():void 0}),products:h})};I.getInitialData=async function(){return j()};export{I as C};
