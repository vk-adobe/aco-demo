/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as o}from"@dropins/tools/preact-jsx-runtime.js";import{useState as a,useEffect as D}from"@dropins/tools/preact-compat.js";import{Button as E,Icon as c}from"@dropins/tools/components.js";import{events as i}from"@dropins/tools/event-bus.js";import{s as F,g as H,r as L}from"../chunks/removeProductsFromWishlist.js";import{c as T,a as b}from"../chunks/initializeWishlist.js";import{S as j}from"../chunks/HeartFilled.js";import{S as q}from"../chunks/Heart.js";import"@dropins/tools/fetch-graphql.js";import"@dropins/tools/lib.js";const R=({product:s,iconWishlisted:d,iconToWishlist:u,size:h,variant:f,disabled:g,labelToWishlist:v,labelWishlisted:p,onClick:I})=>{const[W,k]=a(F.authenticated),[n,e]=a(!1),[r,w]=a(null),{isGuestWishlistEnabled:S}=T.getConfig();D(()=>{const y=t=>k(t),P=()=>{var m;const t=H(),l=(m=t==null?void 0:t.items)==null?void 0:m.find(x=>x.product.sku===s.sku);w(l??null),e(!!l)};i.on("authenticated",y),i.on("wishlist/data",P)},[s.sku]);const C=async()=>{n?(await L([r]),e(!1),i.emit("wishlist/alert",{action:"remove",item:r})):(await b([{sku:s.sku,quantity:1}]),e(!0),i.emit("wishlist/alert",{action:"add",item:{product:s}}))};return!W&&!S?null:o(E,{active:n,"data-testid":"wishlist-toggle",size:h??"medium",variant:f??"tertiary",disabled:g,icon:o(c,{source:u??q}),activeIcon:o(c,{source:d??j}),onClick:I??C,children:v,activeChildren:p})};export{R as WishlistToggle,R as default};
