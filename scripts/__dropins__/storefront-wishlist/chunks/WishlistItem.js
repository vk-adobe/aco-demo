/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as t,jsxs as m,Fragment as A}from"@dropins/tools/preact-jsx-runtime.js";import{classes as c}from"@dropins/tools/lib.js";import{Button as T,Icon as M,Price as P,Image as H}from"@dropins/tools/components.js";import*as o from"@dropins/tools/preact-compat.js";import{useState as W}from"@dropins/tools/preact-compat.js";import{s as u,r as j}from"./removeProductsFromWishlist.js";import{events as S}from"@dropins/tools/event-bus.js";import{useText as F}from"@dropins/tools/i18n.js";const L=r=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r},o.createElement("g",{clipPath:"url(#clip0_102_196)"},o.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M18.3601 18.16H6.5601L4.8801 3H2.3501M19.6701 19.59C19.6701 20.3687 19.0388 21 18.2601 21C17.4814 21 16.8501 20.3687 16.8501 19.59C16.8501 18.8113 17.4814 18.18 18.2601 18.18C19.0388 18.18 19.6701 18.8113 19.6701 19.59ZM7.42986 19.59C7.42986 20.3687 6.79858 21 6.01986 21C5.24114 21 4.60986 20.3687 4.60986 19.59C4.60986 18.8113 5.24114 18.18 6.01986 18.18C6.79858 18.18 7.42986 18.8113 7.42986 19.59Z",stroke:"currentColor",strokeLinejoin:"round"}),o.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M5.25 6.37L20.89 8.06L20.14 14.8H6.19",stroke:"currentColor",strokeLinejoin:"round"})),o.createElement("defs",null,o.createElement("clipPath",{id:"clip0_102_196"},o.createElement("rect",{vectorEffect:"non-scaling-stroke",width:19.29,height:19.5,fill:"white",transform:"translate(2.3501 2.25)"})))),q=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),O=r=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...r},o.createElement("path",{d:"M1 5H23",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:10}),o.createElement("path",{d:"M17.3674 22H6.63446C5.67952 22 4.88992 21.2688 4.8379 20.3338L4 5H20L19.1621 20.3338C19.1119 21.2688 18.3223 22 17.3655 22H17.3674Z",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:10}),o.createElement("path",{d:"M9.87189 2H14.1281C14.6085 2 15 2.39766 15 2.88889V5H9V2.88889C9 2.39912 9.39006 2 9.87189 2Z",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:10}),o.createElement("path",{d:"M8.87402 8.58057L9.39348 17.682",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:10}),o.createElement("path",{d:"M14.6673 8.58057L14.146 17.682",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:10})),K=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),R=({className:r,children:f,item:e,onCartActionButtonClick:a,onTrashButtonClick:l,fixedProductTaxesEnabled:n,fixedProductTaxesApply:d,fixedProductTaxesEnabledDisplayInProductLists:s,fixedProductTaxesEnabledDisplayInSalesModules:i,fixedProductTaxesEnabledDisplayInProductView:p,...h})=>{var g,C,I,_,y,E,k,b,N;const w=F({cartActionBtn:"ProductItem.CartActionButton",trashActionBtn:"ProductItem.TrashActionButton"}),x=((C=(g=e==null?void 0:e.prices)==null?void 0:g.discount)==null?void 0:C.amountOff)!=0||((_=(I=e==null?void 0:e.prices)==null?void 0:I.discount)==null?void 0:_.percentOff)!=0;return t("div",{...h,className:c(["wishlist-product-item",r]),children:m("div",{...h,className:c(["wishlist-product-item__content",r]),children:[t("div",{className:c(["wishlist-product-item-image"]),style:{backgroundColor:"var(--color-neutral-200)"},"data-testid":"wishlist-product-item-image",children:t(V,{images:e!=null&&e.image?[e.image]:[]})}),m("div",{className:c(["wishlist-product-item__title"]),"data-testid":"wishlist-product-item-header",children:[t("span",{className:"wishlist-product-item-name","data-testid":"wishlist-product-item-name",children:e==null?void 0:e.name}),t(T,{"data-testid":"wishlist-product-item-remove-button",className:c(["wishlist-product-item-button__remove"]),variant:"tertiary",onClick:()=>l==null?void 0:l(),icon:t(M,{source:O,size:"24",stroke:"2",viewBox:"0 0 24 24","aria-label":w.trashActionBtn})}),t(P,{className:c(["wishlist-product-item-price",x?"strikeout":""]),"data-testid":"wishlist-product-item-price",amount:(y=e==null?void 0:e.prices)==null?void 0:y.regularPrice.value,currency:(E=e==null?void 0:e.prices)==null?void 0:E.regularPrice.currency}),x&&t(P,{className:c(["wishlist-product-item-discounted-price"]),"data-testid":"wishlist-product-item-discounted-price",amount:(k=e==null?void 0:e.prices)==null?void 0:k.finalPrice.value,currency:(b=e==null?void 0:e.prices)==null?void 0:b.finalPrice.currency}),n&&(s==="INCLUDING_FPT_AND_DESCRIPTION"||s==="EXCLUDING_FPT_INCLUDING_DESCRIPTION_FINAL_PRICE")&&((N=e==null?void 0:e.prices)==null?void 0:N.fixedProductTaxes.map(v=>m("div",{"data-testid":"wishlist-product-item-tax",className:c(["wishlist-product-item-tax"]),children:[t("span",{children:v.label}),t(P,{amount:v.money.value,currency:v.money.currency}),s==="INCLUDING_FPT_AND_DESCRIPTION"?"incl.":"excl."]})))]}),t(T,{"data-testid":"wishlist-product-item-move-to-cart-button",size:"medium",type:"submit",icon:t(M,{source:L}),disabled:(e==null?void 0:e.stockStatus)!=="IN_STOCK","aria-label":w.moveItemToCart,onClick:()=>a==null?void 0:a(),children:w.cartActionBtn})]})})},V=({className:r,children:f,images:e,...a})=>{const[l,n]=W(0);return m(A,{children:[t("div",{...a,className:c(["image-carousel",r]),children:t("div",{className:c(["overflow-hidden relative max-w-[200px]",r]),children:e==null?void 0:e.map((d,s)=>s===l&&t(H,{className:"image-carousel-image",alt:d.alt,src:d.src}))})}),(e==null?void 0:e.length)>1&&t("div",{className:c(["absolute","image-switcher-area"]),children:e==null?void 0:e.map((d,s)=>t("span",{className:c(["image-switcher",l===s?"image-switcher-active":"image-switcher-inactive"]),onClick:i=>{n(s),i.stopPropagation()}},s))})]})},X=({initialData:r=null,moveProdToCart:f})=>{var l,n,d,s,i;if(!(r!=null&&r.product))return null;const e=async(p=!0)=>{try{return await j([r]),console.log(`Product ${r.product.sku} removed from wishlist!`),p&&S.emit("wishlist/update",{action:"remove",item:r}),!0}catch(h){return console.error(`Product ${r.product.sku} could not be removed from wishlist`,h),!1}},a=async()=>{try{return await f([{sku:r.product.sku,quantity:1}]),console.log(`Product ${r.product.sku} successfully moved to cart ðŸ›’!`),S.emit("wishlist/update",{action:"move",item:r}),await e(!1)}catch(p){return console.error("Cart creation/update failed: ",p),!1}};return t(R,{item:r.product,onCartActionButtonClick:a,onTrashButtonClick:e,fixedProductTaxesEnabled:((l=u.config)==null?void 0:l.fixedProductTaxesEnabled)??!1,fixedProductTaxesApply:((n=u.config)==null?void 0:n.fixedProductTaxesApply)??!1,fixedProductTaxesEnabledDisplayInProductLists:(d=u.config)==null?void 0:d.fixedProductTaxesEnabledDisplayInProductLists,fixedProductTaxesEnabledDisplayInProductView:(s=u.config)==null?void 0:s.fixedProductTaxesEnabledDisplayInProductView,fixedProductTaxesEnabledDisplayInSalesModules:(i=u.config)==null?void 0:i.fixedProductTaxesEnabledDisplayInSalesModules})};export{q as C,L as S,K as T,X as W,O as a};
