/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as o,jsxs as l}from"@dropins/tools/preact-jsx-runtime.js";/* empty css                             */import{IllustratedMessage as p,Icon as f,Button as h}from"@dropins/tools/components.js";import"../chunks/TermsAndConditions.js";import{classes as a}from"@dropins/tools/lib.js";/* empty css                      *//* empty css                  */import{S as d}from"../chunks/OrderError.js";import{useText as v}from"@dropins/tools/i18n.js";/* empty css                       */import"../chunks/errors.js";import"@dropins/tools/event-bus.js";import{s as n}from"../chunks/ServerErrorSignal.js";import{useRef as k,useEffect as m}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/preact-compat.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";function g(t){t.scrollIntoView({behavior:"smooth"}),t.focus()}const C=({className:t,contactSupport:s,errorMessage:e,onClick:i,errorMessageRef:c})=>{const r=v({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"}),u=e!==""?e:r.Title;return o(p,{action:o(h,{className:a(["checkout-server-error__button"]),name:"server-error-button",onClick:i,children:r.Button}),"aria-describedby":"checkout-server-error__message","aria-invalid":"true","aria-live":"polite",className:a(["checkout-server-error",t]),"data-testid":"checkout-server-error",heading:u,icon:o(f,{className:a(["checkout-server-error__icon"]),source:d}),message:l("p",{ref:c,"data-testid":"checkout-server-error-message",id:a(["checkout-server-error__message"]),children:[r.Message,o("br",{}),o("span",{children:s??r.ContactSupport})]})})},A=({active:t=!0,onRetry:s,onServerError:e,autoScroll:i=!1})=>{const c=k(null),r=n.value,u=async()=>{s==null||s(),n.value=void 0};return m(()=>{r&&(e==null||e(r))},[r,e]),m(()=>{!i||!r||!c.current||g(c.current)},[r,i]),!t||!r?null:o(C,{errorMessage:r,errorMessageRef:c,onClick:u})};export{A as ServerError,A as default};
