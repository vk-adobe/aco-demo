/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as s,jsxs as l}from"@dropins/tools/preact-jsx-runtime.js";/* empty css                             */import{IllustratedMessage as p,Icon as f,Button as h}from"@dropins/tools/components.js";import"../chunks/TermsAndConditions.js";import{classes as a}from"@dropins/tools/lib.js";/* empty css                  *//* empty css                      *//* empty css                  */import{S as d}from"../chunks/OrderError.js";import{useText as v}from"@dropins/tools/i18n.js";/* empty css                       */import"../chunks/subscription-email-statuses.js";import"../chunks/IsBillToShippingSignal.js";import"@dropins/tools/event-bus.js";import{s as u}from"../chunks/ServerErrorSignal.js";import{useRef as k,useEffect as m}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/preact-compat.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";function g(e){e.scrollIntoView({behavior:"smooth"}),e.focus()}const C=({className:e,contactSupport:t,errorMessage:c,onClick:i,errorMessageRef:r})=>{const o=v({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"}),n=c!==""?c:o.Title;return s(p,{action:s(h,{className:a(["checkout-server-error__button"]),name:"server-error-button",onClick:i,children:o.Button}),"aria-describedby":"checkout-server-error__message","aria-invalid":"true","aria-live":"polite",className:a(["checkout-server-error",e]),"data-testid":"checkout-server-error",heading:n,icon:s(f,{className:a(["checkout-server-error__icon"]),source:d}),message:l("p",{ref:r,"data-testid":"checkout-server-error-message",id:a(["checkout-server-error__message"]),children:[o.Message,s("br",{}),s("span",{children:t??o.ContactSupport})]})})},F=({onRetry:e,onServerError:t,autoScroll:c=!1})=>{const i=k(null),r=u.value,o=async()=>{e==null||e(),u.value=void 0};return m(()=>{r&&(t==null||t(r))},[r,t]),m(()=>{!c||!r||!i.current||g(i.current)},[r,c]),r?s(C,{errorMessage:r,errorMessageRef:i,onClick:o}):null};export{F as ServerError,F as default};
